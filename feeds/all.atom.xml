<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Liang2's blog</title><link href="//blog.liang2.tw/" rel="alternate"></link><link href="//blog.liang2.tw/feeds/all.atom.xml" rel="self"></link><id>//blog.liang2.tw/</id><updated>2016-02-19T15:00:00+08:00</updated><entry><title>Add language name as CSS class of highlighted code blocks in PelicanÂ markdowns</title><link href="//blog.liang2.tw/posts/2016/02/markdown-codehilite-lang/" rel="alternate"></link><updated>2016-02-19T15:00:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2016-02-19:posts/2016/02/markdown-codehilite-lang/</id><summary type="html">&lt;p&gt;I used &lt;a href="http://docs.getpelican.com/"&gt;Pelican&lt;/a&gt; and its &lt;a href="https://pythonhosted.org/Markdown/"&gt;Markdown&lt;/a&gt; plugin to render blog&amp;nbsp;post. &lt;/p&gt;
&lt;p&gt;Recently I was playing with the &lt;a href="https://docs.python.org/"&gt;Python Official Documentation&lt;/a&gt;, which has a decent code syntax highlighter powered by &lt;a href="http://pygments.org/"&gt;Pygments&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt;What&amp;rsquo;s more, the output of code examples can be toggled. That is, a code&amp;nbsp;example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Hello World&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Hello&lt;/span&gt; &lt;span class="n"&gt;World&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;
&lt;span class="mi"&gt;42&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;can be toggled&amp;nbsp;to:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Hello World&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;which is very convenient for code&amp;nbsp;copy-pasting.&lt;/p&gt;
&lt;p&gt;However, the functionality is currently failed on the official Python doc (given by &lt;a href="https://docs.python.org/3/_static/copybutton.js"&gt;&lt;code&gt;copybutton.js&lt;/code&gt;&lt;/a&gt;) because the jQuery updates break previous &lt;span class="caps"&gt;API&lt;/span&gt; behavior. I&amp;rsquo;ve filed &lt;a href="http://bugs.python.org/issue26246"&gt;issue 26246&lt;/a&gt; on the Python issue tracker for this&amp;nbsp;problem.&lt;/p&gt;
&lt;p&gt;Anyway, you can find a &lt;a href="http://docs.python.org.tw/3/tutorial/controlflow.html"&gt;workable example&lt;/a&gt; from Taiwan&amp;rsquo;s doc translation (I&amp;rsquo;m involved in it so I already fixed it) and its functional &lt;a href="http://docs.python.org.tw/3/_static/copybutton.js"&gt;copybutton.js&lt;/a&gt;&amp;nbsp;file.&lt;/p&gt;
&lt;h3 id="code-output-toggle-in-pelican"&gt;Code output toggle in&amp;nbsp;Pelican&lt;/h3&gt;
&lt;p&gt;After I fixed the copybutton.js, I wished to add this functionality to my&amp;nbsp;blog. &lt;/p&gt;
&lt;p&gt;Code highlighting in Pelican markdown files is handled by its &lt;a href="https://pythonhosted.org/Markdown/extensions/code_hilite.html"&gt;CodeHilite&lt;/a&gt; extension. To my surprise, I found CodeHilite does not express the language name specified for each code&amp;nbsp;block.&lt;/p&gt;
&lt;p&gt;What I expected&amp;nbsp;was&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;highlight-python3&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;highlight&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;pre&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="c"&gt;&amp;lt;!-- ... --&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;pre&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;but the actual output&amp;nbsp;was&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;highlight&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;pre&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="c"&gt;&amp;lt;!-- ... --&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;pre&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So no way to find the language name the code block used, nor the lexer aliases Pygments guessed when no language name was&amp;nbsp;specified.&lt;/p&gt;
&lt;p&gt;A quick dig into the &lt;a href="https://github.com/waylan/Python-Markdown/blob/master/markdown/extensions/codehilite.py#L106-L123"&gt;source code&lt;/a&gt; showed that it is relatively easy to fix. Here is the&amp;nbsp;diff:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gh"&gt;diff --git a/extensions/codehilite.py b/extensions/codehilite_updated.py&lt;/span&gt;
&lt;span class="gh"&gt;index 0657c37..4fad7c5 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/extensions/codehilite.py&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/extensions/codehilite_updated.py&lt;/span&gt;
&lt;span class="gu"&gt;@@ -75,7 +75,8 @@ class CodeHilite(object):&lt;/span&gt;

     def __init__(self, src=None, linenums=None, guess_lang=True,
                  css_class=&amp;quot;codehilite&amp;quot;, lang=None, style=&amp;#39;default&amp;#39;,
&lt;span class="gd"&gt;-                 noclasses=False, tab_length=4, hl_lines=None, use_pygments=True):&lt;/span&gt;
&lt;span class="gi"&gt;+                 noclasses=False, tab_length=4, hl_lines=None, use_pygments=True, &lt;/span&gt;
&lt;span class="gi"&gt;+                 wrap_by_lang=True):&lt;/span&gt;
         self.src = src
         self.lang = lang
         self.linenums = linenums
&lt;span class="gu"&gt;@@ -86,6 +87,7 @@ class CodeHilite(object):&lt;/span&gt;
         self.tab_length = tab_length
         self.hl_lines = hl_lines or []
         self.use_pygments = use_pygments
&lt;span class="gi"&gt;+        self.wrap_by_lang = wrap_by_lang&lt;/span&gt;

     def hilite(self):
         &amp;quot;&amp;quot;&amp;quot;
&lt;span class="gu"&gt;@@ -114,13 +116,22 @@ class CodeHilite(object):&lt;/span&gt;
                         lexer = get_lexer_by_name(&amp;#39;text&amp;#39;)
                 except ValueError:
                     lexer = get_lexer_by_name(&amp;#39;text&amp;#39;)
&lt;span class="gi"&gt;+            lang = lexer.aliases[0]&lt;/span&gt;
             formatter = get_formatter_by_name(&amp;#39;html&amp;#39;,
                                               linenos=self.linenums,
                                               cssclass=self.css_class,
                                               style=self.style,
                                               noclasses=self.noclasses,
                                               hl_lines=self.hl_lines)
&lt;span class="gd"&gt;-            return highlight(self.src, lexer, formatter)&lt;/span&gt;
&lt;span class="gi"&gt;+            hilited_html = highlight(self.src, lexer, formatter)&lt;/span&gt;
&lt;span class="gi"&gt;+            if self.wrap_by_lang and self.lang:&lt;/span&gt;
&lt;span class="gi"&gt;+                return &amp;#39;&amp;lt;div class=&amp;quot;%(class)s-%(lang)s&amp;quot;&amp;gt;%(html)s&amp;lt;/div&amp;gt;\n&amp;#39; % {&lt;/span&gt;
&lt;span class="gi"&gt;+                    &amp;#39;class&amp;#39;: self.css_class,&lt;/span&gt;
&lt;span class="gi"&gt;+                    &amp;#39;lang&amp;#39;: lang.replace(&amp;#39;+&amp;#39;, &amp;#39;-&amp;#39;),&lt;/span&gt;
&lt;span class="gi"&gt;+                    &amp;#39;html&amp;#39;: hilited_html,&lt;/span&gt;
&lt;span class="gi"&gt;+                }&lt;/span&gt;
&lt;span class="gi"&gt;+            else:&lt;/span&gt;
&lt;span class="gi"&gt;+                return hilited_html&lt;/span&gt;
         else:
             # just escape and build markup usable by JS highlighting libs
             txt = self.src.replace(&amp;#39;&amp;amp;&amp;#39;, &amp;#39;&amp;amp;amp;&amp;#39;)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I&amp;rsquo;m happy with the patched codehilite output. I am now able to give code toggle function to specific code&amp;nbsp;languages. &lt;/p&gt;
&lt;p&gt;However it&amp;rsquo;s quite busy these days, so it may take a while to submit a proper pull request (e.g. fix any broken unit tests, write new tests, and tune the &lt;span class="caps"&gt;API&lt;/span&gt; as well as the new behavior). Moerover, &lt;strong&gt;currently my site does not use jQuery&lt;/strong&gt; so I am missing a huge dependency. Rewriting it using vanilla &lt;span class="caps"&gt;JS&lt;/span&gt; seems to require considerable work, and the very thing I don&amp;rsquo;t have at hand is time&amp;nbsp;:(&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve decided to leave this improvement in future development. But if your site use Pelican Markdown and imports jQuery, the diff will add the code language&amp;nbsp;back. &lt;/p&gt;</summary><category term="en"></category><category term="blog"></category><category term="pelican"></category><category term="codehilite"></category><category term="pygment"></category></entry><entry><title>è¨­å® Python èªªææä»¶ä¸­æç¿»è­¯èªåæ´æ°Â Server</title><link href="//blog.liang2.tw/posts/2016/02/pydoctw-server/" rel="alternate"></link><updated>2016-02-14T21:00:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2016-02-14:posts/2016/02/pydoctw-server/</id><summary type="html">&lt;p&gt;&lt;em&gt;&lt;span class="caps"&gt;TL&lt;/span&gt;;&lt;span class="caps"&gt;DR&lt;/span&gt;&lt;/em&gt; å¯è³ &lt;a href="http://docs.python.org.tw"&gt;http://docs.python.org.tw&lt;/a&gt; çç·ä¸èªåæ´æ°ç&lt;a href="http://docs.python.org.tw/3/"&gt;ä¸­æåçæä»¶&lt;/a&gt;å &lt;a href="http://docs.python.org.tw/_build/"&gt;build server&lt;/a&gt;ã&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;EDIT&lt;/span&gt; 2016-02-16: å ä¸ language codeãgit sshconfigãswap&amp;nbsp;çè¨­å®ï¼æå¥æ½¤é£¾ã&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#python"&gt;Python èªªææä»¶ä¸­æç¿»è­¯è¨ç«&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#sphinx"&gt;Sphinx&amp;nbsp;æä»¶å¤åèªè¨æ¶æ§&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#transifex-po"&gt;Transifex ç·ä¸æåè®å¤äººå±åç¿»è­¯ po&amp;nbsp;æª&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_1"&gt;ç¿»è­¯é«é©æ¹å&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#pydoc-autobuild-server"&gt;PyDoc Autobuild Server&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_2"&gt;å¯¦ä½&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#sphinx_1"&gt;Sphinx&amp;nbsp;æä»¶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#autobuild-django-server"&gt;Autobuild Django&amp;nbsp;server&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#autobuild-server"&gt;Autobuild server é¨ç½²&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_3"&gt;ä½æ¥­ç³»çµ±&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#python-35-and-apt-pinning"&gt;Python 3.5 and &lt;span class="caps"&gt;APT&lt;/span&gt;-pinning&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#postgresql"&gt;è³æåº«&amp;nbsp;PostgreSQL&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#swap"&gt;Swap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#git-repo-ssh-config"&gt;Git repo ssh&amp;nbsp;config&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#django-stack-nginx-uwsgi"&gt;Django Stack &amp;ndash; nginx + uWSGI&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#nginx"&gt;nginx&amp;nbsp;è¨­å®&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#uwsgi"&gt;uWSGI&amp;nbsp;è¨­å®&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#systemd-services"&gt;Systemd&amp;nbsp;services&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_4"&gt;ç¸½çµ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="python"&gt;Python&amp;nbsp;èªªææä»¶ä¸­æç¿»è­¯è¨ç«&lt;/h2&gt;
&lt;p&gt;æè¿ä¸æ®µæéé½å¨æºå &lt;a href="https://github.com/python-doc-tw/python-doc-tw"&gt;Python èªªææä»¶ä¸­æç¿»è­¯è¨ç«&lt;/a&gt;ãç¿»è­¯æ¬èº«éç¶éæ²å¾ç©æ¥µå°é²è¡ï¼ä½ç¶é&lt;a href="http://www.meetup.com/Taipei-py/events/226558484/"&gt;å&lt;/a&gt;&lt;a href="http://www.meetup.com/Taipei-py/events/227001232/"&gt;å¹¾æ¬¡&lt;/a&gt; Taipei.py Projects On ç sprint æ´»åï¼å·²ç¶æè »å¤äººå å¥ç¿»è­¯çè¡åãå¤§å®¶é½æåèªç¿»è­¯çä¸»é¡ï¼åæèªå·±æ¯å¾ &lt;a href="http://docs.python.org.tw/3/tutorial/index.html"&gt;Tutorial&lt;/a&gt;&amp;nbsp;çé¨ä»½éå§ç¿»è­¯ã&lt;/p&gt;
&lt;h3 id="sphinx"&gt;Sphinx&amp;nbsp;æä»¶å¤åèªè¨æ¶æ§&lt;/h3&gt;
&lt;p&gt;åç°¡ä»ä¸ä¸ &lt;a href="https://docs.python.org/3/"&gt;CPython Documentation&lt;/a&gt;ï¼ä¸ç¨± pydocï¼çæ¶æ§åç¿»è­¯æ¹å¼ãpydoc æ¯æ¨æºç &lt;a href="http://www.sphinx-doc.org/en/stable/"&gt;Sphinx&lt;/a&gt; æä»¶ï¼å æ­¤ç¿»è­¯ä½¿ç¨ Sphinx èªå¸¶ç &lt;a href="http://www.sphinx-doc.org/en/stable/intl.html"&gt;internationalization&lt;/a&gt; (i18n or intl)&amp;nbsp;åè½ææä»¶çå§å®¹è½æå°å¥çèªè¨ä¸ã&lt;/p&gt;
&lt;p&gt;å¦å Django ç­å°æ¡ï¼i18n é½æ¯éé gettextï¼Sphinx ææç§ rst æªæ¡è¼¸åºåæªåç po æªãrst æªæ¡ä¸­çæ¯åæå­æ®µè½æå°æå° po æªä¸å entryï¼ä¸ç¸å¹²çç¨å¼ç¢¼ç¯ä¾ç­æ®µè½æè¢«è·³éãè¼¸åºç po æªæ¾å¨å°æçè·¯å¾ä¾å¦ &lt;code&gt;locale/&amp;lt;lang&amp;gt;/LC_MESSAGES/xxx.po&lt;/code&gt;ã&lt;/p&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/Gettext"&gt;po æªçæ ¼å¼&lt;/a&gt;å¾ç°¡å®ï¼è·³éæçæ²ç&amp;nbsp;headerï¼å¯¦è³ªå§å®¹é·éæ¨£ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;#: ../../tutorial/appetite.rst:50&lt;/span&gt;
&lt;span class="nv"&gt;msgid&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="s"&gt;&amp;quot;Python enables programs to be written compactly and readably.  Programs &amp;quot;&lt;/span&gt;
&lt;span class="s"&gt;&amp;quot;written in Python are typically much shorter than equivalent C,  C++, or &amp;quot;&lt;/span&gt;
&lt;span class="s"&gt;&amp;quot;Java programs, for several reasons:&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;msgstr&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="s"&gt;&amp;quot;Python è®ç¨å¼å¯«å¾ç²¾ç°¡ä¸¦æè®ãç¨ Python å¯¦ä½çç¨å¼é·åº¦å¾å¾é æ¯ç¨ &amp;quot;&lt;/span&gt;
&lt;span class="s"&gt;&amp;quot;CãC++ãJava å¯¦ä½çç­ãéæä»¥ä¸å¹¾ååå ï¼&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯¦éä¸ Sphinx æåè¼¸åºä¸ä»½ä¹¾æ·¨ç po æªç¯æ¬ï¼ç¨±çº pot æªï¼å° &lt;code&gt;locale/pot/&lt;/code&gt;ï¼åºæ¬ä¸å°±æ¯åªæåæç po æªãæ¯å¢å ä¸åæ°èªè¨å°±æå¾ pot æªè£½ä½ä¸ä»½ po æªå°åèªç &lt;code&gt;locale/&amp;lt;lang&amp;gt;/&lt;/code&gt; ç®éä¸ï¼ç¿»è­¯æå°±ä¿®æ¹é£ä»½ po&amp;nbsp;æªå°±å¯ä»¥ã&lt;/p&gt;
&lt;p&gt;ç¿»è­¯å®æå¾ï¼é¦å Sphinx æåå¼å« gettext æ po æªç·¨è­¯æ mo æªå éæå°ç¿»è­¯å­ä¸²éåº¦ãè¼¸åºç¿»è­¯å¾çæä»¶åªè¦è¨­å®ä¸åèªè¨ï¼Sphinx å°±æå»æ¾è©²èªè¨ç mo æªï¼ä¸¦æåæå­ä¸²ææ mo&amp;nbsp;æªè£¡çå§å®¹ï¼å°±å¯ä»¥çå°ä¸­æçæä»¶ã&lt;/p&gt;
&lt;h3 id="transifex-po"&gt;Transifex ç·ä¸æåè®å¤äººå±åç¿»è­¯ po&amp;nbsp;æª&lt;/h3&gt;
&lt;p&gt;æ´å Sphinx æä»¶ç¿»è­¯æµç¨å°±éæ¨£ï¼æä»¥ç¿»è­¯åªè¦ç·¨è¼¯ä¸­æ (lang code: zh-Hant&lt;sup id="fnref:zh-Hant"&gt;&lt;a class="footnote-ref" href="#fn:zh-Hant" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt;) ç po æªå°±å¥½äºãä¸éè¦ç´æ¥å¯« po æªæ ¼å¼éæª»éæ¯å¤ªé«ï¼æ¼æ¯å°±æå &lt;a href="https://www.transifex.com/"&gt;Transifex&lt;/a&gt; éæ¨£çç¶²ç«ãä¸å³ po/pot æªå°±è½ç·ä¸ä¿®æ¹ç¿»è­¯ï¼ç¶å¾åæç¿»å®ççµæç¨ po æªæ ¼å¼ä¸è¼ä¸ä¾ãæèªçºéæ¯ç¾å¨åå ä»¥ gettext-based &lt;span class="caps"&gt;PO&lt;/span&gt; æªç¿»è­¯éæª»æä½çæ¹å¼ï¼è³å°æ¥æ¬ä¹æ¯ééº¼åãæ¼æ¯æ³è¦åè pydoc ç¿»è­¯çäººï¼åªè¦ç»å¥ Transifex&amp;nbsp;å°±å¯ä»¥éå§ç·¨è¼¯ã&lt;/p&gt;
&lt;p&gt;ç¨ Transifex éæé¡å¤çå¥½èãä¾å¦ä»æ &lt;span class="caps"&gt;POS&lt;/span&gt; tagging å¯ä»¥æ¨æ³¨å°æåè©ï¼å®ç¾©çµ±ä¸çè­¯åï¼éäºè­¯åææ´çå¨ glossary terms è£¡ï¼ç¿»è­¯æåºç¾éäºè©å°±æèªåæç¤ºãé¡ä¼¼çåææå¥ä¹ææ¾å¨ suggestion è£¡ï¼è®ç¿»è­¯å®çç¨èªææ³ä¹è½ä¸è´ãæ­¤å¤ä¹æä¿®æ¹æ­·å²ãé²åæç¤ºï¼å¦è©²æçæ ¼å¼æ²å¨è­¯æåºç¾ï¼ãå è¨»è§£ (comment)ãè©è« (issue)&amp;nbsp;ç­åè½ã&lt;/p&gt;
&lt;h3 id="_1"&gt;ç¿»è­¯é«é©æ¹å&lt;/h3&gt;
&lt;p&gt;éæ®µæéç¿»è­¯çç¨è©ãæµç¨ç­è¦ç¯é½æåéåäºï¼ç¸éçå§å®¹é½å¯ä»¥å¨&lt;a href="https://github.com/python-doc-tw/python-doc-tw/wiki"&gt;å°æ¡ç wiki&lt;/a&gt;&amp;nbsp;è£¡æ¾å°ãæä»¥éå§æ³è¦æéº¼è®å¤§å®¶æ´å¥½åèç¿»è­¯åçå°ç¿»è­¯ççµæã&lt;/p&gt;
&lt;p&gt;æç¼ç¾åå ç¿»è­¯æ¬èº«å·²ç¶ä¸å°é£ï¼å¤§å®¶æ²ä»éº¼çåãç¶­è­·æ´é«çç¨è©ãç¿»è­¯è¨è«ç¨ Transifex issue å comment&amp;nbsp;ææä¸é¯ãæ´é«ä¸è½ä¿ææ¥µåº¦åæ£å¼çå·¥ä½å½¢å¼ã&lt;/p&gt;
&lt;p&gt;å¹³å¸¸éå°æå¤åé¡æ¯åºç¾ rst æ ¼å¼é¯èª¤ãç¼ºå°å¿è¦çç©ºç½ãåå¾æå ä¸ç¨å¼ç¢¼ç¯ä¾ä¹å¾ä¸éé ãè­¯ææ²è§£æèª¤æåæçææãéäºåé¡ï¼æè¦ºå¾åªè¦èªå·±è®éç¿»å®ç pydoc è©²é ãçä¸ä¸è¼¸åºç log&amp;nbsp;å°±è½æç½ï¼ä¹ä¸éè¦æå¤ä½è§£éã&lt;/p&gt;
&lt;p&gt;åä¾ï¼çä¸å°èªå·±ç¿»è­¯çææ&lt;strong&gt;å¾æ²ææå°±æ&lt;/strong&gt;ï¼éä¸æ®µæéæææå¤±å»ååã&lt;/p&gt;
&lt;p&gt;æ¼æ¯è®æéè¦ä¸ä»½ä¿ææ´æ°çç¿»è­¯ææãç¶ç¶èªå·±è¼¸åº doc çæ¹æ³é½æå¯«å¨ &lt;a href="https://github.com/python-doc-tw/python-doc-tw/wiki/How-to-build-the-doc-locally"&gt;wiki&lt;/a&gt;&amp;nbsp;è£¡ï¼ä½æ­¥é©å¾å¤ï¼èªªç°¡å®ä¹æ²å¤ç°¡å®ï¼èä¸æé¯ææåé¡å¯è½é½è¦ä¾æ¾æï¼å°±å¤±å»åæ£å¼åå·¥çç¹æ§äºã&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸å¦åå autobuild&amp;nbsp;serverã&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¼æ¯æäºéæ³æ³ãä½å¯¦å¨æ¯åå¤§åï¼ä¸ç´åªè½ç¨æ³çãå¨éå¹´çæåç¸½ç®æ¾å°æéæ prototype&amp;nbsp;ååºä¾äºï¼å¶å¯¦è »ææå°±æçã&lt;/p&gt;
&lt;h2 id="pydoc-autobuild-server"&gt;PyDoc Autobuild&amp;nbsp;Server&lt;/h2&gt;
&lt;p&gt;ç°¡å®æ´çå¹¾åéæ±ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PyDoc çµæç¶²åå°ææ¬å®¶ &lt;a href="https://docs.python.org/"&gt;https://docs.python.org/&lt;/a&gt;ãä¾å¦ /3/ å°±æ¯ Python 3.x çææ°çï¼èç¾å¨ /3.5/ å°±æèªåè½åå° /3/&lt;sup id="fnref:pydoc-url"&gt;&lt;a class="footnote-ref" href="#fn:pydoc-url" rel="footnote"&gt;2&lt;/a&gt;&lt;/sup&gt;ã&lt;/li&gt;
&lt;li&gt;æ¯ä¸é é½æåæ´æ°ç¿»è­¯é£çµï¼é»ä¸ä¸å°±æå¾ Transifex&amp;nbsp;ä¸ææ°çç¿»è­¯ï¼ä¸¦æ´æ°è¼¸åºã&lt;/li&gt;
&lt;li&gt;æ´æ°æ¯é ç¿»è­¯çæä»¤è¼¸åºé½è¦ä¿çï¼æ¹ä¾¿æª¢æ¥ rst&amp;nbsp;èªæ³ç­é¯èª¤ã&lt;/li&gt;
&lt;li&gt;æ´æ°ç¿»è­¯è¦æå queueï¼æå¯ä»¥å¤äººåä½æä¸ç¸æ autobuild&amp;nbsp;serverã&lt;/li&gt;
&lt;li&gt;æ¯æ¥æ´æ°å¨é¨çæä»¶ï¼ä¸¦ä¸ææ´æ°å å° CPython-tw ç git repo&amp;nbsp;ä¸­ãæ´æ°çéç¨ä¸æ¨£è¦æè¨éã&lt;/li&gt;
&lt;li&gt;ä¸è¿°çææåè½é½è½å¨æ¬æ©è¼é¬å°è¨­å®ã&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_2"&gt;å¯¦ä½&lt;/h3&gt;
&lt;p&gt;ç®æ¨å°±æ¯å®æä¸è¿°çéæ±ãpydoc åºæ¬ä¸å°±æ¯å static siteï¼äº¤çµ¦ nginx è¨­å¥½è·¯å¾ host static files å°±å¯ä»¥ãPydoc Sphinx ç¨ &lt;a href="http://jinja.pocoo.org/docs/dev/"&gt;Jinja2&lt;/a&gt; ä½ &lt;span class="caps"&gt;HTML&lt;/span&gt; templateï¼æä»¥åªè¦å¤å ä¸äºè®æ¸å°±è½æ§å¶é é¢çè¼¸åºï¼å¨ autobuild server ä¸æå°±å¯ä»¥å ä¸é¡å¤çé£çµãè Autobuild server æ¬èº«æ¯å task queueï¼å¶å¯¦åè½å¾ç°¡å®ï¼ä½çºäºç¶­è­·æ¹ä¾¿ï¼ä¸¦èæ®å° localãproduction ç°å¢é½è¦è½åçè©±ï¼é¸æ &lt;a href="https://www.djangoproject.com/"&gt;Django&lt;/a&gt; çºåºç¤ãçççµ¦ Django ç®¡ççå°±é¡¯ç¤º task queueãtask resultãæ¥å rebuild doc request éå¹¾å&amp;nbsp;viewã&lt;/p&gt;
&lt;h4 id="sphinx_1"&gt;Sphinx&amp;nbsp;æä»¶&lt;/h4&gt;
&lt;p&gt;å¨ Sphinx æä»¶é¨ä»½ä¸æ³æå¤ªè¤éï¼å°±å¨æ¯ä¸é å ä¸ä¸åèªå·±çå°å±¬é£çµï¼æéåç¶²åå°±æå å¥ä¸åæ´æ°è©²é é¢ç task å° autobuild server&lt;sup id="fnref:build-link"&gt;&lt;a class="footnote-ref" href="#fn:build-link" rel="footnote"&gt;3&lt;/a&gt;&lt;/sup&gt;ã&lt;/p&gt;
&lt;p&gt;å¨ autobuild æå å¥å°å±¬é£çµåªè¦ä¿®æ¹ Sphinx doc template å³å¯ãSphinx å¨ build doc æå¯ä»¥éé &lt;a href="http://www.sphinx-doc.org/en/stable/man/sphinx-build.html#options"&gt;&lt;code&gt;-A &amp;lt;name=value&amp;gt;&lt;/code&gt;&lt;/a&gt; å¢å  Jinja2 template çè®æ¸ï¼å°±å¯æ§å¶ template render&amp;nbsp;è¡çºï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;{# &amp;lt;cpython-src&amp;gt;/Doc/tools/templates/layout.html #}&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt;- &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nv"&gt;autobuildi18n&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/_build/update/?source_path=&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;pagename&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Update Translation&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt;- &lt;span class="k"&gt;endif&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sphinx-build -A autobuildi18n=1&lt;/code&gt; æå°±æåå«éå Jinja2 blockï¼å¤éå Update Translation&amp;nbsp;é£çµã&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.sphinx-doc.org/en/stable/templating.html#pagename"&gt;&lt;code&gt;{{ pagename }}&lt;/code&gt;&lt;/a&gt; æ¯æ¯é æä»¶ç rst&amp;nbsp;è·¯å¾ã&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="autobuild-django-server"&gt;Autobuild Django&amp;nbsp;server&lt;/h4&gt;
&lt;p&gt;Django server ç®æ¨å°±æ¯æ¥å task request åé¡¯ç¤º task resultãä¸åæ¨æºç task queue&amp;nbsp;å°±æéäºåè½ã&lt;/p&gt;
&lt;p&gt;Django ä¸ç task queue é¸æå¾å¤ï¼å¾ &lt;a href="https://www.djangopackages.com/"&gt;Django Packages&lt;/a&gt; ä¸ç &lt;a href="https://www.djangopackages.com/grids/g/workers-queues-tasks/"&gt;Workers, Queues, and Tasks&lt;/a&gt; ç¸éçå¥ä»¶å¯ä»¥çå°æå¹¾åæå¨æ´æ°èä¸ up&amp;nbsp;æ¸å¤çï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://celery.github.io/django-celery/"&gt;django-celery&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://huey.readthedocs.org/en/latest/"&gt;huey&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/ui/django-rq"&gt;django-&lt;span class="caps"&gt;RQ&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://policystat.github.io/jobtastic/"&gt;jobtastic&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://django-q.readthedocs.org/"&gt;django-Q&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ£æä¸æ¯æ´ Python 3 çå¥ä»¶&lt;sup id="fnref:python3"&gt;&lt;a class="footnote-ref" href="#fn:python3" rel="footnote"&gt;4&lt;/a&gt;&lt;/sup&gt;å¾ï¼å°±å© django-celeryãdjango-&lt;span class="caps"&gt;RQ&lt;/span&gt;ãdjango-Q å¯ä»¥é¸ãéè£¡é¢æç´ä¹æèççæ¯ django-celery ï¼å®è &lt;a href="http://www.celeryproject.org/"&gt;Celery&lt;/a&gt; æ´åï¼åè½å®æ´ä¸ç©©å®ï¼æç¨éä¹è¦ºå¾ååä¸é¯ï¼ç¼ºé»æ¯åè½å¤ªå¤æé»è¤éï¼å ä¸ä¸å message queue æææå¾å¤è¨­å®è¦èª¿æ´ï¼éè¦ä¸æ®µæéä¸æãä¸è¬ Celery å¸¸è¦çæ­éä½¿ç¨ &lt;a href="https://www.rabbitmq.com/"&gt;Rabbit-&lt;span class="caps"&gt;MQ&lt;/span&gt;&lt;/a&gt; å &lt;a href="http://redis.io/"&gt;Redis&lt;/a&gt;ï¼çç¢ºå¨ task å¾å¤ææå¿è¦ï¼ä½æåéå build doc ä¸å¤©å¯è½æåå¹¾æ¬¡ï¼å¨ä¸éé¢ build doc ç°å¢çææ³åæéç worker åªè½æä¸åï¼ä¸æææè½ä¸çåé¡ãå æ­¤æå¾ååªè¦ä½¿ç¨è Django åä¸å database å°±å¥½ï¼ä¸è¦åæé¡å¤é Python ç dependencyï¼è® local&amp;nbsp;éç¼ç°¡å®ä¸é»ã&lt;/p&gt;
&lt;p&gt;æå¾é¸æ &lt;a href="https://django-q.readthedocs.org/"&gt;django-Q&lt;/a&gt;ãéç¶å¾æ°ä½ä½èç¶­è­·å¾å¾å¤ï¼worker å¯ä»¥åªç¨ Python å§å»ºç multiprocessing å®æãåè½ç°¡å®å»å®æ´ï¼åå« monitorï¼è· django-admin æ´åï¼éå¯ä»¥æç¨ãæä»¥è¦åå django-Q ç&amp;nbsp;clusterï¼åªè¦å¤ä¸å &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;python manage.py qcluster
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å³å¯ï¼ååæ¹ä¾¿ã&lt;/p&gt;
&lt;p&gt;æéº¼ä½¿ç¨ django-Q å°±ä¸å¨éç¯ blog è¨è«ç¯åå§äºãææ³ææè©²ææç¨¿ PyCon &lt;span class="caps"&gt;TW&lt;/span&gt; æ Taipei.pyï¼å°æååæ´çæå¦ä¸ç¯ãDjango-Q&amp;nbsp;çèªªææä»¶å¯«å¾å¾æ¸æ¥ï¼è®ä¸è®æè©²å°±æäºã&lt;/p&gt;
&lt;h2 id="autobuild-server"&gt;Autobuild server&amp;nbsp;é¨ç½²&lt;/h2&gt;
&lt;p&gt;ï¼éç¯æçéé»å¶å¯¦æ¯é¨ç½²ï¼èª°æå¾èæ¯ä»ç´¹å¯ä»¥ééº¼é·ï¼&lt;/p&gt;
&lt;p&gt;é¨ç½² (deploy)&amp;nbsp;æ¹æ³ç¾ç¾ç¨®ï¼æå¥½æå£ãä½è³å°è¦æä¸ç¨®åï¼æä»¥ééå°±ç¨å¶ä¸­ä¸ç¨®ï¼&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;nginx &amp;lt;-&amp;gt; uwsgi &amp;lt;-&amp;gt;&amp;nbsp;Django&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¹ç®å¾æµè¡ççµåãæ´å®æ´å°ä¾èªªï¼æ´åèç request&amp;nbsp;çæµç¨ç¶éï¼&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;web client &amp;lt;-&amp;gt; nginx web server &amp;lt;-&amp;gt; socket &amp;lt;-&amp;gt; uwsgi &amp;lt;-&amp;gt; Django&amp;nbsp;server&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åºæ¬çè¨­å®èæå­¸ä¾èª &lt;a href="http://uwsgi-docs.readthedocs.org/en/latest/index.html"&gt;uWSGI&lt;/a&gt; å®ç¶²ç &lt;a href="http://uwsgi-docs.readthedocs.org/en/latest/tutorials/Django_and_nginx.html"&gt;&lt;em&gt;Setting up Django and your web server with uWSGI and nginx&lt;/em&gt;&lt;/a&gt; ä¸æï¼æ­é &lt;a href="http://uwsgi-docs.readthedocs.org/en/latest/Systemd.html"&gt;&lt;em&gt;uWGSI and Systemd&lt;/em&gt;&lt;/a&gt; è &lt;a href="https://www.freedesktop.org/wiki/Software/systemd/"&gt;systemd&lt;/a&gt;&amp;nbsp;æ´åã&lt;/p&gt;
&lt;p&gt;éä¹æ¯ç®å Pydoc production&amp;nbsp;çè¨­å®ï¼è¨éä¸ä¸æ¹ä¾¿æªä¾çç¶­è­·ã&lt;/p&gt;
&lt;h3 id="_3"&gt;ä½æ¥­ç³»çµ±&lt;/h3&gt;
&lt;p&gt;ä½æ¥­ç³»çµ±ç¨ Debian Jessieï¼æ¶è¨­æ¼ Amazon &lt;span class="caps"&gt;EC2&lt;/span&gt; ä¸ï¼ä½¿ç¨ t2.nano&lt;sup id="fnref:ec2-nano"&gt;&lt;a class="footnote-ref" href="#fn:ec2-nano" rel="footnote"&gt;5&lt;/a&gt;&lt;/sup&gt;ã&lt;/p&gt;
&lt;p&gt;Python web deploy é½ææå¥ä»¶è£å¨èæ¬ç°å¢ä¸­ï¼é¿åä¸åå°æ¡éäºè¡æèç³»çµ±è¡çªãå¨ Debian ä¸å¯ä»¥ç¨ &lt;code&gt;apt buid-dep python3-&amp;lt;pkg&amp;gt;&lt;/code&gt; æ Python &lt;pkg&gt; å¥ä»¶æéç header æ library&amp;nbsp;å®è£å¥½ï¼ååç°¡å®ã&lt;/p&gt;
&lt;h4 id="python-35-and-apt-pinning"&gt;Python 3.5 and &lt;span class="caps"&gt;APT&lt;/span&gt;-pinning&lt;/h4&gt;
&lt;p&gt;æç code è£¡ç¨å°äº &lt;a href="https://docs.python.org/3/library/subprocess.html#subprocess.run"&gt;&lt;code&gt;subprocess.run&lt;/code&gt;&lt;/a&gt;ï¼éæ¯ Python 3.5+ ææç &lt;span class="caps"&gt;API&lt;/span&gt;ãä½ Jessie åªæ Python 3.4ï¼ä½æè¦ºå¾å¾å¥½ç¨ä¸é»é½ä¸æ³æ¹å¯«æç¸å®¹èçç&amp;nbsp;codeã&lt;/p&gt;
&lt;p&gt;å æ­¤éè¦å®è£ Debian testing channel ä¸ææ°ç Python 3.5ãéæ¨£å¶å¯¦æå®å¨ä¸ççæ®ï¼å çºåªæ stable channel ææ security supportï¼ä½èªå·±ç·¨è­¯çåé¡æ´å¤§ï¼æä»¥å &lt;a href="https://github.com/yyuu/pyenv"&gt;pyenv&lt;/a&gt; éç¨®å¤ Python&amp;nbsp;çæ¬çå·¥å·ä¸å¨èæ®å§ã&lt;/p&gt;
&lt;p&gt;æ¼æ¯ç¨ &lt;a href="https://wiki.debian.org/AptPreferences"&gt;Apt-Pinning&lt;/a&gt; åªè® Python 3.5 ç¸éçå¥ä»¶å®è£ testing ççæ¬ãé¦åæ testing channel å å° &lt;code&gt;/etc/apt/source.list&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://cloudfront.debian.net/debian&lt;/span&gt; &lt;span class="kp"&gt;testing&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;span class="k"&gt;deb-src&lt;/span&gt; &lt;span class="s"&gt;http://cloudfront.debian.net/debian&lt;/span&gt; &lt;span class="kp"&gt;testing&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://security.debian.org/&lt;/span&gt; &lt;span class="kp"&gt;testing/updates&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;span class="k"&gt;deb-src&lt;/span&gt; &lt;span class="s"&gt;http://security.debian.org/&lt;/span&gt; &lt;span class="kp"&gt;testing/updates&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¶å¾ä¿®æ¹ &lt;code&gt;/etc/apt/preferences&lt;/code&gt; ç¢ºå®æåä¸æä¸å°å¿è£å° testing ç¸éçå¥ä»¶ï¼ä¸¦æ Python 3.5 ç¸éçå¥ä»¶è¨­å®æ¬é &amp;gt;= 990&amp;nbsp;è®å®åè½è¢«èªåå®è£ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Specify * rules first so later package-specfic rules can override them
Package: *
Pin: release a=testing
Pin-Priority: -10

Package: python3.5* libpython3.5*
Pin: release a=testing
Pin-Priority: 990
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯ä»¥ç¨ &lt;code&gt;sudo apt-cache policy &amp;lt;pkg-name&amp;gt;&lt;/code&gt; æª¢æ¥ç®åçè¦åæè£å°åªåçæ¬ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get update 
$ sudo apt-get install python3.5 python3.5-venv python3.5-dev
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éæ¨£åªæ Python 3.5 ç¸éçå¥ä»¶ææè£å°&amp;nbsp;testingã&lt;/p&gt;
&lt;h4 id="postgresql"&gt;è³æåº«&amp;nbsp;PostgreSQL&lt;/h4&gt;
&lt;p&gt;è³æåº«ç¨ PostgreSQL 9.4ãåç§ä¹å blog&lt;a href="//blog.liang2.tw/posts/2016/01/postgresql-install/"&gt;ãå®è£ PostgreSQL 9 æ¼ Debian Jessie / &lt;span class="caps"&gt;OSX&lt;/span&gt;ã&lt;/a&gt;ä¸æè¨­å®ã&lt;/p&gt;
&lt;h4 id="swap"&gt;Swap&lt;/h4&gt;
&lt;p&gt;å¶å¯¦æ¯ä¸ç·ä¸ä¹ææ³¨æå° &lt;span class="caps"&gt;EC2&lt;/span&gt; é è¨­æ²æ swap ç©ºéãæå¾çª®æä»¥ production server ç &lt;span class="caps"&gt;RAM&lt;/span&gt; åªæ 512 &lt;span class="caps"&gt;MB&lt;/span&gt;ï¼è§å¯ä¸ä¸ææå build doc &lt;span class="caps"&gt;RAM&lt;/span&gt; å°±å¨æ»¿äºï¼æä»¥éæ¯å å swap&amp;nbsp;å®å¿ä¸é»ã&lt;/p&gt;
&lt;p&gt;å çº Amazon &lt;span class="caps"&gt;EBS&lt;/span&gt; &lt;span class="caps"&gt;SSD&lt;/span&gt; I/O æ¸ä¸æå¦å¤æ¶é¢ï¼æè©²å§ï¼ï¼ï¼å°±å»º swap file&amp;nbsp;å¨ä¸»ç¡¬ç¢è£¡ã&lt;/p&gt;
&lt;p&gt;Swap è¨­å®çæå­¸å¾å¤ï¼ééå°±åè &lt;a href="https://wiki.archlinux.org/index.php/swap"&gt;Arch Wiki&lt;/a&gt; ä¸çåæ³ï¼æé¸ææ¾å¨ &lt;code&gt;/var/swap.1&lt;/code&gt;ãå¤§å°è¨­å®çº &lt;span class="caps"&gt;RAM&lt;/span&gt; ç 2 åï¼å³ &lt;span class="caps"&gt;1GB&lt;/span&gt;ã&lt;/p&gt;
&lt;p&gt;é¦åæéåæªæ¡å»ºåºä¾ï¼æ¬éæ¹çº&amp;nbsp;600ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo /bin/dd &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/dev/zero &lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/swap.1 &lt;span class="nv"&gt;bs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1M &lt;span class="nv"&gt;count&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1024
&lt;span class="c1"&gt;# or faster with fallocate&lt;/span&gt;
sudo fallocate -l 1G /var/swap.1
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo chmod &lt;span class="m"&gt;600&lt;/span&gt; /var/swap.1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åä¾æéåæªæ¡æ¹æ swap&amp;nbsp;æ ¼å¼ä¸¦åç¨å®ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo /sbin/mkswap /var/swap.1
sudo /sbin/swapon /var/swap.1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¿®æ¹ fstab è®æ¯æ¬¡éæ©é½æéå swap&amp;nbsp;è¨­å®ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# /etc/fstab
/var/swap.1 none swap defaults 0 0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¨ &lt;code&gt;free -h&lt;/code&gt;ã&lt;code&gt;cat /proc/meminfo&lt;/code&gt; æª¢æ¥æ­¤ææè©²æå &lt;span class="caps"&gt;1GB&lt;/span&gt; swap&amp;nbsp;äºã&lt;/p&gt;
&lt;h4 id="git-repo-ssh-config"&gt;Git repo ssh&amp;nbsp;config&lt;/h4&gt;
&lt;p&gt;åä¾æ¯ code çåæ­¥èæ´æ°ãautobuild server åªè¦æ´æ° source codeï¼ä½ cpython-tw source éè¦å®æ commit æ°çç¿»è­¯ï¼å æ­¤ deploy server ææä¿®æ¹ git repo&amp;nbsp;çæ¬éã&lt;/p&gt;
&lt;p&gt;ä¸æè©²ä½¿ç¨èªå·±ç &lt;span class="caps"&gt;SSH&lt;/span&gt; keyï¼deploy server ä¸æè©²æå°å±¬ç deploy keyï¼å¶ä¸­ cpython-tw ç deploy key æå¯«å¥æ¬éï¼å³å¯ä»¥&amp;nbsp;commitï¼ã&lt;/p&gt;
&lt;p&gt;æ¥äºä¸ä¸ï¼è¦è®ä¸å git repo ä½¿ç¨ä¸åç &lt;span class="caps"&gt;SSH&lt;/span&gt; key ä¹ä¸è¤éãä»¥ééçä¾å­ï¼åä¿®æ¹ &lt;code&gt;~/.ssh/config&lt;/code&gt; å å¥å©åæ°ç hostï¼ä½¿ç¨ä¸åç &lt;span class="caps"&gt;SSH&lt;/span&gt;&amp;nbsp;keyï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Host github-pydoc_autobuild
  HostName github.com
  User git
  IdentityFile /home/pydoc/.ssh/id_rsa.pydoc_autobuild

Host github-cpython_tw
  HostName github.com
  User git
  IdentityFile /home/pydoc/.ssh/id_rsa.cpython_tw
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å»ºç«å°æç &lt;span class="caps"&gt;SSH&lt;/span&gt;&amp;nbsp;keypairï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ssh-keygen -t rsa -f ~/.ssh/id_rsa.pydoc_autobuild
ssh-keygen -t rsa -f ~/.ssh/id_rsa.cpython_tw
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æå©å repo ç &lt;span class="caps"&gt;URL&lt;/span&gt; host&amp;nbsp;ææï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git remote set-url origin git@github-pydoc_autobuild:python-doc-tw/pydoc_autobuild.git
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éæ¨£å©å repo æééçµ¦å®ç ssh key é£ç·ãGitHub æé¡¯ç¤ºæ¯å key æè¿ä½¿ç¨çæéï¼æª¢æ¥æéå°±è½ç¢ºèªè¨­å®æ­£ç¢ºèå¦ï¼èä¸æ¹ host&amp;nbsp;æ²è¨­å®å°æè©²ç´æ¥é£ä¸ä¸ï¼ã&lt;/p&gt;
&lt;h3 id="django-stack-nginx-uwsgi"&gt;Django Stack &amp;ndash; nginx +&amp;nbsp;uWSGI&lt;/h3&gt;
&lt;p&gt;å¨æ¬å°éç¼é½ç¨ &lt;code&gt;python manage.py runserver&lt;/code&gt; åå Djangoãä½ä¸ç·æå§å»ºç runserver å°±ç¡æ³åæéæåå¤ªå¤äººãå æ­¤éè¦å nginxãuWSGI&amp;nbsp;ç­å·¥å·ä¾åå©ã&lt;/p&gt;
&lt;p&gt;åç§ uWSGI &lt;a href="http://uwsgi-docs.readthedocs.org/en/latest/tutorials/Django_and_nginx.html"&gt;&lt;em&gt;Setting up Django and your web server with uWSGI and nginx&lt;/em&gt;&lt;/a&gt; ä¸æä»¥å &lt;span class="caps"&gt;TP&lt;/span&gt; å¯«ç ãçºç¨å¼äººå¯«ç Django Tutorialãç³»åæä¸­ &lt;a href="https://github.com/uranusjr/django-tutorial-for-programmers/blob/master/25-deploy-to-ubuntu-server.md"&gt;&lt;em&gt;Day 27 - Deploy to Ubuntu server&lt;/em&gt;&lt;/a&gt;&amp;nbsp;éæ¼é¨ç½²çæç« ã&lt;/p&gt;
&lt;p&gt;Autobuild server æç¹å¥çº production å¯«ä¸ä»½è¨­å®æªï¼åææåªè¦è¨­å®æ &lt;code&gt;settings.production&lt;/code&gt; å³å¯ãå¨ Django è¨­å®é¨ä»½ï¼å»ºè­°æææè·¯å¾é½è¨­æçµå°è·¯å¾ï¼åå«å·è¡æªï¼ãä¸ç¶å¾çºå¨è¨­å® systemd è¦èª¿æ´å¾å¤ç°å¢è®æ¸ï¼systemd ä¹ä¸æå¸¶å¥ä½¿ç¨èç &lt;span class="caps"&gt;PATH&lt;/span&gt;&amp;nbsp;è®æ¸ï¼ä¸ç¨çµå°è·¯å¾å¶å¯¦è »éº»ç©çä¹å®¹æé¯ã&lt;/p&gt;
&lt;h4 id="nginx"&gt;nginx&amp;nbsp;è¨­å®&lt;/h4&gt;
&lt;p&gt;nginx ææ¥å incoming &lt;span class="caps"&gt;HTTP&lt;/span&gt; requestï¼éè¦è· Django server è¯çµ¡æï¼å°±ææé£å° uWSGI éç &lt;span class="caps"&gt;UNIX&lt;/span&gt;&amp;nbsp;socketã&lt;/p&gt;
&lt;p&gt;æåååè¨­ uWSGI éæ®µæ²åé¡ï¼é¦åè¨­å® nginx æ¬èº«ãç±æ¼ static files å¨ nginx å°±ç´æ¥å°å°å°æçæªæ¡ï¼ä¸æç¶é uWSGI ï¼æä»¥è¨­å®å¥½ nginx ä¹å¾ pydoc&amp;nbsp;æä»¶æ¬èº«å°±ä¸ç·äºãç¨éåä¾æ¸¬è©¦è¨­å®çæ­£ç¢ºæ§ã&lt;/p&gt;
&lt;p&gt;å°æ¬ç¶²ç«èè¨ï¼/static å°å° Django staticfilesï¼/3/ã/3.5/ å°å° pydoc build &lt;span class="caps"&gt;HTML&lt;/span&gt; çè·¯å¾ï¼å¶é¤è·¯å¾åäº¤çµ¦ Django èçãå¶ä¸­ï¼/3.5/* çé£çµå°éæ°å°åå° /3/*&amp;nbsp;ä¸ã&lt;/p&gt;
&lt;p&gt;æ´çä¸è¿°çéæ±ï¼å¯«å nginx è¨­å®æªå¨ &lt;code&gt;/etc/nginx/sites-available/pydoc_autobuild.conf&lt;/code&gt;ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Upstream Django setting; the socket nginx connects to&lt;/span&gt;
&lt;span class="k"&gt;upstream&lt;/span&gt; &lt;span class="s"&gt;django&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kn"&gt;server&lt;/span&gt; &lt;span class="s"&gt;unix:///var/run/django/pydoc_autobuild.sock&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;server&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kn"&gt;listen&lt;/span&gt;      &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kn"&gt;listen&lt;/span&gt;      &lt;span class="mi"&gt;443&lt;/span&gt; &lt;span class="s"&gt;default&lt;/span&gt; &lt;span class="s"&gt;ssl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="kn"&gt;server_name&lt;/span&gt; &lt;span class="s"&gt;docs.python.org.tw&lt;/span&gt;
                &lt;span class="mi"&gt;52&lt;/span&gt;&lt;span class="s"&gt;.69.170.26&lt;/span&gt;
                &lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kn"&gt;charset&lt;/span&gt;     &lt;span class="s"&gt;utf-8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="kn"&gt;client_max_body_size&lt;/span&gt; &lt;span class="s"&gt;10M&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;# max upload size&lt;/span&gt;
    &lt;span class="kn"&gt;keepalive_timeout&lt;/span&gt; &lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="kn"&gt;location&lt;/span&gt; &lt;span class="s"&gt;/static&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="kn"&gt;alias&lt;/span&gt; &lt;span class="s"&gt;/path/to/code/pydoc_autobuild/assets&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="kn"&gt;location&lt;/span&gt; &lt;span class="s"&gt;/3&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="kn"&gt;alias&lt;/span&gt; &lt;span class="s"&gt;/path/to/code/cpython-tw/Doc/build/html&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="kn"&gt;location&lt;/span&gt; &lt;span class="p"&gt;~&lt;/span&gt; &lt;span class="sr"&gt;/3\.5/(.*)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="kn"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;302&lt;/span&gt; &lt;span class="s"&gt;/3/&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;# Finally, send all non-media requests to the Django server.&lt;/span&gt;
    &lt;span class="kn"&gt;location&lt;/span&gt; &lt;span class="s"&gt;/&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="kn"&gt;uwsgi_pass&lt;/span&gt;  &lt;span class="s"&gt;django&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="kn"&gt;include&lt;/span&gt;     &lt;span class="s"&gt;/etc/nginx/uwsgi_params&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åææªæ¡ soft link å° &lt;code&gt;/etc/nginx/sites-enabled/&lt;/code&gt;ï¼æ´æ° nginx&amp;nbsp;è¨­å®ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /etc/nginx/sites-available/
sudo ln -s pydoc_autobuild.conf ../sites-enabled/
sudo systemctl reload nginx
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¢ºå® pydoc ä¸ç·å°±å¯ä»¥å°å¿èç uWSGI&amp;nbsp;äºã&lt;/p&gt;
&lt;h4 id="uwsgi"&gt;uWSGI&amp;nbsp;è¨­å®&lt;/h4&gt;
&lt;p&gt;uWSGI å¨ &lt;span class="caps"&gt;VENV&lt;/span&gt; å¤ä¹è¦è£ï¼æè¦ºå¾éæ¯ç¨ pip æ¯è¼ç°¡å®ï¼éç¶éæ¨£å°±è¦èªå·±æ³¨æ uWSGI&amp;nbsp;ççæ¬æ´æ°äºï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo python3.5 -m pip install uwsgi
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ uWSGI è¨­å®å­æ &lt;code&gt;pydoc_autobuild_uwsgi.ini&lt;/code&gt; ä¸¦ä¸å¨æ¸¬è©¦æï¼é½ä½¿ç¨ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo uwsgi --ini pydoc_autobuild_uwsgi.ini
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ¨¡æ¬å¯¦éä¸çå·è¡æ¹å¼ï¼éæ¨£ä¹å¾æ¹ç¨ systemd&amp;nbsp;å·è¡æä¸æåä¸ä¸å æ¬éçåé¡ãè¨­å®æªçå§å®¹ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[uwsgi]&lt;/span&gt;
&lt;span class="na"&gt;chdir&lt;/span&gt;        &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;/path/to/code/pydoc_autobuild&lt;/span&gt;
&lt;span class="c1"&gt;# Django&amp;#39;s wsgi file&lt;/span&gt;
&lt;span class="na"&gt;module&lt;/span&gt;       &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;pydoc_autobuild.wsgi:application&lt;/span&gt;
&lt;span class="na"&gt;env&lt;/span&gt;          &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;DJANGO_SETTINGS_MODULE=pydoc_autobuild.settings.production&lt;/span&gt;
&lt;span class="c1"&gt;# the virtualenv (full path)&lt;/span&gt;
&lt;span class="na"&gt;home&lt;/span&gt;         &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;/path/to/VENV&lt;/span&gt;

&lt;span class="c1"&gt;# process-related settings&lt;/span&gt;
&lt;span class="c1"&gt;# master&lt;/span&gt;
&lt;span class="na"&gt;master&lt;/span&gt;       &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;true&lt;/span&gt;
&lt;span class="c1"&gt;# maximum number of worker processes&lt;/span&gt;
&lt;span class="na"&gt;processes&lt;/span&gt;    &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;4&lt;/span&gt;
&lt;span class="c1"&gt;# the socket (use the full path to be safe&lt;/span&gt;
&lt;span class="na"&gt;socket&lt;/span&gt;       &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;/var/run/django/pydoc_autobuild.sock&lt;/span&gt;
&lt;span class="c1"&gt;# ... with appropriate permissions - may be needed&lt;/span&gt;
&lt;span class="na"&gt;chmod-socket&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;664&lt;/span&gt;
&lt;span class="na"&gt;uid&lt;/span&gt;          &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;pydoc&lt;/span&gt;
&lt;span class="na"&gt;gid&lt;/span&gt;          &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;www-data&lt;/span&gt;
&lt;span class="c1"&gt;# clear environment on exit&lt;/span&gt;
&lt;span class="na"&gt;vacuum&lt;/span&gt;       &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ¬éä¸çè¨­å®å¯è½è¦è±é»æéèçä¸ä¸ï¼nginx ä½¿ç¨ www-data/www-data çèº«ä»½å·è¡ï¼socket è¦ç¢ºå® nginx è½è®å¯«ï¼ä½æç code æ¾å¨ pydoc ä½¿ç¨èè·¯å¾ä¸ï¼ç¨ www-data å¯è½æææ¬éçåé¡ãå»ºè­°æ uidãgid&amp;nbsp;é½è¨­å®å¥½ã&lt;/p&gt;
&lt;p&gt;éç¨ä¸­ï¼æ­é nginx çé¯èª¤è¨æ¯æ¯è¼å¥½&amp;nbsp;debugï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo less +F /var/log/nginx/error.log
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æåå¾ï¼åç¨ uWSGI ç Emperor modeï¼æè¨­å®æªä¸å°ä¸åè·¯å¾åºä¸ï¼è©²è·¯å¾ç¨±çº vassalsï¼ãuWSGI å¨ Emperor mode ææèªåæ vassals&amp;nbsp;è·¯å¾å§ææè¨­å®æªé½è®é²ä¾ä¸¦å·è¡ã&lt;/p&gt;
&lt;p&gt;éè£¡ vassals è·¯å¾ä½¿ç¨ &lt;code&gt;/etc/uwsgi/vassals/&lt;/code&gt;ãå çºæè¨­&amp;nbsp;uidãgidï¼è·çæåå°±ä¸ç¨åè¨­äºï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo uwsgi --emperor /etc/uwsgi/vassals
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éæ¨£æè©² Django ç¸éç view é½æ²åé¡äºãæ¥ä¸ä¾ï¼è¦æåå uWSGI&amp;nbsp;çæ­¥é©äº¤çµ¦ç³»çµ±ä¾ç®¡çã&lt;/p&gt;
&lt;h3 id="systemd-services"&gt;Systemd&amp;nbsp;services&lt;/h3&gt;
&lt;p&gt;Autobuild server åå«å©åé¨ä»½ï¼Django Server è Django-Q clusterãæä»¥å¯«æ systemd service&amp;nbsp;æææå©åæåã&lt;/p&gt;
&lt;p&gt;Debian system service æ¾å¨ &lt;code&gt;/etc/systemd/system/&lt;/code&gt; åºä¸ï¼å æ­¤å»ºç« &lt;code&gt;uwsgi.service&lt;/code&gt; å &lt;code&gt;qcluster.service&lt;/code&gt; åå¥ç®¡ç uWSGI Emperor mode å Django-Q&amp;nbsp;clusterã&lt;/p&gt;
&lt;p&gt;&lt;code&gt;uwsgi.service&lt;/code&gt; åè uWSGI å®ç¶² &lt;a href="http://uwsgi-docs.readthedocs.org/en/latest/Systemd.html"&gt;&lt;em&gt;Django and Systemd&lt;/em&gt;&lt;/a&gt;&amp;nbsp;ä¸æçè¨­å®ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;uWSGI Emperor&lt;/span&gt;
&lt;span class="na"&gt;After&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;syslog.target&lt;/span&gt;

&lt;span class="k"&gt;[Service]&lt;/span&gt;
&lt;span class="na"&gt;ExecStart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/usr/local/bin/uwsgi --emperor /etc/uwsgi/vassals&lt;/span&gt;
&lt;span class="na"&gt;RuntimeDirectory&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;uwsgi&lt;/span&gt;
&lt;span class="na"&gt;Restart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;always&lt;/span&gt;
&lt;span class="na"&gt;KillSignal&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;SIGQUIT&lt;/span&gt;
&lt;span class="na"&gt;Type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;notify&lt;/span&gt;
&lt;span class="na"&gt;StandardError&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;syslog&lt;/span&gt;
&lt;span class="na"&gt;NotifyAccess&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;all&lt;/span&gt;

&lt;span class="k"&gt;[Install]&lt;/span&gt;
&lt;span class="na"&gt;WantedBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;multi-user.target&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;qcluster.service&lt;/code&gt; ç®æ¯èªå·±ç¡¬å¯«æ¨¡æ¬ &lt;code&gt;python manage.py qcluster&lt;/code&gt; è¡çºãå æ­¤ç°å¢è®æ¸é½è¦è¨­å®å¥½ï¼ç¶ç¶ç¨çµå°è·¯å¾å°±æ²åé¡äºï¼æåªæ¯è¦ºå¾éæ¨£ build log å§çå·è¡æªè·¯å¾é½å¾é·æå¾é&amp;nbsp;xdï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;Django-Q Cluster for site pydoc_autobuild&lt;/span&gt;
&lt;span class="na"&gt;After&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;syslog.target&lt;/span&gt;
&lt;span class="na"&gt;Wants&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;uwsgi.service&lt;/span&gt;

&lt;span class="k"&gt;[Service]&lt;/span&gt;
&lt;span class="na"&gt;User&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;pydoc&lt;/span&gt;
&lt;span class="na"&gt;Group&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;www-data&lt;/span&gt;
&lt;span class="na"&gt;Environment&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;VIRTUAL_ENV=/path/to/VENV&lt;/span&gt;
&lt;span class="na"&gt;Environment&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;PATH=/path/to/VENV/bin:$PATH&lt;/span&gt;
&lt;span class="na"&gt;Environment&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;DJANGO_SETTINGS_MODULE=pydoc_autobuild.settings.production&lt;/span&gt;
&lt;span class="na"&gt;WorkingDirectory&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/path/to/code/pydoc_autobuild&lt;/span&gt;
&lt;span class="na"&gt;ExecStart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/path/to/VENV/bin/python manage.py qcluster&lt;/span&gt;
&lt;span class="na"&gt;Restart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;always&lt;/span&gt;
&lt;span class="na"&gt;KillSignal&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;SIGQUIT&lt;/span&gt;
&lt;span class="na"&gt;Type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;simple&lt;/span&gt;
&lt;span class="na"&gt;NotifyAccess&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;none&lt;/span&gt;
&lt;span class="na"&gt;StandardError&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;syslog&lt;/span&gt;

&lt;span class="k"&gt;[Install]&lt;/span&gt;
&lt;span class="na"&gt;WantedBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;multi-user.target&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éæ¨£çè¨­å®æªæè©²ä¸æ¯ systemd çæ£ä¾ï¼æéå¨æ³æ¯ä¸æ¯æè©²è¦æ¹å¯«å° user service&amp;nbsp;å»ï¼ä½æä¸æï¼ã&lt;/p&gt;
&lt;p&gt;å å¥å° systemd ä¹å¾ç®¡çå°±å¾ç°¡å®ï¼ååéå©å&amp;nbsp;serviceï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo systemctl enable uwsgi
sudo systemctl enable qcluster
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ¥çä»åççæï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo systemctl status uwsgi
sudo systemctl status qcluster
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ¥çå®åç log ä¹è®å¾å¾ç°¡å®ï¼å çºææå®åç stderr æèµ·ä¾ãsystemd å¥½èæ¯ rotation ç­ç­é½æå¹«ä½ æ³¨æï¼ç log&amp;nbsp;çåè½ä¹å¾å¤ã&lt;/p&gt;
&lt;p&gt;ä¾å¦è¦æ¥æè¿ä¸å°æ uWSGI çé£ç·è¨éï¼ä¸¦å¨ææ°é£ç·ææçºæ´æ°&amp;nbsp;logï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo journalctl -xef -u uwsgi --since &amp;#39;1 hour ago&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="_4"&gt;ç¸½çµ&lt;/h2&gt;
&lt;p&gt;ä»ç´¹äº &lt;a href="https://github.com/python-doc-tw/python-doc-tw"&gt;Python èªªææä»¶ç¿»è­¯è¨ç«&lt;/a&gt;ï¼ç·ä¸æä»¶autobuild server åºæ¼ Django è Django-Q çæ¶æ§ï¼ä»¥åå¨ Debian ä¸çµå nginxãuWSGIãsystemd&amp;nbsp;çé¨ç½²è¨­å®ã&lt;/p&gt;
&lt;p&gt;æ¥è³ææè¦ºå¾æç« éä¸å¤ï¼åªæå¹¾ç¯å &lt;a href="https://luxagraf.net/src/how-set-django-uwsgi-systemd-debian-8"&gt;&lt;em&gt;How to Set Up Django with Nginx, uWSGI &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; systemd on Debian/Ubuntu&lt;/em&gt;&lt;/a&gt; çæç« ï¼å©ä¸è¦èªå·±çµè£éæ¯è¦è±ä¸é»æéãåæä¹æé¨ç½² pydoc server&amp;nbsp;çè¨­å®é½è¨å¨éï¼å°ä¾è¦éå»ºä¹æ¯è¼ç°¡å®ã&lt;/p&gt;
&lt;p&gt;éæ¼èªªææä»¶ç¿»è­¯ï¼æè©²æåè±ç¯æç« å¥½å¥½å¯«æ´åè¨ç«æ¬èº«ã&lt;/p&gt;
&lt;p&gt;ï¼æ¯èªªå¦ææäººè½å¾é ­çå°å°¾çè©±ï¼çµ¦ååé¥å§ &amp;gt;&amp;nbsp;&amp;lt;ï¼&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn:zh-Hant"&gt;
&lt;p&gt;å«å¦æ¯ï¼èºç£ç¹é«ä¸­æç language code (or locale identifier) ç©¶ç«æ¯ zh_TWãzh-Hantãzh-Hant-&lt;span class="caps"&gt;TW&lt;/span&gt;ãzh-Hant_TWãzh_Hant éæ¯ zh_Hant_TWï¼éåé¡æ¬èº«å°±å¯ä»¥å¯«ä¸ç¯äºã&lt;br&gt;&lt;br&gt;æ¥åéè¦ç¯ &lt;a href="http://www.ietf.org/rfc/bcp/bcp47.txt"&gt;&lt;span class="caps"&gt;BCP&lt;/span&gt; 47&lt;/a&gt; çè©±ï¼åªæ &lt;a href="http://www.iana.org/assignments/lang-tags/zh-Hant"&gt;zh-Hant&lt;/a&gt; å &lt;a href="http://www.iana.org/assignments/lang-tags/zh-Hant-TW"&gt;zh-Hant-&lt;span class="caps"&gt;TW&lt;/span&gt;&lt;/a&gt;ï¼æ´å¤éæ¼æ¨æºçèªªæèå®ç¾©å¯ä»¥åè &lt;a href="https://www.w3.org/International/articles/bcp47/"&gt;&lt;em&gt;Understanding the New Language Tags&lt;/em&gt;, &lt;span class="caps"&gt;W3C&lt;/span&gt;&lt;/a&gt; ä¸æã&lt;br&gt;&lt;br&gt;ä¸éç¾çæ¯å¾å¥å¦çãåè &lt;span class="caps"&gt;OSX&lt;/span&gt; å®ç¾© &lt;a href="https://developer.apple.com/library/ios/documentation/MacOSX/Conceptual/BPInternational/LanguageandLocaleIDs/LanguageandLocaleIDs.html"&gt;&lt;em&gt;Language and Locale IDs&lt;/em&gt;&lt;/a&gt; çè©±æè©²æ¯ zh_TWãzh-Hant æ zh-Hant_TWãèå¨ Debain ä¸­ï¼æææ¯æ´ç locale å¯«å¨ &lt;code&gt;/usr/share/i18n/SUPPORTED&lt;/code&gt;ï¼è£¡é¢åªæ zh_TWï¼ä¸é Debian åªç¨ &lt;code&gt;language[_country][.charset]&lt;/code&gt; æä»¥ä¸ææå®ç¾©ä¸­çº script ç Hantï¼éç¶å¨ locale ä¸­ä½¿ç¨åºç·è &lt;a href="http://www.ietf.org/rfc/bcp/bcp47.txt"&gt;&lt;span class="caps"&gt;BCP&lt;/span&gt; 47&lt;/a&gt; çå®ç¾©ä¸åãSphinx éé &lt;a href="http://babel.pocoo.org/"&gt;Babel&lt;/a&gt; èç localeï¼ä½å®ä¸åè¨± locale ä¸­æ &lt;code&gt;-&lt;/code&gt;ï¼å æ­¤åªè½èæ® zh_Hant æ zh_Hant_TWãæ´æè¶£çæ¯ï¼locale æè©²æ¯ case-insensitive æä»¥å¤§å°å¯«æ¯ä¸éè¦ç &lt;span class="caps"&gt;XD&lt;/span&gt;&amp;#160;&lt;a class="footnote-backref" href="#fnref:zh-Hant" rev="footnote" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:pydoc-url"&gt;
&lt;p&gt;å¶å¯¦å¨ &lt;a href="https://docs.python.org/"&gt;https://docs.python.org/&lt;/a&gt; ä¸é¢ &lt;a href="https://docs.python.org/3/"&gt;/3/&lt;/a&gt; å &lt;a href="https://docs.python.org/3.5/"&gt;/3.5/&lt;/a&gt; æ¯ä¸åä»½æä»¶ï¼å³ä½¿æ¯ååçæ¬èå®åæ´æ°çæéä¸ç¸åãè »æå¤ææ¯éæ¨£çææ³ãä¸éæåä¸ç¨æééº¼è¤éï¼åªè¦è½åå°±å¥½ã&amp;#160;&lt;a class="footnote-backref" href="#fnref:pydoc-url" rev="footnote" title="Jump back to footnote 2 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:build-link"&gt;
&lt;p&gt;éç¼æä¸ç´é½æ¯ç¨ &lt;span class="caps"&gt;GET&lt;/span&gt;ï¼å³å¦æä¸­æèªªï¼æåå°å±¬ç linkãä½ç¼ç¾ææ robot / crawler æéäºè·¯å¾ï¼å æ­¤æå¾æ¹æ &lt;span class="caps"&gt;POST&lt;/span&gt;ï¼æ &lt;code&gt;{{pagename}}&lt;/code&gt; ç¨ data-* å³ &lt;code&gt;&amp;lt;a href="#" data-pagename="{{ pagename }}"&amp;gt;...&amp;lt;/a&amp;gt;&lt;/code&gt; çæ¹å¼å­èµ·ä¾ï¼å¨ç¨ jQuery ç¶å® click listenerã&amp;#160;&lt;a class="footnote-backref" href="#fnref:build-link" rev="footnote" title="Jump back to footnote 3 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:python3"&gt;
&lt;p&gt;ç &lt;a href="https://github.com/coleifer/huey"&gt;huey&lt;/a&gt; å &lt;a href="https://github.com/PolicyStat/jobtastic"&gt;jobtastic&lt;/a&gt; master branch ä¸æ py3k ç commit ä½æè¦ºæ¯æè¿çäºï¼æå¾è§å¯ã&amp;#160;&lt;a class="footnote-backref" href="#fnref:python3" rev="footnote" title="Jump back to footnote 4 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:ec2-nano"&gt;
&lt;p&gt;ååä¸ä¸ï¼t2.nano vCPU ççæå¿«ææ¢ï¼ææ build doc å¹¾åéå°±æå®äºï¼ææè¦å¹¾ååéï¼æä¸å¤©è¶æ¢ï¼ç¶å¾åè¢« web crawler æå°ï¼è® task queue timeout é·å¥äº timeoutãrestartãtimeout çç¡éå°çâ¦â¦&amp;#160;&lt;a class="footnote-backref" href="#fnref:ec2-nano" rev="footnote" title="Jump back to footnote 5 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</summary><category term="zh"></category><category term="pydoctw"></category><category term="python"></category><category term="django"></category><category term="postgresql"></category><category term="deploy"></category><category term="debian"></category><category term="systemd"></category><category term="nginx"></category><category term="uwsgi"></category></entry><entry><title>å®è£ PostgreSQL 9 æ¼ Debian Jessie / OSX</title><link href="//blog.liang2.tw/posts/2016/01/postgresql-install/" rel="alternate"></link><updated>2016-01-25T17:00:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2016-01-25:posts/2016/01/postgresql-install/</id><summary type="html">&lt;p&gt;å¹³å¸¸ç¨æå¤çæ¯ &lt;a href="https://www.sqlite.org/"&gt;SQLite&lt;/a&gt;ï¼ä½ &lt;a href="http://www.postgresql.org/"&gt;PostgreSQL&lt;/a&gt;&amp;nbsp;æå¾å¤å¥½ç¨çåè½ï¼æ¯æ¬¡è¦ç¨æ³ä¸èµ·ä¾æéº¼è£ãç¸½ä¹æç¸éè¨­å®çç­è¨å­å¨éã&lt;/p&gt;
&lt;p&gt;ç¨ &lt;a href="https://www.debian.org/releases/stable/"&gt;Debian Jessie&lt;/a&gt; (Debian 8.3) è &lt;span class="caps"&gt;OSX&lt;/span&gt; &lt;a href="http://brew.sh/"&gt;Homebrew&lt;/a&gt; èä¾ãä¸é &lt;span class="caps"&gt;OSX&lt;/span&gt; å¤§æ¦ä¹ä¸ææ²äºæ PostgreSQL éèï¼ä¸»è¦æ¯èéå¨ Debian çç°å¢è¨­å®ä¸ãç®å PostgreSQL åºå° 9.5 ä½ Debian stable æ¯&amp;nbsp;9.4ãåºæ¬è¨­å®æè©²å®å¨æ²å·®å¥ã&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#postgresql"&gt;å®è£ PostgreSQL&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#osx"&gt;å®è£å¨ &lt;span class="caps"&gt;OSX&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#debian-jessie"&gt;å®è£å¨ Debian&amp;nbsp;Jessie&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#database"&gt;åå§åäººç Database&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#postgresql_1"&gt;å»ºç«åä½¿ç¨èåç¨±ç PostgreSQL&amp;nbsp;å¸³è&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#database_1"&gt;å»ºç«èå¸³èååç¨±ç&amp;nbsp;database&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#psql"&gt;ç¨ä½¿ç¨èå¸³èé£æ¥&amp;nbsp;psql&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#psql_1"&gt;psql&amp;nbsp;æä»¤&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#database_2"&gt;åªé¤ä½¿ç¨èãDatabase&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_1"&gt;é²éä¸»é¡&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#psql_2"&gt;éé psql&amp;nbsp;åµå»ºä½¿ç¨èå¸³èãè³æåº«&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#postgresql-logging"&gt;PostgreSQL Logging&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#logging-postgresql"&gt;Logging è® PostgreSQL&amp;nbsp;èªå·±ç®¡&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#logging-systemd"&gt;Logging éé&amp;nbsp;Systemd&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#reference"&gt;Reference&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="postgresql"&gt;å®è£&amp;nbsp;PostgreSQL&lt;/h2&gt;
&lt;h3 id="osx"&gt;å®è£å¨ &lt;span class="caps"&gt;OSX&lt;/span&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="go"&gt;brew install postgresql&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¦ç¨çæåæåæ PostgreSQL server&amp;nbsp;æéï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="go"&gt;postgres -D /usr/local/var/postgres&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;PostgreSQL çè¨­å®åè Debian&amp;nbsp;ççæ¬ã&lt;/p&gt;
&lt;h3 id="debian-jessie"&gt;å®è£å¨ Debian&amp;nbsp;Jessie&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo apt-get install postgresql-9.4
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¾å¨ç³»çµ±æåé½ç± &lt;a href="http://freedesktop.org/wiki/Software/systemd/"&gt;Systemd&lt;/a&gt; ç®¡çäºï¼æª¢æ¥ PostgreSQL ææ²æè·èµ·ä¾éé &lt;code&gt;systemctl&lt;/code&gt; éæä»¤å°±å¯ä»¥ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;#&lt;/span&gt; systemctl status postgresql.service
&lt;span class="go"&gt;â postgresql.service - PostgreSQL RDBMS&lt;/span&gt;
&lt;span class="go"&gt;   Loaded: loaded (/lib/systemd/system/postgresql.service; enabled)&lt;/span&gt;
&lt;span class="go"&gt;   Active: inactive (dead) since Mon 2016-01-25 17:26:08 CST; 4s ago&lt;/span&gt;
&lt;span class="go"&gt;  Process: 913 ExecStart=/bin/true (code=exited, status=0/SUCCESS)&lt;/span&gt;
&lt;span class="go"&gt; Main PID: 913 (code=exited, status=0/SUCCESS)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¸éé service çä¸å¤ªå°ä»éº¼éè¡çè³è¨ï¼å¶å¯¦æ¯å dummy serviceï¼å®æ trigger å¯è½å¾å¤å PostgreSQL database cluster ä»éº¼çãé è¨­åªæä¸å &lt;code&gt;main&lt;/code&gt; ç&amp;nbsp;clusterã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;#&lt;/span&gt; systemctl status postgresql@9.4-main.service
&lt;span class="go"&gt;â postgresql@9.4-main.service - PostgreSQL Cluster 9.4-main&lt;/span&gt;
&lt;span class="go"&gt;   Loaded: loaded (/lib/systemd/system/postgresql@.service; disabled)&lt;/span&gt;
&lt;span class="go"&gt;   Active: active (running) since Mon 2016-01-25 17:26:30 CST; 4min 7s ago&lt;/span&gt;
&lt;span class="go"&gt;  Process: 9641 ExecStop=/usr/bin/pg_ctlcluster -m fast %i stop (code=exited, status=0/SUCCESS)&lt;/span&gt;
&lt;span class="go"&gt;  Process: 9717 ExecStart=postgresql@%i %i start (code=exited, status=0/SUCCESS)&lt;/span&gt;
&lt;span class="go"&gt; Main PID: 9723 (postgres)&lt;/span&gt;
&lt;span class="go"&gt;   CGroup: /system.slice/system-postgresql.slice/postgresql@9.4-main.service&lt;/span&gt;
&lt;span class="go"&gt;           ââ9723 /usr/lib/postgresql/9.4/bin/postgres -D /var/lib/postgresql/9.4/main -c config_file=/etc/postgr...&lt;/span&gt;
&lt;span class="go"&gt;           ââ9725 postgres: checkpointer process&lt;/span&gt;
&lt;span class="go"&gt;           ââ9726 postgres: writer process&lt;/span&gt;
&lt;span class="go"&gt;           ââ9727 postgres: wal writer process&lt;/span&gt;
&lt;span class="go"&gt;           ââ9728 postgres: autovacuum launcher process&lt;/span&gt;
&lt;span class="go"&gt;           ââ9729 postgres: stats collector process&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="database"&gt;åå§åäººç&amp;nbsp;Database&lt;/h2&gt;
&lt;p&gt;å¨ &lt;span class="caps"&gt;OSX&lt;/span&gt; ä¸ç¨ homebrew å®è£ PostgreSQL çä½¿ç¨èææ superuser çæ¬éï¼åæ­£æ¯æ¬å°éç¼ä¹æ²å·®ï¼å»º database&amp;nbsp;ç­è¨­å®é½æ¯è¼ç°¡å®ã&lt;/p&gt;
&lt;p&gt;å¨ Debian ä¸çè©±ï¼æé superuser æ¬éçä½¿ç¨èçº &lt;code&gt;postgres&lt;/code&gt;ãæä»¥é è¨­ä½¿ç¨èï¼ééä»¥ &lt;code&gt;vm&lt;/code&gt; çºä¾ï¼æç¡æ³é£ç·ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; psql
&lt;span class="go"&gt;psql: FATAL:  role &amp;quot;vm&amp;quot; does not exist&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åå° root ååå° postgres èº«ä»½å°±è½ç¨ &lt;code&gt;psql&lt;/code&gt; ï¼PostgreSQL ç &lt;span class="caps"&gt;REPL&lt;/span&gt; shellï¼é£å° databaseãç¨ &lt;code&gt;\q&lt;/code&gt; å°±å¯ä»¥éåº&amp;nbsp;psqlã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo -u postgres psql
&lt;span class="go"&gt;[sudo] password for vm:&lt;/span&gt;
&lt;span class="go"&gt;psql (9.4.5)&lt;/span&gt;
&lt;span class="go"&gt;Type &amp;quot;help&amp;quot; for help.&lt;/span&gt;

&lt;span class="go"&gt;postgres=# \q&lt;/span&gt;
&lt;span class="gp"&gt;$&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½ç¨ postgres é superuser&amp;nbsp;å»é£è³æåº«ä¸æ¯å¾å®å¨ï¼ä¸éå§é¤æå¥½ç¿æ£æè©²ç¨åäººå¸³èãæä»¥æ¥ä¸ä¾è¦å®æï¼&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å»ºç«åä½¿ç¨èåç¨±ç PostgreSQL&amp;nbsp;å¸³è&lt;/li&gt;
&lt;li&gt;å»ºç«èå¸³èååç¨±ç&amp;nbsp;database&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="postgresql_1"&gt;å»ºç«åä½¿ç¨èåç¨±ç PostgreSQL&amp;nbsp;å¸³è&lt;/h3&gt;
&lt;p&gt;å¨ Debian ä¸å¯ä»¥ç¨ &lt;code&gt;$USER&lt;/code&gt; ä¾æå°ç¾å¨ç»å¥èçå¸³èï¼å³ä½¿ç¨ sudo åæèº«ä»½éç°å¢è®æ¸çå¼ä¸æè®ãï¼è® &lt;a href="https://help.ubuntu.com/community/PostgreSQL"&gt;Ubuntu wiki&lt;/a&gt;&amp;nbsp;çå°çæå·§ï¼&lt;/p&gt;
&lt;p&gt;æå¿çè©±å°±ç´æ¥å¨æ &lt;code&gt;$USER&lt;/code&gt; çå°æ¹æåºå¸³èå³å¯ãåç¢ºèªä¸ä¸ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;vm@vm-debian:~$ echo $&lt;/span&gt;USER
&lt;span class="go"&gt;vm&lt;/span&gt;
&lt;span class="gp"&gt;vm@vm-debian:~$&lt;/span&gt; sudo -u postgres &lt;span class="nb"&gt;echo&lt;/span&gt; $USER
&lt;span class="go"&gt;vm&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å»ºç«ä½¿ç¨èæ¯éé &lt;code&gt;createuser&lt;/code&gt; éæä»¤ãéæ¯ä½¿ç¨èå¸³èå°±ä¸çµ¦å¤ªå¤æ¬éã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo -u postgres createuser --interactive $USER
&lt;span class="go"&gt;Shall the new role be a superuser? (y/n) n&lt;/span&gt;
&lt;span class="go"&gt;Shall the new role be allowed to create databases? (y/n) n&lt;/span&gt;
&lt;span class="go"&gt;Shall the new role be allowed to create more new roles? (y/n) n&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éæåéé &lt;code&gt;psql&lt;/code&gt; çå°±æå¤ä¸åä½¿ç¨èã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;-- Run with command `sudo -u postgres psql`&lt;/span&gt;
&lt;span class="gp"&gt;postgres=#&lt;/span&gt; &lt;span class="kp"&gt;\du&lt;/span&gt;
                             &lt;span class="n"&gt;List&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="n"&gt;roles&lt;/span&gt;
 &lt;span class="k"&gt;Role&lt;/span&gt; &lt;span class="k"&gt;name&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                   &lt;span class="n"&gt;Attributes&lt;/span&gt;                   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Member&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt;
&lt;span class="c1"&gt;-----------+------------------------------------------------+-----------&lt;/span&gt;
 &lt;span class="n"&gt;postgres&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Superuser&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;Create&lt;/span&gt; &lt;span class="k"&gt;role&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;Create&lt;/span&gt; &lt;span class="n"&gt;DB&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Replication&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
 &lt;span class="n"&gt;vm&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt;                                                &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="database_1"&gt;å»ºç«èå¸³èååç¨±ç&amp;nbsp;database&lt;/h3&gt;
&lt;p&gt;éé &lt;code&gt;createdb&lt;/code&gt; éæä»¤ãæèå¸³èåå database ç owner&amp;nbsp;è¨­å®æè©²å¸³èã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo -u postgres createdb --owner&lt;span class="o"&gt;=&lt;/span&gt;$USER $USER
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¦å¤å»ºå¥ç database çµ¦éå¸³èä¹æ²åé¡ï¼ä¾å¦åçº &lt;code&gt;vm_database&lt;/code&gt; ç&amp;nbsp;databaseï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo -u postgres createdb --owner&lt;span class="o"&gt;=&lt;/span&gt;$USER vm_database
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="psql"&gt;ç¨ä½¿ç¨èå¸³èé£æ¥&amp;nbsp;psql&lt;/h3&gt;
&lt;p&gt;éæåæ &lt;code&gt;psql&lt;/code&gt; å°±æ²åé¡äºã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; psql
&lt;span class="go"&gt;psql (9.4.5)&lt;/span&gt;
&lt;span class="go"&gt;Type &amp;quot;help&amp;quot; for help.&lt;/span&gt;

&lt;span class="go"&gt;vm=&amp;gt; \conninfo&lt;/span&gt;
&lt;span class="go"&gt;You are connected to database &amp;quot;vm&amp;quot; as user &amp;quot;vm&amp;quot; via socket in &amp;quot;/var/run/postgresql&amp;quot; at port &amp;quot;5432&amp;quot;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Prompt å¾ &lt;code&gt;#=&lt;/code&gt; è®æ &lt;code&gt;=&amp;gt;&lt;/code&gt; è¡¨ç¤ºç¾å¨é£ç·çä½¿ç¨èä¸æ¯ superuserãéé psql çæä»¤ &lt;code&gt;\l&lt;/code&gt; æ &lt;code&gt;\l+&lt;/code&gt; å¯ä»¥çç¾å¨ææç&amp;nbsp;databaseï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;vm=&amp;gt;&lt;/span&gt; &lt;span class="kp"&gt;\l&lt;/span&gt;
&lt;span class="go"&gt;                                   List of databases&lt;/span&gt;
&lt;span class="go"&gt;    Name     |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges&lt;/span&gt;
&lt;span class="go"&gt;-------------+----------+----------+-------------+-------------+-----------------------&lt;/span&gt;
&lt;span class="go"&gt; postgres    | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 |&lt;/span&gt;
&lt;span class="go"&gt; template0   | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +&lt;/span&gt;
&lt;span class="go"&gt;             |          |          |             |             | postgres=CTc/postgres&lt;/span&gt;
&lt;span class="go"&gt; template1   | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +&lt;/span&gt;
&lt;span class="go"&gt;             |          |          |             |             | postgres=CTc/postgres&lt;/span&gt;
&lt;span class="go"&gt; vm          | vm       | UTF8     | en_US.UTF-8 | en_US.UTF-8 |&lt;/span&gt;
&lt;span class="go"&gt; vm_database | vm       | UTF8     | en_US.UTF-8 | en_US.UTF-8 |&lt;/span&gt;
&lt;span class="go"&gt;(5 rows)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é£å¦ä¸å database &lt;code&gt;vm_database&lt;/code&gt; ä¹å¾ç°¡å®ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; psql -d vm_database
&lt;span class="go"&gt;psql (9.4.5)&lt;/span&gt;
&lt;span class="go"&gt;Type &amp;quot;help&amp;quot; for help.&lt;/span&gt;

&lt;span class="go"&gt;vm_database=&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="psql_1"&gt;psql&amp;nbsp;æä»¤&lt;/h2&gt;
&lt;p&gt;psql çæä»¤å¾å¤ï¼ç¨ &lt;code&gt;\?&lt;/code&gt; å¯ä»¥çå°åè¡¨ãå®æ´ççæ¬å¯ä»¥è¦&lt;a href="http://www.postgresql.org/docs/9.4/static/app-psql.html#APP-PSQL-META-COMMANDS"&gt;å®ç¶² psql meta-commands&lt;/a&gt;&amp;nbsp;çä»ç´¹ãåºä¸åå¹¾åå¸¸ç¨çï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;\l          # list all database
\d          # list tables in current database
\du         # list roles
\conninfo   # show current SQL connection
\q          # quit
help        # print a hub message for all kinds of help
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="database_2"&gt;åªé¤ä½¿ç¨èãDatabase&lt;/h2&gt;
&lt;p&gt;åæä¸åæä»¤å°æã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; dropuser &amp;lt;usr&amp;gt;
&lt;span class="gp"&gt;$&lt;/span&gt; dropdb &amp;lt;db&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="_1"&gt;é²éä¸»é¡&lt;/h2&gt;
&lt;h3 id="psql_2"&gt;éé psql&amp;nbsp;åµå»ºä½¿ç¨èå¸³èãè³æåº«&lt;/h3&gt;
&lt;p&gt;Ref: &lt;a href="http://www.cyberciti.biz/faq/howto-add-postgresql-user-account/"&gt;http://www.cyberciti.biz/faq/howto-add-postgresql-user-account/&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;-- Run with command `sudo -u postgres psql -d template1`&lt;/span&gt;
&lt;span class="gp"&gt;template1=#&lt;/span&gt; &lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;USER&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;WITH&lt;/span&gt; &lt;span class="k"&gt;PASSWORD&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;lt;pwd&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="gp"&gt;template1=#&lt;/span&gt; &lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;DATABASE&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="gp"&gt;template1=#&lt;/span&gt; &lt;span class="k"&gt;GRANT&lt;/span&gt; &lt;span class="k"&gt;ALL&lt;/span&gt; &lt;span class="k"&gt;PRIVILEGES&lt;/span&gt; &lt;span class="k"&gt;ON&lt;/span&gt; &lt;span class="k"&gt;DATABASE&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;TO&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="postgresql-logging"&gt;PostgreSQL&amp;nbsp;Logging&lt;/h3&gt;
&lt;p&gt;è¨­å®å¨ &lt;code&gt;/etc/postgresql/9.4/main/postgresql.conf&lt;/code&gt; è£¡ãä¸åç®¡ç log çæ¹å¼å°±è¦é¸æä¸åç &lt;code&gt;log_destination&lt;/code&gt;ã&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;PostgreSQL èªå·±ç®¡ï¼&lt;code&gt;stderr&lt;/code&gt;,&amp;nbsp;&amp;hellip;&lt;/li&gt;
&lt;li&gt;éé &lt;a href="http://freedesktop.org/wiki/Software/systemd/"&gt;Systemd&lt;/a&gt;ï¼&lt;code&gt;syslog&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸éææ²æ·±å¥ç ç©¶å°±æ¯ï¼çé£å conf è£¡å¾å¤è¨­å®å¯ä»¥èª¿æ´ãè¨­å®ä¿®æ¹å¾è¦ restart PostgreSQL&amp;nbsp;clusterï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo systemctl restart postgresql.service
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="logging-postgresql"&gt;Logging è® PostgreSQL&amp;nbsp;èªå·±ç®¡&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# At /etc/postgresql/9.4/main/postgresql.conf&lt;/span&gt;
&lt;span class="na"&gt;log_destination&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;stderr&amp;#39; &lt;/span&gt;
&lt;span class="na"&gt;logging_collector&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;on                              &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Log files é è¨­å¯«å¨ &lt;code&gt;/var/lib/postgresql/9.4/main/pg_log/&lt;/code&gt;ã&lt;/p&gt;
&lt;h4 id="logging-systemd"&gt;Logging éé&amp;nbsp;Systemd&lt;/h4&gt;
&lt;p&gt;æè¦ºå¾ systemd çåªé»ä¹ä¸å°±æ¯è½æ log é½éä¸­ç®¡çï¼åªè¦ç§å®çè¦åï¼å°±è½ç¨ä¸æ¨£çæ¹æ³ç®¡ç logging&amp;nbsp;æ¯è »æ¹ä¾¿çã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# At /etc/postgresql/9.4/main/postgresql.conf&lt;/span&gt;
&lt;span class="na"&gt;log_destination&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;syslog&amp;#39;  &lt;/span&gt;
&lt;span class="na"&gt;logging_collector&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;off   # on ä¹åªæèªªè¢«å°åå° syslog äº                             &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éæåéåæåï¼åç &lt;code&gt;systemctl status&lt;/code&gt; å°±è½çå°æè¿ç log&amp;nbsp;äºã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;#&lt;/span&gt; systemctl status postgresql@9.4-main
&lt;span class="go"&gt;â postgresql@9.4-main.service - PostgreSQL Cluster 9.4-main&lt;/span&gt;
&lt;span class="go"&gt;   Loaded: loaded (/lib/systemd/system/postgresql@.service; disabled)&lt;/span&gt;
&lt;span class="go"&gt;   Active: active (running) since Mon 2016-01-25 17:52:02 CST; 1min 13s ago&lt;/span&gt;
&lt;span class="go"&gt;  Process: 14632 ExecStop=/usr/bin/pg_ctlcluster -m fast %i stop (code=exited, status=0/SUCCESS)&lt;/span&gt;
&lt;span class="go"&gt;  Process: 14641 ExecStart=postgresql@%i %i start (code=exited, status=0/SUCCESS)&lt;/span&gt;
&lt;span class="go"&gt; Main PID: 14648 (postgres)&lt;/span&gt;
&lt;span class="go"&gt;   CGroup: /system.slice/system-postgresql.slice/postgresql@9.4-main.service&lt;/span&gt;
&lt;span class="go"&gt;           ââ14648 /usr/lib/postgresql/9.4/bin/postgres -D /var/lib/postgresql/9.4/main -c config_file=/etc/postg...&lt;/span&gt;
&lt;span class="go"&gt;           ââ14650 postgres: checkpointer process&lt;/span&gt;
&lt;span class="go"&gt;           ââ14651 postgres: writer process&lt;/span&gt;
&lt;span class="go"&gt;           ââ14652 postgres: wal writer process&lt;/span&gt;
&lt;span class="go"&gt;           ââ14653 postgres: autovacuum launcher process&lt;/span&gt;
&lt;span class="go"&gt;           ââ14654 postgres: stats collector process&lt;/span&gt;

&lt;span class="go"&gt;Jan 25 17:52:00 vm-debian postgres[14648]: [1-1] 2016-01-25 17:52:00 CST [14648-1] LOG:  ending log output to stderr&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:52:00 vm-debian postgres[14648]: [1-2] 2016-01-25 17:52:00 CST [14648-2] HINT:  Future log output ...log&amp;quot;.&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:52:00 vm-debian postgres[14649]: [2-1] 2016-01-25 17:52:00 CST [14649-1] LOG:  database system was...9 CST&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:52:00 vm-debian postgres[14649]: [3-1] 2016-01-25 17:52:00 CST [14649-2] LOG:  MultiXact member wr...abled&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:52:00 vm-debian postgres[14648]: [2-1] 2016-01-25 17:52:00 CST [14648-3] LOG:  database system is ...tions&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:52:00 vm-debian postgres[14653]: [2-1] 2016-01-25 17:52:00 CST [14653-1] LOG:  autovacuum launcher started&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:52:00 vm-debian postgres[14658]: [3-1] 2016-01-25 17:52:00 CST [14658-1] [unknown]@[unknown] LOG: ...acket&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:52:38 vm-debian postgres[14793]: [3-1] 2016-01-25 17:52:38 CST [14793-1] root@root FATAL:  role &amp;quot;r...exist&lt;/span&gt;
&lt;span class="go"&gt;Hint: Some lines were ellipsized, use -l to show in full.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æç¨ systemd æ¨æºç log çæ¹å¼ &lt;code&gt;journalctl&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;#&lt;/span&gt; journalctl -u postgresql@9.4-main 
&lt;span class="go"&gt;-- Logs begin at Mon 2016-01-25 16:46:25 CST, end at Mon 2016-01-25 19:22:07 CST. --&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:47:06 vm-debian postgres[13699]: [1-1] 2016-01-25 17:47:06 CST [13699-1] LOG:  redirecting log output to logging collector process&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:47:06 vm-debian postgres[13699]: [1-2] 2016-01-25 17:47:06 CST [13699-2] HINT:  Future log output will appear in directory &amp;quot;pg_log&amp;quot;.&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:47:06 vm-debian postgres[13699]: [2-1] 2016-01-25 17:47:06 CST [13699-3] LOG:  ending log output to stderr&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:47:06 vm-debian postgres[13699]: [2-2] 2016-01-25 17:47:06 CST [13699-4] HINT:  Future log output will go to log destination &amp;quot;syslog&amp;quot;.&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:47:06 vm-debian postgres[13701]: [3-1] 2016-01-25 17:47:06 CST [13701-1] LOG:  database system was shut down at 2016-01-25 17:47:05 CST&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:47:06 vm-debian postgres[13701]: [4-1] 2016-01-25 17:47:06 CST [13701-2] LOG:  MultiXact member wraparound protections are now enabled&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:47:06 vm-debian postgres[13699]: [3-1] 2016-01-25 17:47:06 CST [13699-5] LOG:  database system is ready to accept connections&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:47:06 vm-debian postgres[13705]: [3-1] 2016-01-25 17:47:06 CST [13705-1] LOG:  autovacuum launcher started&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:47:07 vm-debian postgres[13710]: [4-1] 2016-01-25 17:47:07 CST [13710-1] [unknown]@[unknown] LOG:  incomplete startup packet&lt;/span&gt;
&lt;span class="go"&gt;Jan 25 17:49:30 vm-debian postgres[14170]: [4-1] 2016-01-25 17:49:30 CST [14170-1] root@root FATAL:  role &amp;quot;root&amp;quot; does not exist&lt;/span&gt;
&lt;span class="go"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="reference"&gt;Reference&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-postgresql-9-4-on-debian-8"&gt;How to Install and Use PostgreSQL 9.4 on Debian 8&lt;/a&gt; by Digital&amp;nbsp;Ocean&lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/PostgreSQL"&gt;PostgreSQL&lt;/a&gt; on Arch&amp;nbsp;Wiki&lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.debian.org/PostgreSql"&gt;PostgreSQL&lt;/a&gt; on Debian&amp;nbsp;wiki&lt;/li&gt;
&lt;li&gt;&lt;a href="https://help.ubuntu.com/community/PostgreSQL"&gt;PostgreSQL&lt;/a&gt; on Ubuntu&amp;nbsp;wiki&lt;/li&gt;
&lt;/ul&gt;</summary><category term="zh"></category><category term="postgresql"></category><category term="debian"></category><category term="osx"></category></entry><entry><title>Coding åå­¸æåéé - Bioinfo Practices usingÂ Python</title><link href="//blog.liang2.tw/posts/2016/01/lab-coding-appendix-bioinfo-python/" rel="alternate"></link><updated>2016-01-21T23:30:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2016-01-21:posts/2016/01/lab-coding-appendix-bioinfo-python/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;I want to play a&amp;nbsp;game.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;We are going to walk through a series of practice created by &lt;a href="http://rosalind.info/problems/"&gt;Rosalind Team&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt;Once you register an account at Rosalind, you can use their judging system to work through all problems. However, in this case you cannot arbitrarily skip easy levels and it sucks. So I&amp;rsquo;m not going to force you using the system. Luckily, in each problem one set of example data and expected output is given, which can be used for checking our&amp;nbsp;answer.&lt;/p&gt;
&lt;p&gt;Note: Their code assumes Python 2 but everything I mention here is Python&amp;nbsp;3.&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#python-basics"&gt;Python&amp;nbsp;Basics&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#bininfo-first-try"&gt;Bininfo First Try&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#q-dna-counting-dna-nucleotides"&gt;Q &lt;span class="caps"&gt;DNA&lt;/span&gt;: Counting &lt;span class="caps"&gt;DNA&lt;/span&gt;&amp;nbsp;Nucleotides&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#q-revc-the-secondary-and-tertiary-structures-of-dna"&gt;Q &lt;span class="caps"&gt;REVC&lt;/span&gt;: The Secondary and Tertiary Structures of &lt;span class="caps"&gt;DNA&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#q-gc-computing-gc-content"&gt;Q: &lt;span class="caps"&gt;GC&lt;/span&gt;: Computing &lt;span class="caps"&gt;GC&lt;/span&gt; Content&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#workthrough"&gt;Workthrough&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#q-next"&gt;Q:&amp;nbsp;(next?)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="python-basics"&gt;Python&amp;nbsp;Basics&lt;/h2&gt;
&lt;p&gt;Do their &lt;a href="http://rosalind.info/problems/list-view/?location=python-village"&gt;Python Village&lt;/a&gt; problem sets. If any topic you don&amp;rsquo;t know, go read your Python&amp;nbsp;reference.&lt;/p&gt;
&lt;p&gt;Should be very&amp;nbsp;trivial.&lt;/p&gt;
&lt;h2 id="bininfo-first-try"&gt;Bininfo First&amp;nbsp;Try&lt;/h2&gt;
&lt;h3 id="q-dna-counting-dna-nucleotides"&gt;Q &lt;span class="caps"&gt;DNA&lt;/span&gt;: Counting &lt;span class="caps"&gt;DNA&lt;/span&gt;&amp;nbsp;Nucleotides&lt;/h3&gt;
&lt;p&gt;Link: &lt;a href="http://rosalind.info/problems/dna/"&gt;http://rosalind.info/problems/dna/&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hint: use &lt;a href="https://docs.python.org/3/library/collections.html#collections.Counter"&gt;collections.Counter&lt;/a&gt; provided by Python&amp;rsquo;s&amp;nbsp;stdlib&lt;/li&gt;
&lt;li&gt;More Hint: use &lt;code&gt;' '.join&lt;/code&gt; and list comprehension to output the&amp;nbsp;answer&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="q-revc-the-secondary-and-tertiary-structures-of-dna"&gt;Q &lt;span class="caps"&gt;REVC&lt;/span&gt;: The Secondary and Tertiary Structures of &lt;span class="caps"&gt;DNA&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;Link: &lt;a href="http://rosalind.info/problems/revc/"&gt;http://rosalind.info/problems/revc/&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hint: &lt;a href="https://docs.python.org/3/library/functions.html#reversed"&gt;reversed&lt;/a&gt; for any sequence object and a dict for nucleotide code&amp;nbsp;mapping &lt;/li&gt;
&lt;li&gt;More Hint: done in a list&amp;nbsp;comprehension&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="q-gc-computing-gc-content"&gt;Q: &lt;span class="caps"&gt;GC&lt;/span&gt;: Computing &lt;span class="caps"&gt;GC&lt;/span&gt;&amp;nbsp;Content&lt;/h3&gt;
&lt;p&gt;Link: &lt;a href="http://rosalind.info/problems/gc/"&gt;http://rosalind.info/problems/gc/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This is the first complicated problem that some abstraction should help you come up the solution. Try write some re-usable code blocks, for example, function calls and class&amp;nbsp;definitions.&lt;/p&gt;
&lt;p&gt;Don&amp;rsquo;t worry about the computation&amp;nbsp;complexity&lt;/p&gt;
&lt;h4 id="workthrough"&gt;Workthrough&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;You should implement by yourself before looking my solution. Also I didn&amp;rsquo;t see their official solution so my solution can differ a lot from&amp;nbsp;theirs.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Intuitively, we need to implement a &lt;span class="caps"&gt;FASTA&lt;/span&gt; file parser. &lt;span class="caps"&gt;FASTA&lt;/span&gt; contains a series of sequence reads with unique &lt;span class="caps"&gt;ID&lt;/span&gt;. From a object-oriented viewpoint, we create classes &lt;code&gt;Read&lt;/code&gt; for reads and &lt;code&gt;Fasta&lt;/code&gt; for fasta&amp;nbsp;files.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Read&lt;/code&gt; is easy to design and&amp;nbsp;understand,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Read&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;id&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;seq&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;seq&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Since we need to compute their &lt;span class="caps"&gt;GC&lt;/span&gt; content, add a method for &lt;code&gt;Read&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Read&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="c1"&gt;# ... skipped&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;gc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Compute the GC content (in %) of the read.&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="c1"&gt;# put the logic here (think of problem Q DNA)&lt;/span&gt;
        &lt;span class="n"&gt;gc_percent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;gc_percent&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then we have to implement the &lt;span class="caps"&gt;FASTA&lt;/span&gt; parser, which reads all read entries and converts them through &lt;code&gt;Read&lt;/code&gt;. In real world we are dealing with &lt;code&gt;myfasta.fa&lt;/code&gt;-like files, but here the input is&amp;nbsp;string.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Fasta&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;raw_str&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Parse a FASTA formated string.&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;raw_str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;raw_str&lt;/span&gt;
        &lt;span class="c1"&gt;# convert string into structured reads.&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reads&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Parse the string and yield read in Read class.&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="c1"&gt;# though we have no idea right now, the code structure&lt;/span&gt;
        &lt;span class="c1"&gt;# should be something like the following.&lt;/span&gt;
        &lt;span class="n"&gt;raw_lines&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;raw_str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;splitlines&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;raw_lines&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;yield&lt;/span&gt; &lt;span class="n"&gt;Read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here I use &lt;code&gt;yield Read(...)&lt;/code&gt;, which may be unfamiliar for Python beginners. It turns &lt;code&gt;parse(self)&lt;/code&gt; function as a generator. Generator makes you focus on the incoming data. Once data is parsed and converted, the result is immediated thrown out by &lt;code&gt;yield&lt;/code&gt;. We don&amp;rsquo;t care about how to collect all the results. In our case, we catch all the results into a list by &lt;code&gt;list(...)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;So how should we read &lt;span class="caps"&gt;FASTA&lt;/span&gt; file? A simple rule in this case is that every read consists by two continuous row. Also, the first row will always be the first read&amp;nbsp;id.&lt;/p&gt;
&lt;p&gt;All we need is read two lines at the same time. Here &lt;a href="https://docs.python.org/3/library/functions.html#zip"&gt;a Pythonic idiom&lt;/a&gt; is introduced. The following code read two non-overlapping&amp;nbsp;lines,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;first_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;second_line&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;iter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;raw_lines&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;yield&lt;/span&gt; &lt;span class="n"&gt;Read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;first_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;second_line&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;By &lt;code&gt;zip(*[iter(s)]*n)&lt;/code&gt; magic, we are very close to implement a full parser. You could find a lot of &lt;a href="http://stackoverflow.com/a/2233247"&gt;explanations&lt;/a&gt; for this&amp;nbsp;magic. &lt;/p&gt;
&lt;p&gt;Read id line percedes with a &lt;code&gt;&amp;gt;&lt;/code&gt; sign, so we could use something like &lt;code&gt;first_line[1:]&lt;/code&gt; or &lt;code&gt;first_line[len('&amp;gt;'):]&lt;/code&gt; for&amp;nbsp;explicity.&lt;/p&gt;
&lt;p&gt;Then sorting the &lt;span class="caps"&gt;GC&lt;/span&gt;% of reads in a &lt;span class="caps"&gt;FASTA&lt;/span&gt; file is&amp;nbsp;easy.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;fasta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Fasta&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;...&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;sorted_reads&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sorted&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fasta&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reads&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gc&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;  &lt;span class="c1"&gt;# note 1&lt;/span&gt;
&lt;span class="n"&gt;top_gc_read&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sorted_reads&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;  &lt;span class="c1"&gt;# note 2&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;&amp;gt;{0:s}&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;{1:.6f}&amp;#39;&lt;/span&gt;  &lt;span class="c1"&gt;# note 3, 4&lt;/span&gt;
    &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;top_gc_read&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;top_gc_read&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gc&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The code above completes the following&amp;nbsp;steps:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;sorted(list, key=key_func)&lt;/code&gt; sorts the list based on the return value of key_func applied to each&amp;nbsp;element.&lt;/li&gt;
&lt;li&gt;or &lt;code&gt;top_gc_read = sorted(..., reversed=True)[0]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;two string with no operands in between will be joint automatically. In this case it is exactly &lt;code&gt;&amp;gt;{0:s}\n{1:.6f}&lt;/code&gt;. This is useful to tidy a super long&amp;nbsp;string.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;'...'.format()&lt;/code&gt; fills the string with given values. See &lt;a href="https://docs.python.org/3/library/string.html#formatspec"&gt;doc&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;In real case &lt;span class="caps"&gt;FASTA&lt;/span&gt; can span across multiple lines, also likely the file we parse is broken. How could we modify this parser to handle these&amp;nbsp;situations?&lt;/p&gt;
&lt;h3 id="q-next"&gt;Q:&amp;nbsp;(next?)&lt;/h3&gt;
&lt;p&gt;I&amp;rsquo;m super tired now so I&amp;rsquo;ll leave the rest for you. Try those problems within yellow correct ratio&amp;nbsp;range.&lt;/p&gt;</summary><category term="en"></category><category term="labcoding"></category><category term="python"></category></entry><entry><title>Coding åå­¸æåéé - OSXÂ éç¼ç°å¢</title><link href="//blog.liang2.tw/posts/2016/01/lab-coding-appendix-osx-env/" rel="alternate"></link><updated>2016-01-21T23:00:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2016-01-21:posts/2016/01/lab-coding-appendix-osx-env/</id><summary type="html">&lt;p&gt;ä»¥ä¸çè¨­å®é½è »ä¸»è§çï¼è¦äººè¦æºãç¸½ä¹æææçç°å¢åäº«åºä¾ã&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#terminal"&gt;Terminal&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#homebrew-git-and-python"&gt;Homebrew, Git and&amp;nbsp;Python&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#text-editors"&gt;Text&amp;nbsp;Editors&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#terminal-multiplexers"&gt;Terminal&amp;nbsp;Multiplexers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#git-gui"&gt;Git &lt;span class="caps"&gt;GUI&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#documentation-searcher"&gt;Documentation&amp;nbsp;Searcher&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#misc"&gt;Misc.&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="terminal"&gt;Terminal&lt;/h2&gt;
&lt;p&gt;&lt;span class="caps"&gt;OSX&lt;/span&gt; ç³»çµ±æå§å»ºä¸å &lt;code&gt;Terminals.app&lt;/code&gt; è½åå¨ Linux ä¸ä¸æ¨£ä½¿ç¨ãä»å¶å¯¦ä½¿ç¨ä¸æ²ä»éº¼åé¡ï¼ä¸éæ³è¦èª¿é¡è²ï¼ææ´å¤èªå®åè½çè©±ï¼è¨±å¤äººæå®è£ &lt;a href="http://iterm2.com/"&gt;iTerm2&lt;/a&gt;ã&lt;/p&gt;
&lt;h2 id="homebrew-git-and-python"&gt;Homebrew, Git and&amp;nbsp;Python&lt;/h2&gt;
&lt;p&gt;&lt;span class="caps"&gt;OSX&lt;/span&gt; ä¸å®æ¹æ²æä¸åç®¡çå¥ä»¶çå·¥å·ï¼æä»¥ç¤¾ç¾¤èªè¡éç¼äºä¸åå«å Homebrewãä½ å¯ä»¥æç§&lt;a href="http://djangogirlstaipei.herokuapp.com/tutorials/installation/"&gt;éç¯æå­¸&lt;/a&gt;å®è£&amp;nbsp;Homebrewã&lt;/p&gt;
&lt;p&gt;è£å¥½äºä¹å¾ä½ å¯ä»¥ä»¥ä¸æä»¤å»çå®è©²æéº¼æä½&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ brew --help
$ man brew    &lt;span class="c1"&gt;# for full documentation&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span class="caps"&gt;OSX&lt;/span&gt; éç¶å§å»ºæ git è pythonï¼ä½æåå¯ä»¥ç¨ homebrew&amp;nbsp;å®è£æ¯è¼æ¨æºï¼æ°ï¼ççæ¬ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ brew install git python3
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦æ homebrew æåé¡å¯ä»¥ç¨ &lt;code&gt;brew doctor&lt;/code&gt; ä¾æª¢æ¸¬ãæé¯èª¤è¨æ¯å google&amp;nbsp;éå¸¸å°±è½æ¾å°è§£æ±ºæ¹å¼ã&lt;/p&gt;
&lt;h2 id="text-editors"&gt;Text&amp;nbsp;Editors&lt;/h2&gt;
&lt;p&gt;ææå¸¸ç¨çæ¯ Vimã&lt;span class="caps"&gt;OSX&lt;/span&gt; æå§å»ºï¼ä½ä¹å¯ä»¥ç¨ homebrew&amp;nbsp;å®è£ã&lt;/p&gt;
&lt;p&gt;é¤äº console based ç Vimï¼&lt;span class="caps"&gt;OSX&lt;/span&gt; ä¸ä¹æå gVim ç MacVimãä¸æ¨£è½ç¨ homebrew&amp;nbsp;å®è£ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ brew info macvim  &lt;span class="c1"&gt;# ç MacVim å¨å®è£æä»éº¼é¸é å¯ä»¥èª¿æ´&lt;/span&gt;
$ brew install macvim --override-system-vim --custom-icons
$ brew linkapps macvim
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½¿ç¨ Macvim çæåé¤äº vim ä¹å¤ï¼ä¹å¯ä»¥å¼å« &lt;code&gt;mvim&lt;/code&gt; æé&amp;nbsp;MacVimã&lt;/p&gt;
&lt;h2 id="terminal-multiplexers"&gt;Terminal&amp;nbsp;Multiplexers&lt;/h2&gt;
&lt;p&gt;ä½ æå¯è½æè½é screen æè tmuxãåèå¨ osx ä¸æå§å»ºä½çæ¬å¾èï¼å¨é¡¯ç¤ºé¡è²ä¸ææåé¡ï¼å æ­¤å¯ä»¥éé homebrew åå®è£æ°çãä½å çº screen è·ç³»çµ±æä¾çéè¦å°äºï¼æä»¥é è¨­ä¸å¨ homebrew ç repo ä¸­ï¼è¦åæ°å¢ repo&amp;nbsp;æ¸å®ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;brew tap homebrew/dupes
brew install screen tmux
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="git-gui"&gt;Git &lt;span class="caps"&gt;GUI&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;åå­¸ Git å¯è½æä¸çé£äºæä»¤ãå¸¸å¸¸ä¸ç¥éèªå·±å¨ git log åªåä½ç½®ãéæåæååå½¢åçå·¥å·ææ´æ¹ä¾¿äºè§£ãGit æå§å»ºä¸å&amp;nbsp;gitkï¼ä½æ¯è¼é½æ¥ã&lt;/p&gt;
&lt;p&gt;å¨ &lt;span class="caps"&gt;OSX&lt;/span&gt; ä¸å¯ä»¥èæ®ç¨ &lt;a href="http://www.sourcetreeapp.com/"&gt;SourceTree&lt;/a&gt;ã&lt;/p&gt;
&lt;h2 id="documentation-searcher"&gt;Documentation&amp;nbsp;Searcher&lt;/h2&gt;
&lt;p&gt;è¦ä¸ç´æ¥ Python å®ç¶²ææåéè »éº»ç©çï¼æªä¾å­¸äº &lt;span class="caps"&gt;HTML&lt;/span&gt; &lt;span class="caps"&gt;CSS&lt;/span&gt; ç­ç­ä¸åèªè¨æåç¨® Python å¥ä»¶ï¼è¦æ¥åæ±è¥¿æå¾è²»æãæä»¥æäººéç¼äºä¸åé¢ç·ç documentation æ¥è©¢å¨å«å &lt;a href="http://kapeli.com/dash"&gt;Dash&lt;/a&gt;ãä»è¦é¢ä½æåè²»çï¼ä¼¼ä¹æ¯æä¸ç´è·³æç¤ºè¨æ¯ã&lt;/p&gt;
&lt;h2 id="misc"&gt;Misc.&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.alfredapp.com/"&gt;Alfred App&lt;/a&gt;ï¼ä¸åå»¶ä¼¸çç Spotlightï¼æ¥æç¨ç¨å¼å¾å¿«éï¼åæä¹å¯ä»¥è· Dash æ´åè®æ¥ doc&amp;nbsp;æ´æ¹ä¾¿ã&lt;/li&gt;
&lt;li&gt;&lt;a href="http://macdown.uranusjr.com/"&gt;Macdown&lt;/a&gt;ï¼&lt;span class="caps"&gt;OSX&lt;/span&gt; ä¸ç markdown&amp;nbsp;ç·¨è¼¯å¨ã&lt;/li&gt;
&lt;/ul&gt;</summary><category term="zh"></category><category term="labcoding"></category></entry><entry><title>CodingÂ åå­¸æåï¼Python</title><link href="//blog.liang2.tw/posts/2016/01/lab-coding-python/" rel="alternate"></link><updated>2016-01-21T22:50:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2016-01-21:posts/2016/01/lab-coding-python/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;Python&amp;nbsp;æ¯ä¸ç¨®ç©ä»¶å°åãç´è­¯å¼çé»è¦ç¨å¼èªè¨ï¼å·æè¿äºåå¹´çç¼å±æ­·å²ãå®åå«äºä¸çµåè½å®åçæ¨æºåº«ï¼è½å¤ è¼é¬å®æå¾å¤å¸¸è¦çä»»åã&lt;/p&gt;
&lt;p&gt;(From &lt;a href="https://zh.wikipedia.org/wiki/Python"&gt;Wikipedia&lt;/a&gt;)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é¸æ Python ä½çºç¬¬ä¸åæ·±å¥å­¸ç¿çèªè¨æå¾å¤å¥½èãä»çèªæ³è·è±æç¸ä¼¼ï¼æ¯èµ·å¶ä»èªè¨ç¶å¸¸ç¨å° &lt;code&gt;;{}()&lt;/code&gt; ä¾æ§å¶èªæ³ä¸åçæ®µè½ï¼Python&amp;nbsp;ä¸»è¦ç¨çæ¯ç©ºç½èç¸®æã&lt;/p&gt;
&lt;p&gt;Python è½ç¨äºåå¼çæ¹å¼ï¼readâevalâprint loop, &lt;span class="caps"&gt;REPL&lt;/span&gt;ï¼ä¾æä½ï¼ä»¥éè©¦éåçæ¹æ³ä¾éç¼å¾é©ååå­¸èã&lt;/p&gt;
&lt;p&gt;å§å»ºçæ¨æºåº«ï¼standard libraryï¼åè½å¾è±å¯ï¼å¨ç¶²è·¯ãæå­èçãæªæ¡èçãçè³ &lt;span class="caps"&gt;GUI&lt;/span&gt; ä»é¢é½è½ç¨å®å®æãé¤æ­¤ä¹å¤ï¼å®çç¬¬ä¸æ¹å¥ä»¶ä¹å¾å¤ï¼å¨ Linux ä¸å¾å¥½å®è£ï¼éæ¨£å¹¾ä¹è½ç¨ Python&amp;nbsp;å®æåç¨®äºæã&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#_1"&gt;è½èªªç³»å&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#python"&gt;è½èªª Python&amp;nbsp;è·å¾æ¢ï¼æ¯ä¸æ¯ä¸è½ç¨ä¾è¨ç®/åæ/å¤§æªæ¡ï¼&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#python-2-python-3"&gt;Python 2 éæ¯ Python&amp;nbsp;3ï¼è½ææåèªªâ¦æ¯è¼å¥½ï¼&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_2"&gt;ç¸éè³æº&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#introducing-python-python"&gt;Introducing Pythonï¼ç²¾é&amp;nbsp;Pythonï¼&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#python_1"&gt;Python&amp;nbsp;ç¨å¼è¨­è¨å¥é&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#python-3-2ed"&gt;ç²¾é Python 3 ç¨å¼è¨­è¨&amp;nbsp;2ed&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#python_2"&gt;Python&amp;nbsp;å®ç¶²&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#learning-python-5ed"&gt;Learning Python&amp;nbsp;5ed&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#python-cookbook-3edpython-3ed"&gt;Python Cookbook 3edï¼Python çé¦åå¦è¨&amp;nbsp;3edï¼&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#python_3"&gt;æ·±å¥æ·ºåº&amp;nbsp;Python&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#moocs"&gt;MOOCs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_3"&gt;å­¸ç¿ç®æ¨&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="_1"&gt;è½èªªç³»å&lt;/h2&gt;
&lt;p&gt;ï¼éè¦æ¥è§¸é Python&amp;nbsp;ä¹å¾æè½çè§£ï¼&lt;/p&gt;
&lt;h3 id="python"&gt;è½èªª Python&amp;nbsp;è·å¾æ¢ï¼æ¯ä¸æ¯ä¸è½ç¨ä¾è¨ç®/åæ/å¤§æªæ¡ï¼&lt;/h3&gt;
&lt;p&gt;Python çç¢ºå·è¡æçæ¯ç·¨è­¯å¼çèªè¨å·®ï¼ä¾ï¼C/C++ãJavaï¼ï¼ä½éå¾å¯è½ä¸æ¯ä½ ç¨å¼è·å¾æ¢çä¸»å ï¼æä»¥ä¹ä¸ä»£è¡¨ Python&amp;nbsp;ä¸è½èçè¨ç®éé«çå·¥ä½ã&lt;/p&gt;
&lt;p&gt;ç¢°å°ç¨å¼è·å¾æ¯æ³åä¸­æ¢çæåï¼æå¹¾åæ­¥é©ï¼&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å°åºæ¯åªå¹¾è¡ç¨å¼è·å¾æ¢ï¼&lt;/li&gt;
&lt;li&gt;éæ¯æä½³çæ¼ç®æ³åï¼&lt;/li&gt;
&lt;li&gt;éæ¯æææçç Python&amp;nbsp;èªæ³åï¼&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¦æç¨å°äºæå¾ä¸æ­¥ææ³éæ¯æ²ææ¹åçè©±ï¼å°±å¯ä»¥éå§æé£äºé¨ä»½ç¨å¶ä»èªè¨æ¹å¯«ï¼ä¾å¦ï¼CãPython è½å¾å®¹æè· C èªè¨ççµåãèä¸å¸¸è¦ç C èªè¨å éï¼å¶å¯¦é½æ Python å¥ä»¶è½æ¯æ´äºï¼ä¾å¦ Numpyï¼æä»¥å¤§é¨ä»½çæéï¼é½è½å¨ä¸ä½¿ç¨ Python&amp;nbsp;ä»¥å¤çèªè¨å®æé«éè¨ç®ã&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æå¨å¯¦ç¿æåï¼ä¹å¸¸ç¢°å°éè¦åªåçåé¡ãç¨ Python æè½å¾è¼é¬ï¼ä¸å¤©å§ï¼æå·¥ä½åéå° 4 å°ä¸»æ© 64 cores ä¸è·ï¼ä¹è¨±æ¹æ³ä¸ææçï¼ä½æ¯èµ·æè±å¹¾å¤©æ Python æ¹å¯«æ C/C++ï¼å¯¦ä½æ´ç²¾å¯ææçç®æ³ï¼éè¦æ¯ multithreadï¼ï¼ä»ç´°èçå¯è½ç corner caseï¼å¹³è¡åä¹å¾æ¬ä¾ä¸åå¤©çè¨ç®æéæ 2&amp;nbsp;åå°æå°±è½æ¶å·¥ã&lt;/p&gt;
&lt;p&gt;æ´éè¦çæ¯ï¼éåå¯¦é©å°±åªè·åå©æ¬¡ã&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ¯èµ·è¨ç®æéï¼éç¼æéå°å·¥ç¨å¸«èè¨æ¯æ´å å¯¶è²´çãå°¤å¶å¨å¯¦é©å®¤ï¼æéå¿çæ¯éåæ¹æ³è¡ä¸è¡å¾éï¼ç¨å¼è·å¾æ¢æå¾å¤è§£æ±ºçæ¹å¼ï¼ä¾å¦å¹³è¡åãéé»å¨è§£æ±ºåé¡ï¼éè¦ç¨å¤ä¸é»çè³æºå¶å¯¦ä¸æ¯å¾éè¦ã&lt;/p&gt;
&lt;p&gt;å¦æåæ Python éæ¯ Matlab æ¯è¼å¿«ï¼ééææ­£ç¶ç &lt;a href="http://www.pyzo.org/python_vs_matlab.html"&gt;Python vs Matlab&lt;/a&gt;ãä¸éå§é¸ Python æ¢çè©±æ&lt;a href="http://wiki.scipy.org/PerformancePython"&gt;å¾å¤æ¢è·¯å¯ä»¥èµ°&lt;/a&gt;ï¼ä½ Matlab å¢ï¼&amp;nbsp;meh&lt;/p&gt;
&lt;p&gt;æä»¥ Python è·å¾å¿«ä¸å¿«ï¼å®å®æç¨é¬¥ææ¥µéï¼ä½å®æå¾å¤å¿«æ¨å¤¥ä¼´ãO&amp;rsquo;Reilly ææ¬ &lt;a href="http://shop.oreilly.com/product/0636920028963.do"&gt;High Performance Python&lt;/a&gt;&amp;nbsp;å¼å¾ä¸çã&lt;/p&gt;
&lt;h3 id="python-2-python-3"&gt;Python 2 éæ¯ Python&amp;nbsp;3ï¼è½ææåèªªâ¦æ¯è¼å¥½ï¼&lt;/h3&gt;
&lt;p&gt;é¨èæéæµéï¼æ¯éä¸å¤©æé½å¯ä»¥æ´ç¢ºä¿¡çèªª&lt;strong&gt;ãè«å­¸ Python 3ã&lt;/strong&gt;ãç¾å¨æå¨ç¨ Python 2 å¤åä¹æ¯ç¨ 2.7 çæ¬ï¼è¦æ 3.3+ çç¨å¼ç¢¼æ¹å 2.7&amp;nbsp;ä¹ä¸é£ã&lt;/p&gt;
&lt;h2 id="_2"&gt;ç¸éè³æº&lt;/h2&gt;
&lt;p&gt;é£ååå¹¾ç« ï¼å¦æä½ è¦å¨èªå·±é»è¦ä¸è¨­å® Python éç¼ç°å¢ï¼å¯ä»¥åè &lt;a href="http://djangogirlstaipei.herokuapp.com/tutorials/"&gt;Djang Girls Taipei Tutorial&lt;/a&gt;ãå¦å¤ï¼&lt;a href="http://wiki.python.org.tw/Python/%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%94%A8%E5%B0%B1%E4%B8%8A%E6%89%8B"&gt;Python Taiwan Wiki&lt;/a&gt; ææ´å®æ´ç Python&amp;nbsp;å­¸ç¿è³æºåè¡¨ã&lt;/p&gt;
&lt;h3 id="introducing-python-python"&gt;Introducing Pythonï¼ç²¾é&amp;nbsp;Pythonï¼&lt;/h3&gt;
&lt;p&gt;O&amp;rsquo;Reilly Python ç³»åçæ¸é½å¯«å¾å¾å¥½ãéæ¬æ¯æ¯è¼æ°åºçï¼å¥½èæ¯å®éå°åå­¸èï¼èä¸æ¯è¼èè½å¨ç­æéçå®ãå»ºè­°é±è® Chp1 å° Chp7 ï¼ä»¥å Chp8 File Input/Output&amp;nbsp;é¨ä»½ã&lt;/p&gt;
&lt;p&gt;å¯ä»¥å¨ O&amp;rsquo;Reilly çç·ä¸ååºè²·é»å­çæ¿å° &lt;span class="caps"&gt;PDF&lt;/span&gt; è Kindle&amp;nbsp;çæ¬ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://shop.oreilly.com/product/0636920028659.do"&gt;è±ææ¸&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.tenlong.com.tw/items/9863477311?item_id=1007464"&gt;ä¸­æå¯¦é«æ¸&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="python_1"&gt;Python&amp;nbsp;ç¨å¼è¨­è¨å¥é&lt;/h3&gt;
&lt;p&gt;2015 åæç±&lt;a href="http://yehnan.blogspot.tw/2015/03/python_30.html"&gt;èé£&lt;/a&gt;åºçä¸­ææ¸ï¼éå°åå­¸èï¼ä¸¦æååº Python 2.7ã3.3ã3.4&amp;nbsp;ä¸åçæ¬éçå·®ç°ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.tenlong.com.tw/items/9864340050"&gt;ä¸­æå¯¦é«æ¸&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="python-3-2ed"&gt;ç²¾é Python 3 ç¨å¼è¨­è¨&amp;nbsp;2ed&lt;/h3&gt;
&lt;p&gt;å¦ä¸æ¬ Python&amp;nbsp;ä¸­æå¥éæ¸ï¼æ¯æ·±å¥æ·ºåºé£ä¸é»ä½æ¯è¼åå¸¸è¦çæç§æ¸ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.tenlong.com.tw/items/9862760702"&gt;ä¸­æå¯¦é«æ¸&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="python_2"&gt;Python&amp;nbsp;å®ç¶²&lt;/h3&gt;
&lt;p&gt;Python çå®ç¶²ä¸æ¹é¢æ¯ç¨ä¾æ¥èªè¨ç¹æ§ä¹å¤ï¼éè½ç¨ä¾å­¸ç¿æéº¼ä½¿ç¨ stdlibãé¤å¤éæä¸åç°¡æ½ç&amp;nbsp;Tutorialï¼å¯ä»¥ä¾åå­¸èåèï¼é©åæå­¸éå¶ä»èªè¨çäººã&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Keep this under your&amp;nbsp;pillow.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://docs.python.org/3/"&gt;é£çµ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.pythondoc.com/"&gt;ç°¡ä¸­ç¿»è­¯&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ç¹ä¸­ç¿»è­¯&lt;a href="https://github.com/python-doc-tw/python-doc-tw"&gt;è«æ­ç®ä»¥å¾&lt;/a&gt;&amp;nbsp;:)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="learning-python-5ed"&gt;Learning Python&amp;nbsp;5ed&lt;/h3&gt;
&lt;p&gt;éç¶åç¨±çèµ·ä¾å¾åæ¯ Python çå¥éæ¸ï¼ä½å®çç¯å¹å·²ç¶ä¾å° 1200 é ï¼å¯¦å¨ç¡æ³æ¨è¦çµ¦åå­¸èãä½å®æ Python èªè¨ç¹æ§èªªçå¾æ¸æ¥ï¼åæèæ®å° Python 2 å 3&amp;nbsp;çæ¬ã&lt;/p&gt;
&lt;p&gt;æç¶åççæ¯éä¸æ¬ 3ed ä¸­æçï¼ç¾å·²çµçï¼ï¼é£æéæ²æèæ® Python&amp;nbsp;3ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://shop.oreilly.com/product/0636920028154.do"&gt;è±ææ¸&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="python-cookbook-3edpython-3ed"&gt;Python Cookbook 3edï¼Python çé¦åå¦è¨&amp;nbsp;3edï¼&lt;/h3&gt;
&lt;p&gt;éæ¬ä¸æ¯å¥éæ¸ä½å¾é©åæ·±å¥äºè§£ Pythonï¼ä¸¦è®èªå·±çç¨å¼ç¢¼å¯«å¾æ´ &lt;strong&gt;Pythonic&lt;/strong&gt;ãè£¡é¢ä»ç´¹äºå¾å¤å¯«æ³æ£ä¾ idiomsï¼åæä¹æä¸­æçãéå¸¸å¼å¾å¨æªä¾æ¯è¼æ Python&amp;nbsp;æè²·ä¾çã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://shop.oreilly.com/product/0636920027072.do"&gt;è±ææ¸&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.tenlong.com.tw/items/9863470686"&gt;ä¸­æå¯¦é«æ¸&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="python_3"&gt;æ·±å¥æ·ºåº&amp;nbsp;Python&lt;/h3&gt;
&lt;p&gt;O&amp;rsquo;Reilly Head First&amp;nbsp;ç³»åé½æ¯çµ¦åå­¸èçæ¸ï¼éæ¬æä¸­æç¿»è­¯æ¬ï¼å§å®¹åæä¸¦èæ´»æ½ãä¸éä¸æ¯æ¯åäººé½åæ­¡éç¨®å»å»ååçä»ç´¹æ¹å¼ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.tenlong.com.tw/items/9862763485"&gt;ä¸­æå¯¦é«æ¸&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="moocs"&gt;MOOCs&lt;/h3&gt;
&lt;p&gt;å¾å¤äººé½æè©¦éçç·ä¸èª²ç¨ï¼å¯è½æä¸­æå­å¹ãç¼ºé»æçæ¯ Python 2.7ãèä¸æè©¦äºå¹¾å çç¶é©ï¼ä¸¦ä¸æ¯ææ idiomatic Pythonï¼ä¹å°±æ¯è£¡é¢æçå¯«æ³ä¸ä¸å®æ¯ Python&amp;nbsp;ä½¿ç¨èå¹³å¸¸ä½¿ç¨ä¸¦æ¨è¦çèªæ³ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Codecademy Python Track &lt;a href="http://www.codecademy.com/en/tracks/python"&gt;http://www.codecademy.com/en/tracks/python&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Coursera: An Introduction to Interactive Programming in Python &lt;a href="https://www.coursera.org/course/interactivepython"&gt;https://www.coursera.org/course/interactivepython&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_3"&gt;å­¸ç¿ç®æ¨&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;æéèªå·± Linux è£¡ç Python3ï¼è·èå­¸ç¿ç¨çåèè³æåææä½ãç¨ &lt;span class="caps"&gt;REPL&lt;/span&gt; ä»¥åéè¡è³æ¬å©ç¨®æ¹æ³ä¾å·è¡ Python&amp;nbsp;ç¨å¼ã&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å­¸ç¿ä½¿ç¨ pip å pyvenv (virtualenv) ä¾ç®¡ç Python&amp;nbsp;å¥ä»¶èç°å¢ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hint: Python å®ç¶²æ¯ä½ çå¥½å¤¥ä¼´ãä½ å¯ä»¥å¨&lt;a href="https://docs.python.org/3/installing/"&gt;éè£¡&lt;/a&gt;å&lt;a href="https://docs.python.org/3/using/scripts.html#scripts-pyvenv"&gt;éè£¡&lt;/a&gt;æ¾å°å©èçæå­¸ã&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://rg3.github.io/youtube-dl/"&gt;youtube-dl&lt;/a&gt; æ¯ä¸åç¨ä¾ä¸è¼ YoutubeãCrunchyroll ç­åå¤§å½±é³ä¸²æµç¶²ç«å½±ççå·¥å·ãé¤äºç¨ Linux çå¥ä»¶ç®¡çå·¥å·å®è£å®ï¼å®å¶å¯¦æ¯åç¨ Python å¯«æçå¥ä»¶ãçºäºé¿åè· Linux ç³»çµ±ç°å¢ç¸è¡ï¼è«éä¸å Python èæ¬ç°å¢ï¼ä¸¦å¨è£¡é¢ç¨ pip&amp;nbsp;å®è£å®ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Note: youtube-dl é¤äºå®ç´åä¸è¼ä¸²æµæªä¹å¤ï¼éæ¯æ´è½æªãå°è£ãå¾è£½ç­å½±åèçï¼ééè¦ libav æ ffmpeg ä»»ä¸å½±åèçå¥ä»¶ãå¨ Debian ç³»åç Linux ä¸ libav&amp;nbsp;æå¥½è£ä¸é»ã&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¨ Python è§£æ±ºä¸äºå¯¦é©å®¤æç¢°å°ç Bioinfo åé¡ãæåç¶²ç« Rosalind åºäºä¸ç³»åçé¡ç®ï¼æé¸äºä¸äºè®åä½ç·´ç¿ï¼è«åè&lt;a href="#file-a1_python_bioinfo-md"&gt;éé 1&lt;/a&gt;ã&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</summary><category term="zh"></category><category term="labcoding"></category><category term="python"></category></entry><entry><title>CodingÂ åå­¸æåï¼çæ¬æ§å¶</title><link href="//blog.liang2.tw/posts/2016/01/lab-coding-version-control/" rel="alternate"></link><updated>2016-01-21T22:40:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2016-01-21:posts/2016/01/lab-coding-version-control/</id><summary type="html">&lt;p&gt;æè¬ççæ¬æ§å¶å°±è·ç©éæ²ä¸æ¨£å¯ä»¥å­åãé²åº¦é»ãï¼ç ´éåé½æä¿å­é²åº¦ï¼éæ¨£ç ´éå¤±æçæåå¯ä»¥éæå°ä¿å­é²åº¦ççæï¼åéæ°ææªãçæ¬æ§å¶ç¨å¨ç®¡çç¨å¼ç¢¼æï¼å°±æ¹ä¾¿è®èªå·±å¨æ code&amp;nbsp;æç¸æçæåï¼éè½åå°ååæä¿å­ççæã&lt;/p&gt;
&lt;blockquote&gt;
&lt;h3 id="_1"&gt;çºä»éº¼ä½¿ç¨çæ¬æ§å¶ï¼&lt;/h3&gt;
&lt;p&gt;å¨è»é«éç¼çéç¨ä¸­ï¼ç¨å¼ç¢¼æ¯å¤©ä¸æ·å°ç¢åºï¼éç¨ä¸­æç¼çä»¥ä¸ææ³ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æªæ¡è¢«å¥äººæèªå·±è¦èï¼çè³éºå¤±&lt;/li&gt;
&lt;li&gt;æ³å¾©ååå¹¾å¤©å¯«ççæ¬&lt;/li&gt;
&lt;li&gt;æ³ç¥éè·æ¨å¤©å¯«çå·®å¨åªè£¡ï¼&lt;/li&gt;
&lt;li&gt;æ¯èª°æ¹äºéæ®µç¨å¼ç¢¼ï¼çºä»éº¼&amp;nbsp;ï¼&lt;/li&gt;
&lt;li&gt;è»é«ç¼è¡ï¼éè¦åæç¶­è­·çè·éç¼ç&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å æ­¤ï¼æåå¸ææä¸ç¨®æ©å¶ï¼è½å¤ å¹«å©æåï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥é¨æå¾©åä¿®æ¹ï¼åå°ä¹åççæ¬&lt;/li&gt;
&lt;li&gt;å¤äººåä½æï¼ä¸ææå¥äººçæ±è¥¿èæ&lt;/li&gt;
&lt;li&gt;ä¿çä¿®æ¹æ­·å²è¨éï¼ä»¥ä¾æ¥è©¢&lt;/li&gt;
&lt;li&gt;è»é«ç¼è¡æï¼å¯ä»¥æ¹ä¾¿ç®¡çä¸åçæ¬&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(From: &lt;a href="http://dylandy.github.io/Easy-Git-Tutorial/"&gt;Git æå­¸ç ç©¶ç«&lt;/a&gt;)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è½åå°çæ¬æ§å¶çå·¥å·æå¾å¤ï¼ä½ç®åä¸»æµå°±æ¯&amp;nbsp;Gitã&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#_1"&gt;çºä»éº¼ä½¿ç¨çæ¬æ§å¶ï¼&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#git-version-control"&gt;Git (Version Control)&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_2"&gt;æä½å»ºè­°&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#commit-style"&gt;Commit&amp;nbsp;Style&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_3"&gt;å¸¸è¦åé¡&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#conflict"&gt;Conflict&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#push-fail"&gt;Push&amp;nbsp;fail&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_4"&gt;ç¸éè³æº&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#code-school-try-git"&gt;Code School - Try&amp;nbsp;Git&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#git"&gt;Git&amp;nbsp;æå­¸ç ç©¶ç«&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#code-school-git-real"&gt;Code School - Git&amp;nbsp;Real&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#learn-git-branching"&gt;Learn Git&amp;nbsp;Branching&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#git-tutorial-by-atlassian"&gt;Git Tutorial by&amp;nbsp;Atlassian&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_5"&gt;å­¸ç¿ç®æ¨&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h1 id="git-version-control"&gt;Git (Version&amp;nbsp;Control)&lt;/h1&gt;
&lt;p&gt;Git&amp;nbsp;æ¯ä¸åçæ¬æ§å¶çå·¥å·ã&lt;/p&gt;
&lt;p&gt;Git æå¨ä½ çå°æ¡ï¼repoï¼ç®é&lt;sup id="fnref:è¨»1"&gt;&lt;a class="footnote-ref" href="#fn:è¨»1" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt;åºä¸å»ºä¸å &lt;code&gt;.git&lt;/code&gt; çè³æå¤¾ä¾ç®¡çéäºãé²åº¦é»ãï¼èä¸æå»åå°æ¡å¶ä»è·¯å¾è£¡çæ±è¥¿ã&lt;/p&gt;
&lt;p&gt;éäºé²åº¦é»å¯ä»¥å³å° server ä¸ï¼å¥äººä¸è¼ä¸ä¾çæåå°±å¯ä»¥é¤äºå¾å°ç¾å¨ç code&amp;nbsp;ä»¥å¤ï¼éè½çå°éå»éç¼çè¨éï¼èå¥äººä¸å³äºä»çæ´æ°é²åº¦é»ä¹å¾ï¼ä½ æä¸ä¾å°±å¯ä»¥å¾å°ä»æ´æ¹çé²åº¦ãéåå°±æ¯ãåæ­¥ãçæ¦å¿µï¼å¤äººä¹éè½å½¼æ­¤å±äº«ãæ´æ°å½¼æ­¤éç¼çææã&lt;/p&gt;
&lt;p&gt;è½å¤ èç Git åæ­¥æä½çä¼ºæå¨å°±å«å git serverã&lt;a href="https://github.com/"&gt;Github&lt;/a&gt; å°±æ¯ä¸éå¬å¸æä¾åè²»ç git server è®å¤§å®¶åæ­¥å¬éç Git å°æ¡ãå¾å¤ Linux çå·¥å·é½ä½¿ç¨ git ä¾è®å¤§å®¶åä½éç¼ï¼ä¹æä¸å°å·¥å·å·²ç¶æ git server è½å°äº Github ä¸é¢ãæä»¥éå¸¸å¤äººå¨ç¨ï¼å æ­¤å»ºè­°å¤§å®¶ä¸å¦¨ç³è«ä¸å GitHub&amp;nbsp;å¸³èã&lt;/p&gt;
&lt;p&gt;Git éç¶æå¸¸ç¨ä¾ç®¡çç¨å¼ç¢¼ï¼ä½å®å¶å¯¦å¯ä»¥ææå°ç®¡çä»»ä½ç´æå­çæªæ¡ï¼ä¹å¯ä»¥æ binary  æªæ¡å å° repo&amp;nbsp;ä¸­ã&lt;/p&gt;
&lt;p&gt;ï¼å¯è½éè¦æä¸äº git&amp;nbsp;æä½ç¶é©æè½äºè§£ä»¥ä¸çè¡èªï¼&lt;/p&gt;
&lt;h2 id="_2"&gt;æä½å»ºè­°&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å»ºç«å¤èå°çé²åº¦é»&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ¯å®æä¸ç³»åçæ´åï¼å°±è¶å¿« add å&amp;nbsp;commitãä¸éå§æç©ï¼ä½éæ¯å¥½ç¿æ£ã&lt;/p&gt;
&lt;p&gt;æ¥å¾æ´äºè§£ git æä½çæåï¼æå­¸å°ä¸äºé²éçæä»¤ï¼å¦ &lt;code&gt;git rebase -i&lt;/code&gt;ï¼å°±è½æå¤å commit åæçºä¸åãä½è¦æéä¸åå¤§ç commit&amp;nbsp;ææ¯è¼è¤éã&lt;/p&gt;
&lt;h3 id="commit-style"&gt;Commit&amp;nbsp;Style&lt;/h3&gt;
&lt;p&gt;å¸¸è¦ç commit message&amp;nbsp;å¤§æ¦ææ¯ä¸è¡æãå¦æéåæ´åéè¦èªªæï¼é£å°±å»ºè­°æç§ä¸é¢çæ ¼å¼ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸è¡å°æ¼ 50&amp;nbsp;åå­å&lt;/li&gt;
&lt;li&gt;ç¬¬äºè¡çç©º&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸è¡ä»¥å¾æ ¼å¼é¨æï¼ä½å®è¡ä¸è¶é 75&amp;nbsp;åå­å&lt;/li&gt;
&lt;li&gt;åç¨æ¢åå¼èªªæ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥ä¸æ¯ç¯ä¾ï¼From &lt;a href="http://git-scm.com/book/ch5-2.html"&gt;Git Book&lt;/a&gt;ï¼ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Short (50 chars or less) summary of changes

More detailed explanatory text, if necessary.  Wrap it to
about 72 characters or so.  In some contexts, the first
line is treated as the subject of an email and the rest of
the text as the body.  The blank line separating the
summary from the body is critical (unless you omit the body
entirely); tools like rebase can get confused if you run
the two together.

Further paragraphs come after blank lines.

  - Bullet points are okay, too

  - Typically a hyphen or asterisk is used for the bullet,
    preceded by a single space, with blank lines in
    between, but conventions vary here
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ps ä½ å¯ä»¥æ¾å°å¾å¤æè¶£ç commit messageãä¾å¦ï¼&lt;a href="http://www.commitlogsfromlastnight.com/"&gt;æ±æ¨&lt;/a&gt;ã&lt;/p&gt;
&lt;h2 id="_3"&gt;å¸¸è¦åé¡&lt;/h2&gt;
&lt;h4 id="conflict"&gt;Conflict&lt;/h4&gt;
&lt;p&gt;ç¶å®æ©åªæå¨ä¸å branch ä¸éç¼çæåï¼å¾é£æ conflict çåé¡ãä½ç¢°å°å¤äººå±åéç¼ï¼ææå¤æ¢ branch merge å¨ä¸èµ·æå°±ææ&amp;nbsp;conflictã&lt;/p&gt;
&lt;p&gt;Conflict çç¼çï¼æå¸¸è¦çå°±æ¯å©åäººåèªä¿®æ¹äºåä¸åæªæ¡ç¸è¿ä½ç½®çå§å®¹ãéä½¿å¾ git&amp;nbsp;å¨æå©åäººçæ´åèåå¨ä¸èµ·çæåï¼æä¸ç¥éå°åºè¦ç¨èª°çæ´åï¼éæåå°±ç¡æ³èªåèçäºã&lt;/p&gt;
&lt;p&gt;å¯ä»¥æå°ãresolve git&amp;nbsp;conflictãæ¾å°ç¸éçè§£æ±ºè¾¦æ³ã&lt;/p&gt;
&lt;h4 id="push-fail"&gt;Push&amp;nbsp;fail&lt;/h4&gt;
&lt;p&gt;ééå¸¸ç¼å¨ server ä¸çé²åº¦é»æ¯èªå·±æ¬æ©çéè¦æ°ï¼æä»¥å¿é åæ server ä¸çæ´æ°åæ­¥ä¸ä¾ãå¦æé½æ¯åä¸å branch çè©±ï¼ä½ å¯ä»¥è©¦èç¨ &lt;code&gt;git pull --rebase&lt;/code&gt; å»é¿åé¡å¤ç&amp;nbsp;mergeã&lt;/p&gt;
&lt;h2 id="_4"&gt;ç¸éè³æº&lt;/h2&gt;
&lt;h3 id="code-school-try-git"&gt;Code School - Try&amp;nbsp;Git&lt;/h3&gt;
&lt;p&gt;äºåå¼ç·´ç¿ï¼è½ææåºæ¬ç Git æä»¤æä½ï¼æ¥å¸¸æä½ä¹ä¸»è¦æ¯éäºæä»¤ãä¸¦ä¸æå¸¶ä½ å»ºç«ä¸å GitHub&amp;nbsp;å¸³èã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://try.github.io"&gt;https://try.github.io&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="git"&gt;Git&amp;nbsp;æå­¸ç ç©¶ç«&lt;/h3&gt;
&lt;p&gt;ä¸­æçä»ç´¹ï¼ä»çäºåå¼ç·´ç¿å°±æ¯ä¸é¢ Try Git&amp;nbsp;çä¸­æåçæ¬ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://dylandy.github.io/Easy-Git-Tutorial/index.html"&gt;http://dylandy.github.io/Easy-Git-Tutorial/index.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="code-school-git-real"&gt;Code School - Git&amp;nbsp;Real&lt;/h3&gt;
&lt;p&gt;æ´å®æ´çäºåå¼ç·´ç¿ï¼å¦æå¨é¨çéå¡é½åå®çè©±ï¼å¤§é¨ä»½éè¦ç¨ git&amp;nbsp;ççæ³é½ç·´ç¿éäºã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://gitreal.codeschool.com"&gt;http://gitreal.codeschool.com&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="learn-git-branching"&gt;Learn Git&amp;nbsp;Branching&lt;/h3&gt;
&lt;p&gt;é¡§åæç¾©ï¼æ¯åç·´ç¿æä½ git branch çç·ä¸å­¸ç¿ç¶²ç«ãä¸éåå¹¾åéå¡å¨ä»ç´¹ commit ç¸éçæä½ï¼å¯ä»¥è©¦ä¸è©¦ãçè¦ç·´ç¿å¯ä»¥åå®æ Main ä»¥ä¸&amp;nbsp;levelsï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Introduction&amp;nbsp;Sequence&lt;/li&gt;
&lt;li&gt;Ramping&amp;nbsp;Up&lt;/li&gt;
&lt;li&gt;Moving Work&amp;nbsp;Around&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¶ä»ç¨é£ä¸é»ï¼è¦ææ³è·³éãä½å¦ææ³å­¸ git&amp;nbsp;æ¯è¼è¤éçæä»¤å¯ä»¥åä¾çå®ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://pcottle.github.io/learnGitBranching/"&gt;http://pcottle.github.io/learnGitBranching/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="git-tutorial-by-atlassian"&gt;Git Tutorial by&amp;nbsp;Atlassian&lt;/h3&gt;
&lt;p&gt;è »å®æ´çæå­¸ï¼ä½å¯è½ç¨é£ä¸é»ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.atlassian.com/git/tutorials"&gt;https://www.atlassian.com/git/tutorials&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_5"&gt;å­¸ç¿ç®æ¨&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ç¨ Git ç®¡çéäºç·´ç¿çç­è¨ï¼åæ¥å¨ Text Editors&amp;nbsp;çç·´ç¿ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥è©¦èå°å®åä¸äº git æä»¤æä½ï¼&lt;ul&gt;
&lt;li&gt;&lt;code&gt;git status&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;git log --oneline --graph&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å»ºç« dotfiles å dotvim ä¾ç®¡çä½ çç°å¢è¨­å®æªã&lt;br&gt;
   dotfiles å°±æ¯ç¨ä¾å²å­ &lt;code&gt;.xxx&lt;/code&gt; çæªæ¡åï¼åæ¯ &lt;code&gt;.bashrc&lt;/code&gt; ã &lt;code&gt;.screenrc&lt;/code&gt; ã &lt;code&gt;.tmux.conf&lt;/code&gt; ã &lt;code&gt;.gitconfig&lt;/code&gt; ç­ç­ï¼ä¸è¬å¯è½å­æ¾å¨ &lt;code&gt;~/.xxx&lt;/code&gt; æ &lt;code&gt;~/.config/xxx&lt;/code&gt; ä¹é¡ãç¨çæ¬æ§å¶çå¥½èæ¯ï¼éæ¨£å¨ä¸åç server ä¹éè¨­å®å¯ä»¥åæ­¥ã&lt;br&gt;
   dotvim æ¯å­æ¾ &lt;code&gt;~/.vim&lt;/code&gt; ç Vim è¨­å®æªãéäºè¨­å®æªå¯ä»¥éé soft link&amp;nbsp;é£çµåä»ååæ¬æè©²å¨çä½ç½®ã&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æï¼æ°¸é ä¸è¦æ private key&amp;nbsp;æ¾å¥çæ¬æ§å¶ä¸­ï¼&lt;/strong&gt; &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hint: æå° dotfiles å°±ææå¾å¤ç¯ä¾ï¼Ex &lt;a href="https://github.com/ccwang002/dotfiles"&gt;æç&lt;/a&gt;ï¼&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å»ºç«èªå·±ç Github å¸³èï¼ä¸¦æ dotfiles / dotvim repo åæ­¥ï¼&lt;strong&gt;push&lt;/strong&gt;ï¼å°Githubã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hint: å»ºç«è¨­ç«å¥½ ssh key pair ä½¿ç¨ ssh ä¸å³ãGithub æ&lt;a href="https://help.github.com/articles/generating-ssh-keys/"&gt;å®æ´çæå­¸&lt;/a&gt;ã&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="footnote"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn:è¨»1"&gt;
&lt;p&gt;æè¬çå°æ¡ç®éå°±æ¯ä¸ &lt;code&gt;git init&lt;/code&gt; æä»¤çç®éã&amp;#160;&lt;a class="footnote-backref" href="#fnref:è¨»1" rev="footnote" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</summary><category term="zh"></category><category term="labcoding"></category></entry><entry><title>CodingÂ åå­¸æåï¼æå­ç·¨è¼¯</title><link href="//blog.liang2.tw/posts/2016/01/lab-coding-text-editing/" rel="alternate"></link><updated>2016-01-21T22:30:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2016-01-21:posts/2016/01/lab-coding-text-editing/</id><summary type="html">&lt;p&gt;éåç« ç¯æå¸¶å¤§å®¶èªè­ä¸åå¾ç°¡å®çç´æå­æ ¼å¼ Markdownï¼æ¹ä¾¿å¤§å®¶æ´çç­è¨ãåæå¸æå¤§å®¶å­¸æä¸å terminal based çæå­ç·¨è¼¯å¨ï¼æ¹ä¾¿å¾å¾å¨ server&amp;nbsp;ç°å¢åºä¸çæä½ã&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#markdown"&gt;Markdown&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_1"&gt;ç¸éè³æº&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#markdown_1"&gt;Markdown&amp;nbsp;èªæ³&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_2"&gt;å­¸ç¿ç®æ¨&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#text-editor"&gt;Text Editor&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#nano"&gt;Nano&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#emacs"&gt;Emacs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#vim"&gt;Vim&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#vim_1"&gt;Vim ç¸éè³æº&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#open-vim"&gt;Open&amp;nbsp;Vim&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#vim-ptt"&gt;å­¸ç¿ Vim çå¿æ³èæ»ç¥&amp;nbsp;(ptt)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#vim-adventure"&gt;Vim&amp;nbsp;adventure&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#vim_2"&gt;Vim&amp;nbsp;æ¬èº«çä½¿ç¨æå&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_3"&gt;å­¸ç¿ç®æ¨&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#regex"&gt;æ­£è¦è¡¨ç¤ºå¼ Regex&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#regex_1"&gt;Regex&amp;nbsp;èªæ³æ´¾å¥&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_4"&gt;ç¸éè³æº&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#regex-one"&gt;Regex&amp;nbsp;One&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#regex-101"&gt;Regex&amp;nbsp;101&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h1 id="markdown"&gt;Markdown&lt;/h1&gt;
&lt;p&gt;éæ¯ä¸åç°¡ä¾¿çèªæ³ï¼å®çæ¦å¿µæ¯å¨ç´æå­çæªæ¡ä¸­ç¨ä¸äºç°¡å®çæ¨è¨ï¼å°±è½ååºå¤§å°æ¨é¡ãç²æé«ãè¶é£çµãè¡¨æ ¼ãç¨å¼ç¢¼ä¸è²ç­èªæ³ã&lt;/p&gt;
&lt;p&gt;å¦æå¤§å®¶äºè§£ç¶²é çæ ¼å¼ &lt;a href="https://developer.mozilla.org/en-US/docs/Web/HTML"&gt;&lt;span class="caps"&gt;HTML&lt;/span&gt;&lt;/a&gt; çè©±ï¼é£ markdown çèªæ³è½ç´æ¥å°æå° &lt;span class="caps"&gt;HTML&lt;/span&gt; çèªæ³ï¼æä»¥éåæ ¼å¼å¨ç¶²è·¯çä¸çååæµè¡ãå®çå¯æªåçº &lt;code&gt;.md&lt;/code&gt;ï¼è¿ä»£ç¨å¼ç &lt;span class="caps"&gt;REAME&lt;/span&gt; è¨±å¤é½ç¨ markdown å¯«æï¼ä¾ï¼&lt;code&gt;README.md&lt;/code&gt;ï¼&lt;/p&gt;
&lt;h2 id="_1"&gt;ç¸éè³æº&lt;/h2&gt;
&lt;h3 id="markdown_1"&gt;Markdown&amp;nbsp;èªæ³&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://markdown.tw/"&gt;http://markdown.tw/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_2"&gt;å­¸ç¿ç®æ¨&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;éä¸ç³»åçç­è¨å°±æ¯ç¨ markdown å¯«æï¼ä½ å¯ä»¥å¨&lt;a href="https://github.com/ccwang002/ccwang002.github.io/tree/src/content/blogs/2016-01"&gt;éè£¡&lt;/a&gt;æ¾å°å®çåå§æªã&lt;/li&gt;
&lt;li&gt;è©¦èæ Linux å­¸ç¿éçæä»¤ï¼æèèªå·±å¸¸ç¨ççµåæä»¤ç¨ markdown&amp;nbsp;è¨éã&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id="text-editor"&gt;Text&amp;nbsp;Editor&lt;/h1&gt;
&lt;p&gt;å¨ Linux çä¸çå¾å¤é½æ¯ç´æå­æªæ¡ï¼åå ä¸ä¸äºè¦å®çèªæ³æçºæ°çæ ¼å¼ãåé¢ç markdown&amp;nbsp;å°±æ¯åä¾å­ãçè³è¨±å¤å¯ä»¥å·è¡çç¨å¼é½åªæ¯åè³æ¬æªï¼è½ç¨ä¸è¬çç·¨è¼¯å¨ï¼editorï¼æéå°±è½è®æãä½ å¯ä»¥è©¦è©¦&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# cd is a shell script&lt;/span&gt;
nano &lt;span class="sb"&gt;`&lt;/span&gt;which &lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;       &lt;span class="c1"&gt;# thanks TP&amp;#39;s idea&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¸¸è¦ç editor æï¼nanoãviãvimãemacsãå°åºä»éº¼æ¯æå¥½ç¨çæå­ç·¨è¼¯å¨ï¼éæ¯ä¸å ´æ°¸ç¡æ­¢ç¡çæ°ç­ï¼è¿å¹´ä¾åæ Notepad++(&lt;span class="caps"&gt;GUI&lt;/span&gt;)ãSublime Text (&lt;span class="caps"&gt;GUI&lt;/span&gt;)ãNeovim çå å¥ï¼éè©±é¡å°ä¸ææçµè«ãå°åå­¸èèè¨ï¼è³å°å­¸æä¸å editor&amp;nbsp;æ¯å¿è¦çã&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;éç¶ä¸éå§é½èªªæ¯ä»ç´¹æå­ç·¨è¼¯å¨ï¼ä½å¾ä¾æéå§å­¸ç¨å¼è¨­è¨ï¼æä»¥æå¾å¤§å®¶å¨è¨è«çé½æ¯ãç¨å¼ç¢¼çç·¨è¼¯å¨ãã&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç¶å¨ç·¨è¼¯ä¸äºè¨­å®æªãç¨å¼ç¢¼æï¼çºäºé¿åæé¯ééµå­ä½é£ä»¥æ¥è¦ºï¼å¤æ¸äººææç¨å¼ç¢¼çééµå­ä¸è²ãæç§ç¨å¼ç¢¼ä¸åçå±¬æ§ãåè½ä¸è²ä¹å¾ï¼å¤æ¸äººç¼ç¾è½æ´å¥½ççè§£ç¨å¼ççµæ§ï¼å æ­¤ editor å¤§å¤å¸¶æèªæ³ä¸è²ï¼syntax&amp;nbsp;highlightingï¼ã&lt;/p&gt;
&lt;p&gt;é¤äºèªæ³ä¸è²ï¼éäº editor é½æèªå·±çè¨­å®æªè¦ç¯ï¼å¯ä»¥è®ä½¿ç¨èèªè¡ä¿®æ¹ editor çè¡çºãæèªå·±å¸¸è¦çç·¨è¼¯å¨æ¹å¾åä¹èªå·±ç¿æ£ï¼æ¯é·æçæ´»å¨ terminal&amp;nbsp;ä¸ççç¬¬ä¸æ­¥ï¼å¤§å®¶å¯ä»¥åèï¼æï¼å¥äººçç¯æ¬éå§ã&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è®èªå·±çç·¨è¼¯å¨æå®¶çæè¦ºã&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é¤äºè¨­å®æªä¹å¤ï¼åè½å¤çç·¨è¼¯å¨éææãå¤æãçåè½ï¼å¯ä»¥è®ä½¿ç¨èå¢å èªå·±çå¥ä»¶ãéä¹ç­å¤§å®¶çæç°å¢ä¹å¾åèªè¡ç©ç©å§ã&lt;/p&gt;
&lt;h2 id="nano"&gt;Nano&lt;/h2&gt;
&lt;p&gt;éæ¯ä¸åæä½ç°¡å®å¥½æçç·¨è¼¯å¨ï¼&lt;del&gt;æ²æèªæ³ä¸è²&lt;/del&gt;&lt;sup id="fnref:è¨»1"&gt;&lt;a class="footnote-ref" href="#fn:è¨»1" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt;ãå¤æ¸çç³»çµ±é½æå§å»ºï¼æä»¥å°ä¸åæ°çç°å¢æå¹¾ä¹é½è½ä½¿ç¨ã&lt;/p&gt;
&lt;p&gt;é³¥å¥ææãå¶å¯¦ç´æ¥å·è¡å® &lt;code&gt;nano&lt;/code&gt; å®çæä»¤é½æé¡¯ç¤ºå¨ç·¨è¼¯ç«é¢ä¸­ã&lt;/p&gt;
&lt;h2 id="emacs"&gt;Emacs&lt;/h2&gt;
&lt;p&gt;æ±æ­ï¼æä¸æãä½å®æ¯ä¸åå¾å¥½çç·¨è¼¯å¨ãï¼èª å¾µå¤§å¤§è£å¨ï¼&lt;/p&gt;
&lt;h2 id="vim"&gt;Vim&lt;/h2&gt;
&lt;p&gt;ä¸åèå­èä½ç¶­æç©©å®éç¼çç·¨è¼¯å¨ãä»æåç¹è²æ¯ç·¨è¼¯å¨çæ¨¡å¼ï¼æäºæ¨¡å¼è½ç·¨è¼¯æå­ï¼æäºä¸è¡ï¼ä½è½åé¸åãæå°ç­åä½ãéæç¹æçæä»¤åææ¹å¼ï¼åé£çºæãbuff&amp;nbsp;éæ¨£ï¼&lt;/p&gt;
&lt;p&gt;åå­¸èéå¸¸æé£ä»¥ç¿æ£ï¼åæä¸çæ¨¡å¼ãæä»¤è¨ä¸ä½çè©±æå¾é£æä½ãæä»¥å»ºè­°ä¸éå§åè¨ä½æåºæ¬çæä»¤ï¼é¨æææ¡èªå·±å¨çæ¨¡å¼ï¼æ¥å¾åæ¢æ¢å æ·±å° vim&amp;nbsp;çäºè§£ã&lt;/p&gt;
&lt;p&gt;å¦æççå¾æ²æ¦å¿µï¼é³¥å¥ä¹æå¯«ä»ç´¹ã&lt;/p&gt;
&lt;h2 id="vim_1"&gt;Vim&amp;nbsp;ç¸éè³æº&lt;/h2&gt;
&lt;h3 id="open-vim"&gt;Open&amp;nbsp;Vim&lt;/h3&gt;
&lt;p&gt;äºåå¼çç·ä¸å­¸ç¿ç¶²ç«ï¼å¾ç­ï¼è·èæä½å®è½æ Vim&amp;nbsp;åºæ¬åä½ãå­æªã &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.openvim.com/"&gt;http://www.openvim.com/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="vim-ptt"&gt;å­¸ç¿ Vim çå¿æ³èæ»ç¥&amp;nbsp;(ptt)&lt;/h3&gt;
&lt;p&gt;äºè§£æå¸¸ç¨ç normal è insert æ¨¡å¼åæåºæ¬çæä»¤ãéç¯çå§å®¹çè§£ä¹å¾ï¼å°±è½ç¨ vim&amp;nbsp;èçæå­ç·¨è¼¯äºã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.ptt.cc/bbs/Editor/M.1264056747.A.885.html"&gt;https://www.ptt.cc/bbs/Editor/M.1264056747.A.885.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="vim-adventure"&gt;Vim&amp;nbsp;adventure&lt;/h3&gt;
&lt;p&gt;å¦æå¾é£å­¸ç¿ &lt;code&gt;hjkl&lt;/code&gt;ã&lt;code&gt;wb&lt;/code&gt; ç§»åçè©±ï¼éæ¯åè¦ç¨ vim&amp;nbsp;æä»¤æ§å¶çå°éæ²ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://vim-adventures.com/"&gt;http://vim-adventures.com/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="vim_2"&gt;Vim&amp;nbsp;æ¬èº«çä½¿ç¨æå&lt;/h3&gt;
&lt;p&gt;å¯ä»¥ä½¿ç¨ &lt;code&gt;vimtutor&lt;/code&gt; æä»¤ï¼æèå¨ vim normal æ¨¡å¼æéµå¥ &lt;code&gt;:help&lt;/code&gt;&lt;/p&gt;
&lt;h2 id="_3"&gt;å­¸ç¿ç®æ¨&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;è½å¨ terminal ä¸­ç·¨ä¿®ä¸åæå­æªåçº &lt;code&gt;foo.txt&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hint: try&amp;nbsp;nano&lt;/li&gt;
&lt;li&gt;&lt;code&gt;nano foo.txt&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ­é root&amp;nbsp;æ¬éä¿®æ¹ç³»çµ±çè¨­å®æªï¼ä½ å¨é³¥å¥å¯è½æç¶é©äºï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hint: try&amp;nbsp;sudo&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è½å¨ console ä¸­ç·¨å¯«ç¨å¼ç¢¼ãç¨ 1.&amp;nbsp;çæ¹æ¡ä¹å¯ï¼ä½å»ºè­°åè©¦è©¦çå¦å¤ä¸å&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hint: try vi, vim or&amp;nbsp;emacs&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¿®æ¹ editor&amp;nbsp;è¨­å®è®å®æ´ç¬¦åèªå·±çç¿æ£ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hint: for vim, try editing &lt;code&gt;~/.vimrc&lt;/code&gt;; for emacs, try editing &lt;code&gt;~/.emacs&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¨ terminal editor ä½¿ç¨ markdown&amp;nbsp;æ ¼å¼è¨ééäºç·´ç¿çç­è¨èç­æ¡ã&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id="regex"&gt;æ­£è¦è¡¨ç¤ºå¼&amp;nbsp;Regex&lt;/h1&gt;
&lt;p&gt;Vim å¨ normal æ¨¡å¼ä¸è½ç¨ &lt;code&gt;/{pattern}&lt;/code&gt; æå°æä¸­çå­ä¸²ãé¤äºç´æ¥ææ³è¦æ¥çå­ä¸²å¯«å¨ pattern è£¡ä»¥å¤ï¼éå¯ä»¥è¨­è¨è¦åæ¾åºç¬¦å pattern ä½ä¸ä¸æ¨£ççµæãéæ¨£çè¦åç¨±ä¹çºæ­£è¦è¡¨ç¤ºå¼ï¼Regular Expression, or&amp;nbsp;regexï¼ã&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³åå¾è¤éçå­ä¸²æ¯å°æï¼é½æè©²èæ®æ¯å¦è½ä½¿ç¨&amp;nbsp;regex &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¦åå­ä¸²æ¯å°çå°æ¹ï¼å·¥å·éå¸¸é½ææä¾ä½¿ç¨ regexï¼ä¾å¦ &lt;code&gt;grep&lt;/code&gt;ã&lt;code&gt;sed&lt;/code&gt;ãVim è Python ä¹é½ææä¾ regex&amp;nbsp;çåè½ã&lt;/p&gt;
&lt;h3 id="regex_1"&gt;Regex&amp;nbsp;èªæ³æ´¾å¥&lt;/h3&gt;
&lt;p&gt;æ¢ç¶ regex æ¯ä¸å¥å­ä¸²æ¯å°çè¦åï¼å°±æè¦ç¯å®çèªæ³ãä¸»è¦ç regex&amp;nbsp;èªæ³æå©å¤§é¡ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class="caps"&gt;BRE&lt;/span&gt; (basic regex)&lt;ul&gt;
&lt;li&gt;Ex. &lt;code&gt;[:alnum:]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;ERE&lt;/span&gt; (extended regex) &lt;ul&gt;
&lt;li&gt;Ex. &lt;code&gt;\w&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¨ Linux æä»¤ç¶ä¸­éå¸¸æå çºä½¿ç¨ regex èªæ³çä¸ååæå¤åæä»¤&lt;sup id="fnref:è¨»2"&gt;&lt;a class="footnote-ref" href="#fn:è¨»2" rel="footnote"&gt;2&lt;/a&gt;&lt;/sup&gt;ãä¾å¦ grep ä½¿ç¨ &lt;span class="caps"&gt;BRE&lt;/span&gt;ï¼egrep ä½¿ç¨ &lt;span class="caps"&gt;ERE&lt;/span&gt;ã&lt;/p&gt;
&lt;p&gt;èæå­ç·¨è¼¯ç¸éçå·¥å·ï¼å VimãPythonãPerl&lt;sup id="fnref:è¨»3"&gt;&lt;a class="footnote-ref" href="#fn:è¨»3" rel="footnote"&gt;3&lt;/a&gt;&lt;/sup&gt; ä¹æä»ååèªå¯« regex çæ¹å¼ï¼ä½å¤å°é½èåå©å¤§é¡ç¸ä¼¼ï¼ä½¿ç¨æé½æè©²åæ¥ä¸ä¸ä»åçèªæ³ãVim å¯ä»¥ç¨ &lt;code&gt;:help regex&lt;/code&gt; æ¥çã&lt;/p&gt;
&lt;h2 id="_4"&gt;ç¸éè³æº&lt;/h2&gt;
&lt;h3 id="regex-one"&gt;Regex&amp;nbsp;One&lt;/h3&gt;
&lt;p&gt;ä¸»è¦æ¯ä»ç´¹ pcre çèªæ³ï¼æ¯ä¸å example å¤ä»ç´¹ä¸åæ°çèªæ³ãæ¥èéæå practical examples&amp;nbsp;ç·´ç¿æ´çä¸åçèªæ³ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://regexone.com/"&gt;http://regexone.com/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="regex-101"&gt;Regex&amp;nbsp;101&lt;/h3&gt;
&lt;p&gt;regex å¾å®¹æå¯«å°èªå·±é½çä¸æï¼éæ¯ä¸åå¹«å©äºè§£èªå·±æå¥äººå¯«å¥½ç regex pattern&amp;nbsp;çç¶²ç«ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://regex101.com/"&gt;https://regex101.com/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="footnote"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn:è¨»1"&gt;
&lt;p&gt;nano å¶å¯¦æè¾¦æ³åèªæ³ä¸è²åï¼è©³è¦ &lt;a href="https://wiki.archlinux.org/index.php/Nano"&gt;Arch wiki&lt;/a&gt; å &lt;a href="https://github.com/scopatz/nanorc"&gt;nanorc&lt;/a&gt;ãThanks @concise&amp;#160;&lt;a class="footnote-backref" href="#fnref:è¨»1" rev="footnote" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:è¨»2"&gt;
&lt;p&gt;åªäºæä»¤æç¡æ¯æ´ regex ä»¥åæ¯æ´çèªæ³å¯ä»¥åè &lt;a href="https://www.debian.org/doc/manuals/debian-reference/ch01.en.html#_unix_text_tools"&gt;Debian Reference&lt;/a&gt;&amp;#160;&lt;a class="footnote-backref" href="#fnref:è¨»2" rev="footnote" title="Jump back to footnote 2 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:è¨»3"&gt;
&lt;p&gt;Perl ç regex èªæ³åç¨±çº &lt;strong&gt;pcre&lt;/strong&gt; styleï¼å¸¸è¢«å¶ä»å·¥å·ä½¿ç¨ãä¾å¦ï¼php&amp;#160;&lt;a class="footnote-backref" href="#fnref:è¨»3" rev="footnote" title="Jump back to footnote 3 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</summary><category term="zh"></category><category term="labcoding"></category></entry><entry><title>CodingÂ åå­¸æåï¼Linux</title><link href="//blog.liang2.tw/posts/2016/01/lab-coding-linux/" rel="alternate"></link><updated>2016-01-21T21:30:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2016-01-21:posts/2016/01/lab-coding-linux/</id><summary type="html">&lt;p&gt;å­¸ç¿ä½¿ç¨ Linux æ¯ç¬¬ä¸åæ¯è¼å¤§çéç¤ï¼å çºæå¨ç­æéæ¥è§¸å°éå¸¸å¤æ°çæ±è¥¿ãå¾é¢çæ±è¥¿å¤å°é½è Linux ç¸éï¼è Linux é£çé¨ä»½å¨éå§ä½¿ç¨ terminal ä¾æä½ãæ´å°é»è¦ãï¼å°å¾ç¿æ£ä½¿ç¨è¦çªä»é¢çäººæè¦ºå¾å¾ä¸ç´è¦ºãå¥½å¨è¿å¹´å¹¾åä¸»æµç Linux Distribution é½æå¾å¥½çåå½¢ä»é¢ï¼æ­£ç¢ºç¨± Desktop Environmentï¼ï¼æä»¥ä¸éå§è½æ¼¸è¿å°é©æ terminal&amp;nbsp;æä½ã&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¨å¯¦é©å®¤ server ä¸éç¼ï¼ãè½å¨ terminal&amp;nbsp;è£¡åäºæãæ¯å¿é çã&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#linuxunixbsdnix"&gt;LinuxãUnixã&lt;span class="caps"&gt;BSD&lt;/span&gt;ã*nix&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#distro"&gt;Distro ç°¡ä»&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#redhat-centos-fedora"&gt;Redhat / CentOS /&amp;nbsp;Fedora&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#debian-ubuntu"&gt;Debian /&amp;nbsp;Ubuntu&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#archlinux"&gt;ArchLinux&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#gnomekdexfcelxde"&gt;æ¡é¢ç°å¢ &lt;span class="caps"&gt;GNOME&lt;/span&gt;ã&lt;span class="caps"&gt;KDE&lt;/span&gt;ã&lt;span class="caps"&gt;XFCE&lt;/span&gt;ã&lt;span class="caps"&gt;LXDE&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_1"&gt;ç¸éè³æº&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_2"&gt;é³¥å¥çç§æ¿è&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_3"&gt;åç« ç¯éé»æ´ç&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#introduction-to-linux-on-edx-course"&gt;Introduction to Linux on edX&amp;nbsp;course&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#debian-user-manual"&gt;Debian User Manual&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#chapter-highlights"&gt;Chapter&amp;nbsp;Highlights&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_4"&gt;å­¸ç¿ç®æ¨&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="linuxunixbsdnix"&gt;LinuxãUnixã&lt;span class="caps"&gt;BSD&lt;/span&gt;ã*nix&lt;/h2&gt;
&lt;p&gt;Linux å Unix æ¯ä¸åçï¼ä½å°åå­¸èä¾èªªä»åçåå¥ä¸å®¹ææ¥è¦ºï¼å©èççµç«¯æä»¤å¾ç¸ä¼¼ï¼ä¹å æ­¤æäº *nix çéç¨±ãLinux ä»ç´¹æ¸å¤åææä»åçæ­·å²å¥½å¥½çèªªä¸é&lt;sup id="fnref:è¨»2"&gt;&lt;a class="footnote-ref" href="#fn:è¨»2" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt;ï¼æèè¶£è½è»é«ç¼å±æäºçå°±å¤çæéé¨ä»½ã&lt;/p&gt;
&lt;p&gt;ä¸å®æ´å°ä¸»è¦åæï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Redhat, CentOS,&amp;nbsp;Fedora&lt;/li&gt;
&lt;li&gt;Debian, Ubuntu, Linux&amp;nbsp;Mint&lt;/li&gt;
&lt;li&gt;ArchLinux&lt;/li&gt;
&lt;li&gt;openSUSE&lt;/li&gt;
&lt;li&gt;FreeBSD,&amp;nbsp;OpenBSD&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;éäº distributions (distros)ãå¶å¯¦ Linuxã&lt;span class="caps"&gt;BSD&lt;/span&gt; (or Unix) çç³»çµ±éå¸¸å¤&lt;sup id="fnref:è¨»3"&gt;&lt;a class="footnote-ref" href="#fn:è¨»3" rel="footnote"&gt;2&lt;/a&gt;&lt;/sup&gt;ï¼ä½å°åå¥ Linux çä½¿ç¨èï¼æè©²è¦æ¾æ¯è¼ç±éç distro&amp;nbsp;ä½¿ç¨ï¼æå¥½æ¾è³æã&lt;/p&gt;
&lt;p&gt;ä¸é¢æ¢åçæ¹å¼æ¯ææç¾©çï¼ææé¡ä¼¼ç distro æ¾å¨åä¸æï¼åªè¦å­¸äºå¶ä¸­ä¸åï¼åæçå¶ä»é½å¾å¥½ä¸æãå¶ä¸­åå©ææ¯å©å¤§å®¶æåæ å©ç¨®çæãæåå¯¦é©å®¤çå¤§ server ç¨çæ¯ CentOSï¼ä½è¿å¹´ä¾æèªå·±çé»è¦å·²ç¶æ¼¸æ¼¸æå° Debian&amp;nbsp;ä¸ã&lt;/p&gt;
&lt;h2 id="distro"&gt;Distro&amp;nbsp;ç°¡ä»&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸æ¯æä¸è² è²¬ä»»çä¸»è§ä»ç´¹ãå¾ä»ç´¹ç¯å¹å°±ç¥éææ¯åå¾å Debian&amp;nbsp;çäººã&lt;/p&gt;
&lt;h4 id="redhat-centos-fedora"&gt;Redhat / CentOS /&amp;nbsp;Fedora&lt;/h4&gt;
&lt;p&gt;Redhat æ¯åç¨ççæ¬ï¼éæºç¤¾ç¾¤ç¶­è­·çå°æçæ¬æ¯ CentOSãå®ä»¥ä¿å®ç©©å®èåï¼ä½ç¸å°ä¾èªªæ°çæ±è¥¿å¨ä¸é¢å°±è¦èªå·±å®è£ï¼éå°å¯¦é©å®¤é½ç¨è¼æ°çå·¥å·ä¾èªªæ¯åæ¸åçå°æ¹ãä»å¥ä»¶ç¨ &lt;code&gt;yum xxx&lt;/code&gt; ä¾æä½ãFedora&amp;nbsp;ä¸çæ±è¥¿ææ°ä¸é»ä½æåå¯¦é©å®¤æ²äººç¨ï¼æä»¥ä¸å»ºè­°ã&lt;/p&gt;
&lt;h4 id="debian-ubuntu"&gt;Debian /&amp;nbsp;Ubuntu&lt;/h4&gt;
&lt;p&gt;Debian æ¯å¦ä¸åå¤§å®¶æçé ­ï¼éç¶æ¯é ­ä½ä¸ç´ä¿æç©©å®éç¼ï¼å¨èªªææä»¶ã&lt;a href="https://wiki.debian.org/"&gt;wiki&lt;/a&gt; ä¸é½æä¸é¯çåè³ªãæ¬èº«ææè¬ç stableãtestingãunstable ä¸¦åå¥å°æä¸åçæ¬èç¢¼èåç¨±ãä»¥ 2016.01 çºä¾ï¼stable æ¯ jessie(8)ãtesting æ¯ stretch(9)ãunstable æ°¸é å°æå° sidãå¦å­é¢ä¸çææä»£è¡¨ç¶ä¸­å¥ä»¶ï¼è»é«ï¼çæ°èç¨åº¦ãstable ä¸çå·¥å·ä¹å æ­¤ææ¯è¼èä¸é©åå¯¦é©å®¤ä½¿ç¨ï¼ä½ testing éè »é©åçï¼æåäººå¾æ¨ãå¥ä»¶ç¨ &lt;code&gt;apt-get xxx&lt;/code&gt; ä¾æä½ã&lt;/p&gt;
&lt;p&gt;Debian å®¶æä¸­ç Ubuntu éå¸¸ç«ç´ï¼ç¶²è·¯ä¸æå­¸éå¸¸å¤ï¼èå¾ä¹æå¬å¸å æãåºæ¬ä¸ Debian çåªé»é½æå³å° Ubuntu ä¸ãUbuntu éç¶å¥ä»¶åç­ç­é½å¾ Debian&amp;nbsp;ç§»æ¤ï¼ä½ä»æèªå·±ççæ¬èç¢¼ï¼æ¯åå¹´ç¼ä½ä¸åçæ¬ã&lt;/p&gt;
&lt;h4 id="archlinux"&gt;ArchLinux&lt;/h4&gt;
&lt;p&gt;åä¾çæèè¶£èªå·±çï¼ä½æè¦é¡å¤ä»ç´¹ä¸å ArchLinuxãéæ¯ä¸åå¾èªå¹¹çç³»çµ±ï¼ä¸é»é½ä¸é©åæ°æèæ¶äººãä½ä»æä¸åå¯«å¾å¾ä»ç´°å®æ´ç &lt;a href="https://wiki.archlinux.org/"&gt;wiki ç«&lt;/a&gt;ãæ³è¦å­¸æ°çå¥ä»¶ãä¸æè¨­å®çè©±ï¼å»å google çæåè«åªåçä»åç&amp;nbsp;wikiã&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ¥è³æçæåï¼é¤äº StackOverflow ãUbuntu è«å£ä¹å¤ï¼è«å¤çåè³ªåªè¯ç &lt;a href="https://wiki.archlinux.org/"&gt;Arch Linux&lt;/a&gt; å &lt;a href="https://wiki.debian.org/"&gt;Debian&lt;/a&gt; ç&amp;nbsp;wikiã&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¯«äºééº¼å¤ï¼æ²æçµ¦ä¸åæç¢ºçé¸æï¼å¤æ¸äººéæ¯å¾é£æ±ºå®ãæä»¥å¦æä½ æ¯åå­¸èï¼ææå»ºè­°å®è£ Ubuntuï¼å¨æ­¤æè«é¸æ &lt;a href="http://releases.ubuntu.com/15.10/"&gt;15.10&lt;/a&gt; or &lt;a href="http://releases.ubuntu.com/14.04/"&gt;14.04 &lt;span class="caps"&gt;LTS&lt;/span&gt;&lt;/a&gt; Desktop&amp;nbsp;çæ¬ï¼å çºä»ç¶²è·¯ä¸çè³æºæè±å¯ã&lt;/p&gt;
&lt;p&gt;ä½æä¸æ¯å¾åæ­¡ Ubuntuï¼æä»¥ç­ä½ æè½åèªå·±æ¥è©¢ Linux ç¸éæä½æï¼å»ºè­°åççå¥ç distro ï¼ä¾å¦ææ¨è¦ç &lt;a href="https://www.debian.org/releases/testing/"&gt;Debian testing channel&lt;/a&gt;ï¼&lt;/p&gt;
&lt;h2 id="gnomekdexfcelxde"&gt;æ¡é¢ç°å¢ &lt;span class="caps"&gt;GNOME&lt;/span&gt;ã&lt;span class="caps"&gt;KDE&lt;/span&gt;ã&lt;span class="caps"&gt;XFCE&lt;/span&gt;ã&lt;span class="caps"&gt;LXDE&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;åå½¢åä»é¢ï¼&lt;span class="caps"&gt;GUI&lt;/span&gt;ï¼ï¼é¤äºä½¿ç¨èçæç¨ç¨å¼å¤ï¼ééè¦ç³»çµ±è¼å©ãç®¡çç­æ ¸å¿å¥ä»¶ãä¸ç³»åç &lt;span class="caps"&gt;GUI&lt;/span&gt;&amp;nbsp;å¥ä»¶å°±ç¨±ä¹çºæ¡é¢ç°å¢ã&lt;/p&gt;
&lt;p&gt;Windowsã&lt;span class="caps"&gt;OSX&lt;/span&gt; å¨å®è£ç³»çµ±æé½æèªåå®è£ï¼ å³æ¡é¢ç°å¢åªæä¸ç¨®é¸æãä½å¨ Linux ä¸ï¼&lt;span class="caps"&gt;GUI&lt;/span&gt; çå®è£æ¯é¸ææ§çï¼ç³»çµ±è½å¨åªæå®ç´ç terminal ä»é¢ä¾¿è½å®æ´ä½¿ç¨ï¼ä¾å¦é¸æå®è£ Ubuntu Server æï¼ï¼ä¸å° server&amp;nbsp;çºäºæè½ãå®å¨æ§çèéé½ä¸æè£æ¡é¢ç°å¢ã&lt;/p&gt;
&lt;p&gt;å° Linux ä¾èªªæ¡é¢ç°å¢æ¯è½ä¹å¾åé¸æå®è£ä¸å»çï¼èä¸éæãä¸åå£å³ãå¯ä»¥é¸æï¼ä½¿ç¨èä¹å¯ä»¥èªç±çç§»é¤å®åï¼ä½å¾æå¯è½æç¸æï¼ï¼å¸¸è¦å°±æ &lt;span class="caps"&gt;GNOME&lt;/span&gt;ã&lt;span class="caps"&gt;KDE&lt;/span&gt;ã&lt;span class="caps"&gt;XFCE&lt;/span&gt;ã&lt;span class="caps"&gt;LXDE&lt;/span&gt;&lt;sup id="fnref:è¨»4"&gt;&lt;a class="footnote-ref" href="#fn:è¨»4" rel="footnote"&gt;3&lt;/a&gt;&lt;/sup&gt; å¹¾ç¨®ç³»çµ±è½ä½¿ç¨ãä¾å¦é¸æå®è£ Ubuntu Server å¾ï¼æ³è¦åå ä¸ &lt;span class="caps"&gt;GNOME&lt;/span&gt;&amp;nbsp;ååå½¢åä»é¢æï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install ubuntu-gnome-desktop
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ééä¸æå»ç´°è¬éäºå¯¦ä½æ¹å¼çä¸åãç°¡å®èè¨ï¼&lt;span class="caps"&gt;GNOME&lt;/span&gt; ææµè¡ã&lt;span class="caps"&gt;XFCE&lt;/span&gt; ä½¿ç¨çç³»çµ±è³æºè¼å°ï¼å¨å¯¦é©å®¤ä¸ç server å¸¸æè£éåãå¨ Ubuntu ä¸ï¼é è¨­æ¯ç¨ Unityï¼å®æ¯å¾ &lt;span class="caps"&gt;GNOME&lt;/span&gt;&amp;nbsp;æ²¿ä¼¸åºä¾çã&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸æ¬¡å®è£æï¼å°±ä½¿ç¨é è¨­çæ¨¡å¼å§ãè£å¥½ä¹å¾è¦æå°ä¸åçæ¡é¢ç°å¢æï¼éè¦å°å¥ä»¶ç®¡çç³»çµ±ï¼ä¾&amp;nbsp;aptãyumï¼ãèª¿æ´ç³»çµ±è¨­å®æè¶³å¤ äºè§£ã&lt;/p&gt;
&lt;h2 id="_1"&gt;ç¸éè³æº&lt;/h2&gt;
&lt;p&gt;èªçå°èªªï¼ææé»ä¸ç¥é Linux&amp;nbsp;å¾å¾åå­¸å°å®æ´å­¸ç¿çè³æºå¨åªè£¡ãå¦æä½ åå¨å­¸çéç¨ä¸­ï¼æç¢°å°æ´é©åçè«ååè¨´æï¼ä¾å¦ï¼çè¨ï¼&lt;/p&gt;
&lt;h3 id="_2"&gt;é³¥å¥çç§æ¿è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://linux.vbird.org/linux_basic/"&gt;é³¥å¥å®ç¶²ï¼åºç¤å­¸ç¿ç¯ï¼&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.tenlong.com.tw/items/9861818510?item_id=53725"&gt;å¯¦é«æ¸é£çµ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¨å°ç£å­¸ Linux å¤§æ¦é½æåæ¨è¦é³¥å¥ï¼éæè©²æ¯æå¤äººç¨çå®æ´ä¸­æè³æºäºãå¦æé¡æåå®ä»ï¼å° Linux&amp;nbsp;çµå°ææè¶³å¤ çèªè­ãæå¤§å­¸çæåä¹æ¯çéæ¬å¥éçã&lt;/p&gt;
&lt;p&gt;ä¸é©åçå°æ¹æ¯é³¥å¥ä»ç´¹ Redhat ç³»çæä½ï¼å¾å¤è¨­å®å¨ Ubuntu ä¸ä¸éè¦æèæ¯ç¨å¥çæ¹å¼å»ç®¡çãä¾å¦ï¼å¨ CentOS ä¸å¯è½é½ç¨æå­æªä¾ä¿®æ¹è¨­å®ï¼ä½å¨ Ubuntu ä¸å¯ä»¥ç¨ &lt;code&gt;dpkg-reconfigure&lt;/code&gt; æä»¤ä¾æ´åãä»ç¤ºç¯ç &lt;span class="caps"&gt;OS&lt;/span&gt; çº CentOS 5.xï¼ç¾å¨ CentOS å·²ç¶ 7.x&amp;nbsp;çäºï¼è¨±å¤è¨­å®ä¹éæäºï¼æ°çå·¥å·ä¸æä»ç´¹å°ã&lt;/p&gt;
&lt;p&gt;ä¾å¦ç¾å¨å®è£ Linux æï¼å¨ç£ååå²ä¸é½æå¾å¥½çé è¨­å¼ï¼åå­¸èå¯ä»¥ä¸ç¨åå­¸èª¿æ´ swap ç­è¨­å®ãåæç³»çµ±ä¹é½æä¾ä½¿ç¨ &lt;span class="caps"&gt;LVM&lt;/span&gt; (Logical Volume Manager) &lt;sup id="fnref:è¨»5"&gt;&lt;a class="footnote-ref" href="#fn:è¨»5" rel="footnote"&gt;4&lt;/a&gt;&lt;/sup&gt; ç®¡çç£åï¼éäºç£å (&lt;span class="caps"&gt;LV&lt;/span&gt;) æ¥å¾è½åæèª¿æ´ãæå¥è©±èªªï¼ç¬¬äºç« ï¼å«ï¼çå§å®¹é½èç¾å¨ä½¿ç¨ Linux çæ¹å¼ä¸åï¼å¦æåªæ¯é èé³¥å¥æ¸çé åºä¸ç« ä¸ç« çä¸ä¾ï¼ææ²è¾¦æ³å°ç§èªå·±ç³»çµ±æä½ï¼å çºè¿æç Linux&amp;nbsp;å®è£åªè¦å¾é çä¸ä¸æ­¥å°±è½å®æäºã&lt;/p&gt;
&lt;h4 id="_3"&gt;åç« ç¯éé»æ´ç&lt;/h4&gt;
&lt;p&gt;é³¥å¥çå§å®¹éä¸åæ­¥ä¾èªªé½å°åå­¸èå¾æå¹«å©ï¼ä½çºäºé¿ååä½è±è²»ç¡è¬çæéå¨ãå°ç§å¤æ©èç¾ä»£æä½ (google&amp;nbsp;å°çè³æ)ä¸ãï¼æ´çåè¡¨æ ¼è®å¤§å®¶ç¥éæ¯åç« ç¯ä»éº¼å°æ¹éè¦çã&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="center"&gt;ç« ç¯&lt;/th&gt;
&lt;th align="left"&gt;ç« ç¯å&lt;/th&gt;
&lt;th&gt;éè¦çå§å®¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="center"&gt;0&lt;/td&gt;
&lt;td align="left"&gt;è¨ç®æ©æ¦è«&lt;/td&gt;
&lt;td&gt;æ²è½é &lt;span class="caps"&gt;CPU&lt;/span&gt;ã&lt;span class="caps"&gt;RAM&lt;/span&gt;ã&lt;span class="caps"&gt;MB&lt;/span&gt; &lt;span class="caps"&gt;GB&lt;/span&gt; å®ä½å°±å¾é ­çï¼ ä¸ç¶å°±è®è³æè¡¨ç¤ºæ¹å¼(3)ãè»é«ç¨å¼éä½(4)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;5&lt;/td&gt;
&lt;td align="left"&gt;é¦æ¬¡ç»å¥èç·ä¸æ±å© man page&lt;/td&gt;
&lt;td&gt;æå­æ¨¡å¼ä¸æä»¤çä¸é(2)ãman page è info page(3)ãnano(4)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;6&lt;/td&gt;
&lt;td align="left"&gt;Linux çæªæ¡æ¬éèç®ééç½®&lt;/td&gt;
&lt;td&gt;å¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;7&lt;/td&gt;
&lt;td align="left"&gt;Linux æªæ¡èç®éç®¡ç&lt;/td&gt;
&lt;td&gt;é¤æªæ¡é±èèç¹æ®å±¬æ§(4)å¤é½éè¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;8&lt;/td&gt;
&lt;td align="left"&gt;Linux ç£ç¢èæªæ¡ç³»çµ±ç®¡ç&lt;/td&gt;
&lt;td&gt;æªæ¡ç³»çµ±çç°¡å®æä½(2)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;9&lt;/td&gt;
&lt;td align="left"&gt;æªæ¡èæªæ¡ç³»çµ±çå£ç¸®èæå&lt;/td&gt;
&lt;td&gt;å£ç¸®æªæ¡çç¨éèæè¡(1)ãæåæä»¤(3)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;10&lt;sup id="fnref:*"&gt;&lt;a class="footnote-ref" href="#fn:*" rel="footnote"&gt;5&lt;/a&gt;&lt;/sup&gt;&lt;/td&gt;
&lt;td align="left"&gt;vim ç¨å¼ç·¨è¼¯å¨&lt;/td&gt;
&lt;td&gt;èªç³»ç·¨ç¢¼è½æ(4.3)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;11&lt;/td&gt;
&lt;td align="left"&gt;èªè­èå­¸ç¿ &lt;span class="caps"&gt;BASH&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;å¨ãä½å¯è¦ææ³å¿½ç¥ 2.4-2.8ã6.4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;12&lt;sup id="fnref:â "&gt;&lt;a class="footnote-ref" href="#fn:â " rel="footnote"&gt;6&lt;/a&gt;&lt;/sup&gt;&lt;/td&gt;
&lt;td align="left"&gt;æ­£è¦è¡¨ç¤ºæ³èæä»¶æ ¼å¼åèç&lt;/td&gt;
&lt;td&gt;åè¨(1)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;13&lt;/td&gt;
&lt;td align="left"&gt;å­¸ç¿ Shell Scripts&lt;/td&gt;
&lt;td&gt;å¨ï¼ç­ç¨å°åçï¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;22&lt;/td&gt;
&lt;td align="left"&gt;è»é«å®è£ï¼åå§ç¢¼è Tarball&lt;/td&gt;
&lt;td&gt;å¨ï¼äºè§£æµç¨ãææéäºééµå­å°±å¥½ï¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;23&lt;/td&gt;
&lt;td align="left"&gt;è»é«å®è£ï¼ &lt;span class="caps"&gt;RPM&lt;/span&gt;, &lt;span class="caps"&gt;SRPM&lt;/span&gt; è &lt;span class="caps"&gt;YUM&lt;/span&gt; åè½&lt;/td&gt;
&lt;td&gt;Ubuntu ç¨çæ¯ &lt;span class="caps"&gt;APT&lt;/span&gt;&lt;sup id="fnref:â¡"&gt;&lt;a class="footnote-ref" href="#fn:â¡" rel="footnote"&gt;7&lt;/a&gt;&lt;/sup&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="introduction-to-linux-on-edx-course"&gt;Introduction to Linux on edX&amp;nbsp;course&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.edx.org/course/introduction-linux-linuxfoundationx-lfs101x-2"&gt;èª²ç¨é£çµ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Linux Foundation æéè¾¦çç·ä¸èª²ç¨ï¼æè±æçå½±çåè¬ç¾©ãéè«å°äº Linux Kernel çä½è Linus Torvalds&amp;nbsp;ä¾æä»ç´¹çãéæ¯ççå¾éå¸¸åºç¤éå§è¬ï¼ææç¨å¾®çéï¼ä½ææé£åº¦ä¸å¤ ï¼éè¦åæ­éå¶ä»çè³æºä¾ä½¿ç¨ãå¥½èæ¯åæçå­¸ç¿æ¯è®é³¥å¥åå¹¾ç« ä¾çå¿«éå¸¸å¤ï¼é³¥å¥åå¹¾ç« çºè¨ç®æ©æ¦è«ï¼ã&lt;/p&gt;
&lt;h3 id="debian-user-manual"&gt;Debian User&amp;nbsp;Manual&lt;/h3&gt;
&lt;p&gt;è±æç Debian ç³»çµ±ä½¿ç¨èæåï¼è£¡é¢åå«äºå¸¸è¦åé¡æè§£ãåç¨®ç¡¬é«ä¸çå®è£æåãåèæåãæ³è¦å¥½å¥½å­¸ç¿ç¾ä»£ Debian (Linux)&amp;nbsp;çä½¿ç¨æ¹å¼çè©±ï¼å¯ä»¥åèéäºè³æºï¼å®åéæåç¶­è­·ã&lt;/p&gt;
&lt;p&gt;ç¼ºé»æ¯éæåå¤ªé·äºï¼å¦ææç¢°å°ä»éº¼ç¹å¥æ³äºæ·±å¥äºè§£çï¼å»ºè­°å¯ä»¥çéåã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.debian.org/doc/user-manuals"&gt;https://www.debian.org/doc/user-manuals&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.debian.org/doc/manuals/debian-reference/index.en.html"&gt;Debain Reference&lt;/a&gt; (online &lt;span class="caps"&gt;HTML&lt;/span&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="chapter-highlights"&gt;Chapter&amp;nbsp;Highlights&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="left"&gt;Chp. No&lt;/th&gt;
&lt;th align="left"&gt;Chp. Name&lt;/th&gt;
&lt;th align="left"&gt;Highlights&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="left"&gt;1&lt;/td&gt;
&lt;td align="left"&gt;&lt;span class="caps"&gt;GNU&lt;/span&gt;/Linux tutorials&lt;/td&gt;
&lt;td align="left"&gt;Everything except for 1.3 Midnight Commander&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;2&lt;/td&gt;
&lt;td align="left"&gt;Debian package management&lt;/td&gt;
&lt;td align="left"&gt;Read 2.2 Basic package management operations&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;10&lt;/td&gt;
&lt;td align="left"&gt;Data management&lt;/td&gt;
&lt;td align="left"&gt;Read 10.1 Sharing, copying, and archiving&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="_4"&gt;å­¸ç¿ç®æ¨&lt;/h2&gt;
&lt;p&gt;å çºééæç Linux ç®æ¯ä¸åè »å»£çå§å®¹ï¼ä¸éå§å­¸çæåå¾å®¹æè¿·å¤±æ¹åãæä»¥æé¡å¤åäºå¹¾åå¾éè¦çè§å¿µï¼ä½ æè©²è½å¨å­¸ç¿ Linux&amp;nbsp;çåææ¥è§¸å°ä»åï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;äºè§£ &lt;code&gt;$PATH&lt;/code&gt; èç¨å¼å·è¡ä½ç½®çéä¿&lt;ul&gt;
&lt;li&gt;çºä»éº¼æ &lt;code&gt;ls&lt;/code&gt; å¯ä»¥æ¾å°éé»åçº &lt;code&gt;ls&lt;/code&gt; çç¨å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¥é stdinãstdoutãstderrï¼pipeline&amp;nbsp;çä½¿ç¨&lt;/li&gt;
&lt;li&gt;ç¥éç°å¢è®æ¸æ¯ä»éº¼ï¼æéº¼ä¿®æ¹&lt;/li&gt;
&lt;li&gt;äºè§£æªæ¡ãç®éãç¸å°è·¯å¾ï¼æ¬éè¨­å®&lt;/li&gt;
&lt;li&gt;ä½¿ç¨ &lt;code&gt;&amp;lt;cmd&amp;gt; -h&lt;/code&gt; &lt;code&gt;&amp;lt;cmd&amp;gt; --help&lt;/code&gt; &lt;code&gt;man &amp;lt;cmd&amp;gt;&lt;/code&gt; ä¾æ¥çæä»¤çåè½ãå¯ä¸çåæ¸&lt;ul&gt;
&lt;li&gt;&amp;lt;cmd&gt; = ä»»ä½å¨ linux&amp;nbsp;ä¸çæä»¤&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦æä½ è±äºä¸åç¦®æçæéï¼ä½ä¸è¿°çå§å®¹é£è½é½æ²è½éï¼ææ²ä»éº¼ä½¿ç¨å°ï¼ï¼é£å¾å¯è½ä½ å­¸ç¿ Linux&amp;nbsp;çæ¹å¼è·ææ³å¾å¾ä¸ä¸æ¨£ï¼è«åå¯«åä¿¡åè¨´æãä¸é¢éäºè§å¿µçå­¸ç¿ä¹æ¯æ¼¸è¿å¼çï¼éäºä¸åç¦®æåªæè½éä½ä¸æ¯å¾äºè§£ï¼éæ¯å¾æ­£å¸¸çç¾è±¡ã&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;èªå·±å¾é¶éå§å®è£ä¸æ¬¡ Linux ç³»çµ±ï¼å¯ä»¥ç¨ &lt;span class="caps"&gt;VM&lt;/span&gt;ï¼ã&lt;/li&gt;
&lt;li&gt;å®æä½¿ç¨å®ä¸åææä»¥ä¸ï¼å³çæ &lt;code&gt;cd&lt;/code&gt; &lt;code&gt;ls&lt;/code&gt; ç­åºç¤æä»¤ï¼&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç¨ ssh é£ç·å°é ç«¯ç Linuxãï¼è¦æé ssh ç&amp;nbsp;portï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Bonus: å¨ ssh&amp;nbsp;é£ç·æä¸ç¨æå¯ç¢¼ã  &lt;/li&gt;
&lt;li&gt;Bonus hint: æ¥ &lt;code&gt;authorized_keys&lt;/code&gt;ãæéè¦å»ºç« ssh user identity keypairï¼éæå¨ä¸å³ GitHub&amp;nbsp;æç¨å°ï¼&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®è£ä¸åå« &lt;a href="http://hisham.hm/htop/"&gt;htop&lt;/a&gt;&amp;nbsp;çç³»çµ±ç£æ§è»é«ãä½¿ç¨å®ä¾æ¥çç³»çµ±è³æçä½¿ç¨çæ³&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Bonus:&lt;ul&gt;
&lt;li&gt;èª¿æ´æ¬ä½çæç&lt;/li&gt;
&lt;li&gt;éå Tree&amp;nbsp;Veiw&lt;/li&gt;
&lt;li&gt;é¸æé¡¯ç¤ºå®ä¸ä½¿ç¨èéè¡çç¨åºï¼å¤ªèç htop&amp;nbsp;å¯è½æ²éåè½ï¼&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®è£ä¸åå« &lt;a href="http://aria2.sourceforge.net/"&gt;aria2&lt;/a&gt; ççºå³è»é«ï¼ä»å¯ä»¥å¤ç·ç¨ä¸è¼ &lt;span class="caps"&gt;HTTP&lt;/span&gt;(S)ã&lt;span class="caps"&gt;FTP&lt;/span&gt;ãçè³ &lt;span class="caps"&gt;BT&lt;/span&gt;ãä»å¤©æ³è¦ä¸è¼ Debian Jessie netinst çæ åæªï¼ä½¿ç¨ 2&amp;nbsp;åç·ç¨åæä¸è¼ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hint: æ¥ &lt;code&gt;aria2c&lt;/code&gt; ç man&amp;nbsp;pageã&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å­¸ææ¥çç³»çµ±ç¡¬ç¢çä½¿ç¨éï¼æ¥çç¶åç®éå§æææªæ¡çå¤§å°ï¼çµå°ä¸æ¯ &lt;code&gt;ls -l&lt;/code&gt;ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hint: &lt;code&gt;df&lt;/code&gt; å &lt;code&gt;du&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;scp æ¯åéé ssh å³éä¸æå¤åæªæ¡çæä»¤ï¼è©¦èç¨å®æèªå·±é»è¦çæªæ¡ï¼åï¼å³å° server&amp;nbsp;ä¸ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Bonus:&lt;ul&gt;
&lt;li&gt;å¨è·¯å¾ä¸­æ­éç¹æ®å­å &lt;code&gt;*?&lt;/code&gt; å³å¤åæªæ¡&lt;/li&gt;
&lt;li&gt;æä¸åæ´ç²¾å¯çå³æªå·¥å·å«&amp;nbsp;rsyncï¼è©¦èæ¹ç¨å®ä¾å³æªã&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç¨ &lt;span class="caps"&gt;GUI&lt;/span&gt; çé ç«¯ä»é¢ãéç¸éçæè¡æå¾å¤ï¼&lt;span class="caps"&gt;VNC&lt;/span&gt;ã&lt;span class="caps"&gt;RDP&lt;/span&gt; æå¸¸è¦ã&lt;span class="caps"&gt;RDP&lt;/span&gt; å¨ windows é£æ¥ä¸æ¯è¼é æ¢ï¼&lt;span class="caps"&gt;VNC&lt;/span&gt; å¨ç«é¢å³è¼¸æ¯è¼æ²æçï¼éæå° server é æä¸å°çè² æï¼ä¹å¾å®¹æ lagãæä¸åæ°çéè¨åå®å« &lt;span class="caps"&gt;NX&lt;/span&gt;ï¼å®å°ç«é¢å£ç¸®ä½¿ç¨å³ä¾¿ç¶²éå¾æ¢ä¾ç¶è½ä½¿ç¨åå½¢ä»ç´¹ã&lt;br&gt;
   è©¦èç¨å¯¦ä½ &lt;span class="caps"&gt;NX&lt;/span&gt; åå®çè»é« X2go åé ç«¯æ¡é¢é£ç·å°&amp;nbsp;serverã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hint: ä½ éè¦å¨ server è client ç«¯ï¼éå¸¸æ¯èªå·±çé»è¦ï¼é½è£ä¸ X2go çè»é«ï¼ä¸¦æä½¿ç¨å° &lt;span class="caps"&gt;SSH&lt;/span&gt;&amp;nbsp;çé£ç·è¨­å®ã&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åªç¨ Linux&amp;nbsp;çå­ä¸åææä»¥ä¸ï¼åå«ä¸­æè¼¸å¥ãä¸ç¶²ç­ç­ï¼&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="footnote"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn:è¨»2"&gt;
&lt;p&gt;Linux distros æºæµ &lt;a href="http://en.wikipedia.org/wiki/Linux_distribution"&gt;http://en.wikipedia.org/wiki/Linux_distribution&lt;/a&gt;&amp;#160;&lt;a class="footnote-backref" href="#fnref:è¨»2" rev="footnote" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:è¨»3"&gt;
&lt;p&gt;&lt;a href="http://distrowatch.com/"&gt;Distro Watch&lt;/a&gt; æ¯ä¸åä»ç´¹åç¨® Linuxã&lt;span class="caps"&gt;BSD&lt;/span&gt; ç³»çµ±çå°æ¹ï¼å¯ä»¥ä¾ééçåå distro çä»ç´¹ã&amp;#160;&lt;a class="footnote-backref" href="#fnref:è¨»3" rev="footnote" title="Jump back to footnote 2 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:è¨»4"&gt;
&lt;p&gt;&lt;span class="caps"&gt;LXDE&lt;/span&gt; åä½èæ¯ PCMan åï¼ä¹æç¸ç¶å¤çå°ç£äººå¨ç¶­è­·å®ã&amp;#160;&lt;a class="footnote-backref" href="#fnref:è¨»4" rev="footnote" title="Jump back to footnote 3 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:è¨»5"&gt;
&lt;p&gt;&lt;span class="caps"&gt;LVM&lt;/span&gt; ä¸ææ²éä¿ï¼æèè¶£å¯ä»¥åè&lt;a href="http://linux.vbird.org/linux_basic/0420quota.php#lvm"&gt;é³¥å¥åäºç« &lt;/a&gt;ã&lt;a href="https://wiki.archlinux.org/index.php/LVM"&gt;Arch Wiki&lt;/a&gt; ä»ç´¹&amp;#160;&lt;a class="footnote-backref" href="#fnref:è¨»5" rev="footnote" title="Jump back to footnote 4 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:*"&gt;
&lt;p&gt;å­¸ vim æå¥çè³æºï¼è©³è¦ &lt;a href="//blog.liang2.tw/posts/2016/01/lab-coding-text-editing/"&gt;2 Text Editing&lt;/a&gt;ã&lt;br&gt;&amp;#160;&lt;a class="footnote-backref" href="#fnref:*" rev="footnote" title="Jump back to footnote 5 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:â "&gt;
&lt;p&gt;æ­£è¦è¡¨ç¤ºï¼regexï¼å¾éè¦ï¼ä½åå­¸ Linux ææè¦ºå¾å¾è¤éå¯ä»¥è·³éã &lt;a href="//blog.liang2.tw/posts/2016/01/lab-coding-text-editing/"&gt;2 Text Editing&lt;/a&gt; æåæ¥è§¸å°ä¸æ¬¡ vim ç regexã&lt;a href="//blog.liang2.tw/posts/2016/01/lab-coding-python/"&gt;4 Python&lt;/a&gt; ä¹æå­¸å° Python ç regexï¼å¯ä»¥ç­å°æåååä¾å­¸ &lt;code&gt;sed&lt;/code&gt;ã&lt;code&gt;egrep&lt;/code&gt; ç­æä»¤ã&lt;br&gt;&amp;#160;&lt;a class="footnote-backref" href="#fnref:â " rev="footnote" title="Jump back to footnote 6 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:â¡"&gt;
&lt;p&gt;&lt;span class="caps"&gt;APT&lt;/span&gt; çä½¿ç¨æå­¸å¯ä»¥åè &lt;a href="https://help.ubuntu.com/community/AptGet/Howto"&gt;Ubuntu å®ç¶²&lt;/a&gt;ã&lt;a href="http://blog.longwin.com.tw/2005/05/use_apt/"&gt;ç¶²è·¯ä¸å¤§å¤§çç­è¨&lt;/a&gt;ã&amp;#160;&lt;a class="footnote-backref" href="#fnref:â¡" rev="footnote" title="Jump back to footnote 7 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</summary><category term="zh"></category><category term="labcoding"></category></entry><entry><title>CodingÂ åå­¸æåï¼ç¸½ç« </title><link href="//blog.liang2.tw/posts/2016/01/lab-coding-intro/" rel="alternate"></link><updated>2016-01-21T21:00:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2016-01-21:posts/2016/01/lab-coding-intro/</id><summary type="html">&lt;p&gt;Last Edited: Jan,&amp;nbsp;2016&lt;/p&gt;
&lt;p&gt;ï¼å¦æå§å®¹æèª¤ï¼ä½ å¯ä»¥çè¨ï¼æç¨ä»»ä½ç®¡éåè¨´æï¼&lt;/p&gt;
&lt;p&gt;éç¶å¯¦é©å®¤ä¸æ¯æ­£è¦å¯«ç¨å¼çå°æ¹ï¼å¤æ¸çäººä¹æ²æå¯«ç¨å¼ç¶æä¸åäºãä¸éé¨èè¦åæçè³æãæ¨£æ¬æ¸è¶ä¾è¶å¤ï¼å¤å°èªå·±é»è¦è·ä¸åï¼server ä¹è¦è·å¾ä¹çæåï¼å°±æé¡¯ç¤ºåºç¨å¼çéè¦æ§ãå¦ä¸æ¹é¢ï¼ç¾å¨çç ç©¶è¬æ± &lt;em&gt;reproducibility&lt;/em&gt;ï¼å¦æè¦è®èªå·±çåæå¨ä¸å¹´ä¹å¾ä¹è½éç¾ï¼æèè®ä¸çä¸å¶ä»çç ç©¶èä¹è½éç¾çè©±ï¼éè¦åºæ¬çç¨å¼æå·§ã&lt;/p&gt;
&lt;p&gt;éä¸ç³»åçæç« ï¼ç®æ¨è®å¯¦é©å®¤çæ°çï¼ä¸è«æ¯ä¸æ¯ &lt;span class="caps"&gt;CS&lt;/span&gt;&amp;nbsp;èæ¯ï¼é½è½äºè§£ç¶ä»è»é«éç¼æµç¨ååºæ¬æè½ãè»é«éç¼éè¦ä¸äºèæ¯ç¥è­ï¼æè½èéç¼èæ­£å¸¸äº¤æµãéäºèæ¯ç¥è­åæ¬ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;çæå¨ server ä¸å·¥ä½ï¼æ Linux&amp;nbsp;çä½¿ç¨ï¼&lt;/li&gt;
&lt;li&gt;ä¸åå¾å¤äººç¨çè»é«å·¥å·é·ä»éº¼æ¨£&lt;/li&gt;
&lt;li&gt;å¦ä½æèªå·±çç¨å¼èå¥äººåäº«&lt;/li&gt;
&lt;li&gt;å¤äººå±åéç¼&lt;/li&gt;
&lt;li&gt;å¶ä»äººé½æéº¼æ¨£å¯«ç¨å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;éäºå§å®¹å¨å­¸æ ¡èª²ç¨çè¨ç·´ä¸­è¼å°ï¼å°¤å¶æ¯é»æ©èæ¯çè©±å¨å¯«ç¨å¼åæ´çºé¨æ§ï¼ä½éå°ä¸åé·æçè»é«å°æ¡æ¯å¿éçãå¸æå¤§å®¶è½é¤æéäºç¿æ£ã&lt;/p&gt;
&lt;p&gt;éäºä¸»é¡éè¦çç·´å°ä»éº¼ç¨åº¦ï¼è¦äººè¦æºï¼æ·±å¥ä¸å»æ¯ä¸åé½å¤ è±å¹¾åæçæéé½ç ï¼ä½ä»¥ä¸åå¯¦é©å®¤å°é¡ãæè¦å®æçè»é«å°æ¡ä¾èªªé½ä¸å¯¦éï¼è³å°èéä¸é»é½ä¸å¨æãæä»¥åäººè¦ºå¾ï¼æä½æ¨æºå°±æ¯å¨éå°è©²èª²é¡ä¸æçå°æ¹æï¼ãè½ç¥éæéº¼ä¸ééµå­æ¥ãä¸ãæ¥å®ççµæè½çå¾æãã&lt;/p&gt;
&lt;p&gt;ç³»åæåæ¬æ¾å¨ &lt;a href="https://gist.github.com/ccwang002/368025d3c541ed983892"&gt;Github Gist&lt;/a&gt; ä¸ï¼ä½ç¾å¨æèªå·±ç blog&amp;nbsp;äºï¼å°±æ´çå°ééé ä¾¿æ´æ°ã&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#_1"&gt;å­¸ç¿æ¹å¼&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_2"&gt;åï¼çºä»éº¼ä¸å¸¶å¤§å®¶ææææå­¸ï¼&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_3"&gt;çç·´ä¾èªçæ´»ä¸­çå¯¦è¸&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#windows"&gt;çµ¦ Windows&amp;nbsp;ä½¿ç¨è&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#osx"&gt;çµ¦ &lt;span class="caps"&gt;OSX&lt;/span&gt;&amp;nbsp;ä½¿ç¨è&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_4"&gt;æç« ç®é&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h3 id="_1"&gt;å­¸ç¿æ¹å¼&lt;/h3&gt;
&lt;p&gt;æ¯ä¸ç¯é½ææ¯ä¸åä¸»é¡ï¼ä¸»é¡åºä¸æååºä¸äºè³æºãä¸»é¡çæå¾æå­¸ç¿ç®æ¨ï¼æ¹ä¾¿è®ä½ è©ä¼°èªå·±å­¸å°ä»éº¼ç¨åº¦ãå­¸ç¿ç®æ¨æçµ¦ä¸åæç¢ºçä»»åï¼æç¡éè®å®è½è·ï¼å®å®çï¼æ¥å¸¸çæ´»çµåãéå¸¸åªè¦å®æåä¸ãäºåç®æ¨å°±è¡äºï¼éä¹ä¸æ¯åèª²æä»¥ä¸ç¨çµ¦æçãä½å¦æä½ ä¸ä»æçµ¦æççè©±ï¼ææåäº«æä¸»è§çå»ºè­°ãå¤§é¨ä»½çä»»åæ¯æ²æå¯ä¸çæ­£ç¢ºç­æ¡ï¼åªè¦è½è§£æ±ºåé¡é½æ¯å¥½æ¹æ³ã&lt;/p&gt;
&lt;p&gt;ç¸½ä¹ï¼éäºè³æºä¸ç¨å¨çï¼ä»»åä¸ç¨å¨åï¼å¤§å®¶èªå·±æéè¦è±å¤å°æéå¨ä¸åçä¸»é¡ä¸ã&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æä½ åæ­¡çæ±è¥¿ç¡éé½ï¼æ²æ fu&amp;nbsp;çå°±é¨ä¾¿ççæäºå°±å¥½&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ææç¡éæç§é£æåº¦æåï¼ä¸­è±æçè³æºé½æ¾ã&lt;/p&gt;
&lt;h4 id="_2"&gt;åï¼çºä»éº¼ä¸å¸¶å¤§å®¶ææææå­¸ï¼&lt;/h4&gt;
&lt;p&gt;ç°¡å®å°èªªæ²ç©ºãèªçå°èªªï¼å¤§å®¶çå­¸ç¿éåº¦è·åºå­é½ä¸ä¸æ¨£ï¼åæ­¥å­¸åªæ¯æµªè²»åä½çæéã&lt;/p&gt;
&lt;p&gt;æå¤§æ¦æ²æè¾¦æ³ä¸åä¸åé ç®å¸¶å¤§å®¶ç·´ç¿ï¼åºä¸çå¾å¤é£çµåªæ¯æä¾ä¸åå­¸ç¿ççªå£ï¼çæ­£è¦å­¸ä¸å»ï¼é½æ¯è¦è±ä¸å®æéçãæä»¥ä¹ä¸è¦æ±èãåªè¦è®å®éäºæç« å°±æäºâââãéæ¨£çæ³æ³ã&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç½è©±çä¾èªªï¼éäºèæ¯ç¥è­å°±åéæ²çæè½æ¨¹ï¼åºç¤æè½è¦åé»å¥½æè½é»é²éæè½ãè¦æåºç¤æè½é»æ»¿äºåç·´ç­ä¹å¯è½ï¼ä½ä¸å¿è¦ä¸ç´ç·´ç­ï¼å¤§å®¶æªå¿åæ­¡ï¼ç¾å¯¦ä¸­ä¹ä¸è¨±ä½ ç·´ç­ä¸è§£ä»»åã&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸éå§å¯è½ç¢°å°å°åé¡å°±è¦æ¥ï¼æèè¦é£çºæ¥å¾å¤åç¶²é è¢«å°ååãäºæ¬¡æè½ç¨å¾®è§£ç­èªå·±ççåãéåç¾è±¡æ¯éå¸¸æ­£å¸¸çï¼å¦æå¤§å®¶è½æéåæéæ®µæ¯è¼æ«æçææï¼æ¥å¾è¦èªå­¸è»é«åºæ¬ä¸å°±æ²åé¡äºã&lt;/p&gt;
&lt;h3 id="_3"&gt;çç·´ä¾èªçæ´»ä¸­çå¯¦è¸&lt;/h3&gt;
&lt;p&gt;è¦å¾å¿«å°å­¸å¥½ç¨å¼ï¼ææ¨è¦ç·´ç¿æç¨å¼æç¨å¨çæ´»ä¸­ãä¾å¦ç¨æå­å½ä»¤åä¾ä¸è¼æªæ¡ï¼æèªå·±ç­é»è®æ linux&amp;nbsp;æ¡é¢ç³»çµ±ï¼ç·´ç¿èªå·±ç·¨è­¯è»é«ãè§£æ±ºåå¼å®è£ççæ³ãè®èªå·±çé»è¦æçºä¸åèªå·±è½æ¥åçè»é«éç¼ç°å¢ï¼ä¸¦ç¶å¸¸çä½¿ç¨å®ï¼å°±è½éä½å°å¯«ç¨å¼çéçèä¸ç¥ææªæã&lt;/p&gt;
&lt;p&gt;ä¸é¢çæ¹æ³å¯è½ç¨é£ä¸äºï¼è² ææ¯è¼å°çå¯ä»¥éå§åãæèç·´ç¿ããæèç·´ç¿åå«å»æ³çæ´»ä¸­çå¤§å°äºè©²æéº¼å¯«ç¨å¼ä¾æ§å¶ãä¾å¦æè©²æéº¼è¨­è¨ä¸åé»æ¢¯ç³»çµ±ï¼èæ¸æéº¼åç¾å¤§å®¶çåæï¼åªè¦å¤§æ¦æ³ä¸æ³å°±å¥½äºï¼æ³ä¸åºä¾ä¹ä¸æææ¨£ï¼ä¹ä¸ç¨ç¹å¥æ¥è³æãéä¸æ®µæéå°ç¨å¼ç sense&amp;nbsp;ä¹æææã&lt;/p&gt;
&lt;p&gt;å¦æéè¦æ´ç¡¬æ´¾çå­¸ç¿æ¹å¼ï¼ä¸å¦¨æèªå·±é»è¦å®è£çè»é«çæºå§ç¢¼é½æ¿åºä¾çä¸ä¸ï¼å å¥å¹¾åèªå·±å¹³å¸¸ç¨çè»é«çå°æ¡ä¾ä¿®æ¹å®ï¼è®å®æ´å°åé¡æ´å¤åè½ï¼ä¸è¬å« contributeï¼ãä¹å¯ä»¥æå¯¦é©å®¤æç¨å°çå·¥å·çåå§ç¢¼æ¿åºä¾çä¸ä¸ï¼ä¾å¦&amp;nbsp;sratoolkitãcutadaptï¼ççèªå·±è½ä¸è½è®æå¥äººçç¨å¼ç¢¼ã&lt;/p&gt;
&lt;h3 id="windows"&gt;çµ¦ Windows&amp;nbsp;ä½¿ç¨è&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å»ºè­°å¤§å®¶æ³è¾¦æ³è£å Linuxï¼æç¨ Macï¼ãå¦æä¸æ³åä»£æèªå·±ç Windows ç°å¢è©±ï¼å¯ä»¥å®è£ VirtualBox è£åèæ¬ç Linuxï¼æèå¨ Amazon ç­ &lt;span class="caps"&gt;VPS&lt;/span&gt;&amp;nbsp;æ¶ä¸å°èæ¬ä¸»æ©ã&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Windows å çºå°åå½¢ä»é¢ï¼&lt;span class="caps"&gt;GUI&lt;/span&gt;ï¼è¨­è¨çå¾å¥½ï¼ä¹ä¸å®¹æè®ä½¿ç¨èç¨å½ä»¤åæ¨¡å¼ï¼terminal, console)ãéç¶ Windows ä¸æå command promptãPowershell ä¹é¡çç°å¢ï¼ä½é½å¾é£ç¨å®ä¾ææ§æ´åç³»çµ±ãèä¸å®æå¾éª¨å­å°±è· Linux ä¸ä¸æ¨£ï¼æä»¥ç¸éçæä»¤ä¸å¥½å¨ç¶²ä¸çæå­¸æç« ä¸­æ¾å°ï¼èå¤æ¸ Windows çéç¼èä¹ä¸åæ­¡ç¨&amp;nbsp;terminalã&lt;/p&gt;
&lt;p&gt;å¦ä¸æ¹é¢ï¼å¤§å®¶å° Visual Studio çå°è±¡é½æ¯è¦æ¶é¢ç&lt;sup id="fnref:è¨»1"&gt;&lt;a class="footnote-ref" href="#fn:è¨»1" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt;ï¼éæ¯ Windows ä¸æå®æ´æå¥½ç¨çéç¼ç°å¢ï¼ä¸æ³ä»è²»çææ³ä¸å¯è½å°±æè¦ºå¾ãå¯«ç¨å¼åæ»¿éç¤ãï¼æ´ä½æ³ &lt;span class="caps"&gt;VS&lt;/span&gt; ä¹æ¯åå½¢åçç·¨è¼¯å¨ï¼ä¹æä¸äºè§£èå¾éä½çæ¹å¼ãå¸é¢çéæºè»é«å¤åå¨ *nix ä¸éç¼ï¼å° Windows&amp;nbsp;æ¯æ´åº¦å·®ä¹å æ·±éåéç¤ï¼ãæ³è¦èªå·±è£ä½é½ä¸å éå¶åå¾å®¹æå¤±æãï¼&lt;/p&gt;
&lt;p&gt;ä¸ç¨ terminal çå£èæ¯å¾é£æ³åèªå·±ç³»çµ±ä¸­çè»é«çºä»éº¼è½éä½ãæè¦ºè¦å¯«åæ &lt;span class="caps"&gt;GUI&lt;/span&gt;&amp;nbsp;çç¨å¼é½è¦å¾å²å®³ï¼è·èªå·±å­¸éçå¯«ç¨å¼é½ä¸ä¸æ¨£ãä½å¯¦è³ªä¸æ¯æ²æå¤ªå¤åå¥çï¼åªæ¯è¦å®æä¸åè½å®è£å¨ç³»çµ±ä¸­çè¦çªè»é«ï¼éè¦çæ­¥é©å¤å¾å¤ï¼ä¸è¬ç°¡å®çå°æ¡é½ä¸æå°é£åéæ®µã&lt;/p&gt;
&lt;h3 id="osx"&gt;çµ¦ &lt;span class="caps"&gt;OSX&lt;/span&gt;&amp;nbsp;ä½¿ç¨è&lt;/h3&gt;
&lt;p&gt;Mac &lt;span class="caps"&gt;OSX&lt;/span&gt; ä½¿ç¨èä¹æéæ¨£çç¾è±¡ï¼ä½å çº &lt;span class="caps"&gt;OSX&lt;/span&gt; å¨åºå±¤ç¨çæ¯è· FreeBSD å¾ç¸ä¼¼ï¼è FreeBSD è· Linux ç¸ä¼¼ï¼æä»¥å®ç terminal ç°å¢æ¯å¾å®æ´çãç¾å¨è»é«éç¼èå¾å¤äººç¨ &lt;span class="caps"&gt;OSX&lt;/span&gt;ï¼å æ­¤ç¶²è·¯ä¸ Linuxã&lt;span class="caps"&gt;OSX&lt;/span&gt;&amp;nbsp;è³æºé½å¾å¤ï¼å©èçç¶é©å¸¸è½èªç¶å°ç§»æ¤ã&lt;/p&gt;
&lt;p&gt;å¦ä½å¨ &lt;span class="caps"&gt;OSX&lt;/span&gt; ä¸éç¼ç¨å¼ï¼å¯ä»¥åè&lt;a href="//blog.liang2.tw/posts/2016/01/lab-coding-appendix-osx-env/"&gt;éé 0&lt;/a&gt;&amp;nbsp;çç­è¨ï¼ä½å§å®¹å¾ä¸»è§ï¼ä¸æ¯æ¯åäººé½æåæéæ¨£ç¨ã&lt;/p&gt;
&lt;h2 id="_4"&gt;æç« ç®é&lt;/h2&gt;
&lt;p&gt;å¯«ä¸å¯«å§å®¹ä¹è®å¾è »å¤çï¼æä»¥æå®åæäºå¹¾ç¯æç« ï¼è«æç§æ¸å­é åºé±è®ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="//blog.liang2.tw/posts/2016/01/lab-coding-linux/"&gt;1&amp;nbsp;Linux&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="//blog.liang2.tw/posts/2016/01/lab-coding-text-editing/"&gt;2 Text Editing (Markdown, Text&amp;nbsp;Editor)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="//blog.liang2.tw/posts/2016/01/lab-coding-version-control/"&gt;3 Version Control&amp;nbsp;(Git)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="//blog.liang2.tw/posts/2016/01/lab-coding-python/"&gt;4&amp;nbsp;Python&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="//blog.liang2.tw/posts/2016/01/lab-coding-appendix-osx-env/"&gt;A0 &lt;span class="caps"&gt;OSX&lt;/span&gt; Development&amp;nbsp;Environment&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href="//blog.liang2.tw/posts/2016/01/lab-coding-appendix-bioinfo-python/"&gt;A1 Python in&amp;nbsp;Bioinformatics&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æèï¼ç¨ &lt;a href="/tag/labcoding.html"&gt;labcoding&lt;/a&gt; éå tag&amp;nbsp;ä¹å¯ä»¥æ¾å°ææçæç« ã&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn:è¨»1"&gt;
&lt;p&gt;Visual Studio èª 2013 å¾æ &lt;a href="https://www.visualstudio.com/en-us/news/vs2013-community-vs.aspx"&gt;Community&lt;/a&gt; çæ¬ï¼åè²»ä½å§å®¹è Professional çæ¬å¤§è´ç¡ç°ï¼æä»¥æªä¾è¦æ C/C++ 32/64bit Compiler ææ´å®¹æãä½å¤æ¸çéæºè»é«éæ²è·é²ï¼æä»¥å¾å¤éå¨ç¨èç &lt;span class="caps"&gt;VS&lt;/span&gt; çæ¬ï¼å°±è¦ä»è²»ï¼ï¼éåç¾è±¡éææçºä¸é£ãå­¸æ ¡é½æè²·ã&amp;#160;&lt;a class="footnote-backref" href="#fnref:è¨»1" rev="footnote" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</summary><category term="zh"></category><category term="labcoding"></category></entry><entry><title>NumpyÂ Indexing</title><link href="//blog.liang2.tw/posts/2016/01/numpy-index/" rel="alternate"></link><updated>2016-01-18T02:00:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2016-01-18:posts/2016/01/numpy-index/</id><summary type="html">&lt;p&gt;åå¹¾å¤©éè¦å¯« &lt;a href="http://docs.scipy.org/doc/numpy/index.html"&gt;numpy&lt;/a&gt; æï¼çªç¶ç¼ç¾è· &lt;a href="http://pandas.pydata.org/"&gt;pandas&lt;/a&gt; å¨ indexing&amp;nbsp;çè¡çºè »ä¸ä¸æ¨£çãææè¦ºæªä¾ä¸å®æå¿è¨ï¼åç­è¨èµ·ä¾ã&lt;/p&gt;
&lt;p&gt;å°±ç¨æäºä¾èä¾å§ï¼æç¶­åºç¾ç§ä¸&lt;a href="https://zh.wikipedia.org/wiki/2016%E5%B9%B4%E4%B8%AD%E8%8F%AF%E6%B0%91%E5%9C%8B%E7%AB%8B%E6%B3%95%E5%A7%94%E5%93%A1%E9%81%B8%E8%88%89"&gt;åæ¿é»¨ 2016 å¹´èºç£ç«æ³å§å¡æåæ¸&lt;/a&gt;çè¡¨æ ¼æä¸ä¾ãèçåå§è³æçç¨å¼æ¾å°ææ«ï¼åå®å¤§æ¦é·éæ¨£ï¼&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="left"&gt;&lt;/th&gt;
&lt;th align="right"&gt;åå&lt;/th&gt;
&lt;th align="right"&gt;åä½æ°&lt;/th&gt;
&lt;th align="right"&gt;ä¸åå&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="left"&gt;ä¸­ååæ°é»¨&lt;/td&gt;
&lt;td align="right"&gt;72&lt;/td&gt;
&lt;td align="right"&gt;5&lt;/td&gt;
&lt;td align="right"&gt;33&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;æ°ä¸»é²æ­¥é»¨&lt;/td&gt;
&lt;td align="right"&gt;60&lt;/td&gt;
&lt;td align="right"&gt;2&lt;/td&gt;
&lt;td align="right"&gt;34&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;å°ç£åçµè¯ç&lt;/td&gt;
&lt;td align="right"&gt;2&lt;/td&gt;
&lt;td align="right"&gt;0&lt;/td&gt;
&lt;td align="right"&gt;15&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;è¦ªæ°é»¨&lt;/td&gt;
&lt;td align="right"&gt;6&lt;/td&gt;
&lt;td align="right"&gt;1&lt;/td&gt;
&lt;td align="right"&gt;16&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;ç¡é»¨åçµè¯ç&lt;/td&gt;
&lt;td align="right"&gt;0&lt;/td&gt;
&lt;td align="right"&gt;1&lt;/td&gt;
&lt;td align="right"&gt;7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;æ°åé»¨&lt;/td&gt;
&lt;td align="right"&gt;13&lt;/td&gt;
&lt;td align="right"&gt;1&lt;/td&gt;
&lt;td align="right"&gt;10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;ç¶ é»¨ç¤¾ææ°ä¸»é»¨è¯ç&lt;/td&gt;
&lt;td align="right"&gt;11&lt;/td&gt;
&lt;td align="right"&gt;0&lt;/td&gt;
&lt;td align="right"&gt;6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;ä¸­è¯çµ±ä¸ä¿é²é»¨&lt;/td&gt;
&lt;td align="right"&gt;14&lt;/td&gt;
&lt;td align="right"&gt;0&lt;/td&gt;
&lt;td align="right"&gt;10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;æä»£åé&lt;/td&gt;
&lt;td align="right"&gt;12&lt;/td&gt;
&lt;td align="right"&gt;0&lt;/td&gt;
&lt;td align="right"&gt;6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;å¤§ææ²æ¹è¯ç&lt;/td&gt;
&lt;td align="right"&gt;12&lt;/td&gt;
&lt;td align="right"&gt;0&lt;/td&gt;
&lt;td align="right"&gt;6&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="pandas-indexing"&gt;Pandas&amp;nbsp;indexing&lt;/h3&gt;
&lt;p&gt;Pandas indexing è±ä¿å°ç¨&lt;a href="http://pandas.pydata.org/pandas-docs/stable/indexing.html"&gt;ä¸&lt;/a&gt;ã&lt;a href="http://pandas.pydata.org/pandas-docs/stable/advanced.html"&gt;å©&lt;/a&gt;é ä¹ä»ç´¹ä¸å®ã&lt;/p&gt;
&lt;p&gt;ä¸éä»å¤©åªæ³èªªæéå©åç¶­åº¦ä»¥ä¸ç&amp;nbsp;indexingï¼ä¾å¦æ³çåæ°é»¨ãæ°é²é»¨ãæä»£åéååèä¸ååçæåå¥½äºï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ä¸­ååæ°é»¨&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;æ°ä¸»é²æ­¥é»¨&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;æä»£åé&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; 
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ä¸åå&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¸è¿°å©åæ¹æ³é½è½æ¿å°ä¸é¨ä»½çè¡¨æ ¼ã&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="left"&gt;&lt;/th&gt;
&lt;th align="right"&gt;åå&lt;/th&gt;
&lt;th align="right"&gt;ä¸åå&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="left"&gt;ä¸­ååæ°é»¨&lt;/td&gt;
&lt;td align="right"&gt;72&lt;/td&gt;
&lt;td align="right"&gt;33&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;æ°ä¸»é²æ­¥é»¨&lt;/td&gt;
&lt;td align="right"&gt;60&lt;/td&gt;
&lt;td align="right"&gt;34&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;æä»£åé&lt;/td&gt;
&lt;td align="right"&gt;12&lt;/td&gt;
&lt;td align="right"&gt;6&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="numpy-indexing"&gt;Numpy&amp;nbsp;indexing&lt;/h3&gt;
&lt;p&gt;ä¸æè­å°ä»¥çº &lt;a href="http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#arrays-indexing"&gt;numpy indexing&lt;/a&gt; ææ¯ä¸æ¨£çï¼ç¢ç« pandas åºå±¤å°±æ¯ä¸å numpy&amp;nbsp;arrayã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;arr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;[:&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="go"&gt;array([[72,  5, 33],&lt;/span&gt;
&lt;span class="go"&gt;       [60,  2, 34],&lt;/span&gt;
&lt;span class="go"&gt;       [ 2,  0, 15],&lt;/span&gt;
&lt;span class="go"&gt;       [ 6,  1, 16],&lt;/span&gt;
&lt;span class="go"&gt;       [ 0,  1,  7]])&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
&lt;span class="gp"&gt;...&lt;/span&gt;
&lt;span class="go"&gt;IndexError: shape mismatch: indexing arrays could not be broadcast &lt;/span&gt;
&lt;span class="go"&gt;together with shapes (3,) (2,) &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åå»ç&lt;a href="http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#arrays-indexing"&gt;å®æ¹æä»¶&lt;/a&gt;ææ³èµ·ä¾ï¼ numpy éæåæ¯å¦åçµ¦å® (x, y)&amp;nbsp;åº§æ¨éæ¨£ï¼ä¸ååæåç´ é¸åºä¾ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
&lt;span class="go"&gt;[72, 2, 6]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç°¡å®çæ¹å¼æ¯åå©æ¬¡é¸ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;:][:,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½éæ¨£ numpy æå³å©æ¬¡ copy&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt; åä¾ï¼è³æå¾å¤§çæåå°±æ²æçãæä»¥è¦æéº¼åå¢ï¼&lt;/p&gt;
&lt;p&gt;åè &lt;a href="http://stackoverflow.com/a/30918530"&gt;Stack Overflow&lt;/a&gt; ä¸çåç­ï¼åºä¸å¹¾ç¨®æ¹å¼é½å¯ä»¥ãæç°¡å®çæ¹æ³å°±æ¯éé &lt;a href="http://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.ix_.html#numpy.ix_"&gt;numpy.ix_()&lt;/a&gt;ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ix_&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;])]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦æäºè§£ numpy broadcasting&amp;nbsp;æ©å¶çè©±ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# index must be numpy array&lt;/span&gt;
&lt;span class="n"&gt;cols&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;rows&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;cols&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;newaxis&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;rows&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;# np.newaxis is None&lt;/span&gt;
&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;cols&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;rows&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æèç´æ¥æææåå«ç index&amp;nbsp;å¼é½ååºä¾ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;indices&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;meshgrid&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; 
    &lt;span class="n"&gt;indexing&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ij&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;indices&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ´çä¸ä¸ï¼éåªè¦ä¸æ®µæéæ²ç¨å°±å¸¸æå¿è¨ã&lt;/p&gt;
&lt;h3 id="_1"&gt;ç¶­åºåå§è³æèç&lt;/h3&gt;
&lt;p&gt;Wikipedia åå§è³æå¾&lt;a href="https://zh.wikipedia.org/wiki/2016%E5%B9%B4%E4%B8%AD%E8%8F%AF%E6%B0%91%E5%9C%8B%E7%AB%8B%E6%B3%95%E5%A7%94%E5%93%A1%E9%81%B8%E8%88%89"&gt;éè£¡&lt;/a&gt;åå¾ï¼éå°±æ¯å±ç¾ pandas èçè½åçæåäºãæ°çæ¬å°å­ä¸²èçæä¾æ´å¤åè½ï¼é½è®æå¿äºåºä¸ç numpy å° unicode æ¯æ´å¶å¯¦ä¸æéº¼æ¨£ &lt;span class="caps"&gt;XD&lt;/span&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;urllib.parse&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;quote_plus&lt;/span&gt;

&lt;span class="n"&gt;dfs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_html&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;https://zh.wikipedia.org/wiki/&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; 
    &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;quote_plus&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016å¹´ä¸­è¯æ°åç«æ³å§å¡é¸è&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;dfs&lt;/span&gt; 
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ç«æ³å§å¡æ¿é»¨æååé¡&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Data cleaning&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;:]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;æ¿é»¨&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;æ¿é»¨&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="s1"&gt;r&amp;#39;\[(è¨» |)\d+\]&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;æ¿é»¨&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ï¼&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;astype&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="footnote"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;å¨éææ³è³ææè¢« copy å³åä¾ï¼ä½å¦ææ¯ &lt;code&gt;start:end:step&lt;/code&gt; ç simple indexing å°±åªæåå³ viewã&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</summary><category term="zh"></category><category term="python"></category><category term="numpy"></category><category term="pandas"></category></entry><entry><title>Plot Sequencing Depth withÂ Gviz</title><link href="//blog.liang2.tw/posts/2016/01/plot-seq-depth-gviz/" rel="alternate"></link><updated>2016-01-15T23:50:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2016-01-15:posts/2016/01/plot-seq-depth-gviz/</id><summary type="html">&lt;p&gt;&lt;em&gt;&lt;strong&gt;&lt;span class="caps"&gt;TL&lt;/span&gt;;&lt;span class="caps"&gt;DR&lt;/span&gt;&lt;/strong&gt; Plot exome sequencing depth and coverage with genome annotation using Gviz in R. Then apply detail control on Gviz annotation track&amp;nbsp;displaying.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;This is an extending post from &lt;a href="//blog.liang2.tw/posts/2015/12/biocondutor-genomic-data/"&gt;Genomic Data Processing in Bioconductor&lt;/a&gt;, though I haven&amp;rsquo;t finished reading all the reference in that post. The background knowledge of this post is basic understanding of how to deal with annotation and genome reference in Bioconductor/R. If you don&amp;rsquo;t deal with genome annotations in R before, you should find some time learning it anyway, a truly life&amp;nbsp;saver.&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#convert-sequencing-depth-to-bedgraph-format"&gt;Convert sequencing depth to BedGraph&amp;nbsp;format&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#plot-depth-in-gviz"&gt;Plot depth in Gviz&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#first-gviz-track"&gt;First Gviz&amp;nbsp;track&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#add-genome-axis"&gt;Add genome&amp;nbsp;axis&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#add-annotation"&gt;Add&amp;nbsp;annotation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#plot-fine-tune"&gt;Plot fine tune&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#genome-annotation-query-in-bioconductorr"&gt;Genome annotation query in Bioconductor/R&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#via-transcripts"&gt;via&amp;nbsp;transcripts()&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#via-exonsby"&gt;via&amp;nbsp;exonsBy()&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#show-only-the-annotations-of-certain-genes"&gt;Show only the annotations of certain&amp;nbsp;genes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#display-gene-symbols-at-annotation-track"&gt;Display gene symbols at annotation&amp;nbsp;track&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#summary"&gt;Summary&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#supplementary-plot-bam-files-directly"&gt;Supplementary - Plot &lt;span class="caps"&gt;BAM&lt;/span&gt; files directly&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#fancier-alignment-display"&gt;Fancier alignment&amp;nbsp;display&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;I got the chance trying new tricks today when I and other lab members were analyzing our human cancer exome sequencing data. The results were a bunch of &lt;span class="caps"&gt;BAM&lt;/span&gt; files aligned by &lt;a href="https://github.com/lh3/bwa"&gt;&lt;span class="caps"&gt;BWA&lt;/span&gt;-&lt;span class="caps"&gt;MEM&lt;/span&gt;&lt;/a&gt; using reference&amp;nbsp;hg19.&lt;/p&gt;
&lt;p&gt;We want to see how was the sequencing depth and the coverage of all exons designed to be sequenced. Roughly, this can be done in the genome viewer such as &lt;a href="https://www.broadinstitute.org/igv/"&gt;&lt;span class="caps"&gt;IGV&lt;/span&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2016/01/plot-seq-depth-gviz/pics/seqdepth_IGV.png"/&gt;
  &lt;p class="caption center"&gt;Visualize sequencing depth in &lt;span class="caps"&gt;IGV&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;&lt;span class="caps"&gt;IGV&lt;/span&gt; is good for daily research, but when it comes to customization, there aren&amp;rsquo;t many options. And if the visualization is aimed for publishing, one might want the figure to be vectorized and, more importantly, &lt;em&gt;reproducible&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Therefore, combining with what I learnt in &lt;a href="//blog.liang2.tw/posts/2015/12/biocondutor-genomic-data/"&gt;Genomic Data Processing in Bioconductor&lt;/a&gt;, I tried to plot the sequencing depth in R with &lt;a href="https://bioconductor.org/packages/release/bioc/html/Gviz.html"&gt;Gviz&lt;/a&gt;. I thought learning Gviz will be demanding, since its vignette has 80 pages and the function documentation are &lt;a href="http://rpackages.ianhowson.com/bioc/Gviz/man/GeneRegionTrack-class.html"&gt;scarily long spells&lt;/a&gt;. But both of them turned out to be &lt;em&gt;really&lt;/em&gt; helpful and informative, especially when trying to tune its behavior. Figures produced by Gviz are aesthetically pleasing, and Gviz has many features as well (still trying). I&amp;rsquo;m glad that I gave it a&amp;nbsp;shot.&lt;/p&gt;
&lt;p&gt;If you want to follow the code yourself, any human &lt;span class="caps"&gt;BAM&lt;/span&gt; alignment files will do. For example, the &lt;span class="caps"&gt;GEO&lt;/span&gt; dataset &lt;a href="http://dev.3dvcell.org/geo/query/acc.cgi?acc=GSE48215"&gt;&lt;span class="caps"&gt;GSE48215&lt;/span&gt;&lt;/a&gt; contains exome sequencing of breast cancer cell&amp;nbsp;lines.&lt;/p&gt;
&lt;h2 id="convert-sequencing-depth-to-bedgraph-format"&gt;Convert sequencing depth to BedGraph&amp;nbsp;format&lt;/h2&gt;
&lt;p&gt;After a quick search, Gviz&amp;rsquo;s &lt;a href="http://rpackages.ianhowson.com/bioc/Gviz/man/DataTrack-class.html"&gt;DataTrack&lt;/a&gt; accepts BedGraph format. This format can display any numerical value of chromosome ranges, shown as&amp;nbsp;follows,&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="left"&gt;chromosome&lt;/th&gt;
&lt;th&gt;start&lt;/th&gt;
&lt;th&gt;end&lt;/th&gt;
&lt;th align="right"&gt;value&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="left"&gt;chr1&lt;/td&gt;
&lt;td&gt;10,051&lt;/td&gt;
&lt;td&gt;10,093&lt;/td&gt;
&lt;td align="right"&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;chr1&lt;/td&gt;
&lt;td&gt;10,093&lt;/td&gt;
&lt;td&gt;10,104&lt;/td&gt;
&lt;td align="right"&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&amp;hellip;&lt;/td&gt;
&lt;td&gt;&amp;hellip;&lt;/td&gt;
&lt;td&gt;&amp;hellip;&lt;/td&gt;
&lt;td align="right"&gt;&amp;hellip;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;So we need to convert the alignment result as BedGraph format, which can be done by &lt;a href="http://bedtools.readthedocs.org/en/latest/content/tools/genomecov.html"&gt;BEDTools&amp;rsquo; genomecov&lt;/a&gt; command. On BEDTools&amp;rsquo; documentation, it notes that the &lt;span class="caps"&gt;BAM&lt;/span&gt; file should be&amp;nbsp;sorted. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;bedtools genomecov -bg -ibam myseq.bam &amp;gt; myseq.bedGraph
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The plain text BedGraph can be huge, pipe&amp;rsquo;d with gzip will reduce file size to around 30% of the&amp;nbsp;original.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;bedtools genomecov -bg -ibam myseq.bam &lt;span class="p"&gt;|&lt;/span&gt; gzip &amp;gt; myseq.bedGraph.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="plot-depth-in-gviz"&gt;Plot depth in&amp;nbsp;Gviz&lt;/h2&gt;
&lt;p&gt;R packages of human genome annotations (&lt;a href="http://bioconductor.org/packages/release/data/annotation/html/Homo.sapiens.html"&gt;Homo.sapiens&lt;/a&gt;) and &lt;a href="https://bioconductor.org/packages/release/bioc/html/Gviz.html"&gt;Gviz&lt;/a&gt; itself are required. Also, &lt;a href="https://cran.r-project.org/web/packages/data.table/index.html"&gt;data.table&lt;/a&gt; gives an impressed speed at reading text tables so is recommended to use. During the analysis, I happened to know that data.table supports &lt;a href="https://github.com/Rdatatable/data.table/issues/717"&gt;reading gzip&amp;rsquo;d file through pipe&lt;/a&gt;, which makes it more&amp;nbsp;awesome.&lt;/p&gt;
&lt;h3 id="first-gviz-track"&gt;First Gviz&amp;nbsp;track&lt;/h3&gt;
&lt;p&gt;We should first start at reading our sequencing depth as BedGraph format and plot&amp;nbsp;it.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;library&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;data.table&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kn"&gt;library&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;Gviz&lt;span class="p"&gt;)&lt;/span&gt;

bedgraph_dt &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; fread&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="s"&gt;&amp;#39;./coverage.bedGraph&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    col.names &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kt"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;chromosome&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;start&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;end&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Specifiy the range to plot&lt;/span&gt;
thechr &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;chr17&amp;quot;&lt;/span&gt;
st &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="m"&gt;41176e3&lt;/span&gt;
en &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="m"&gt;41324e3&lt;/span&gt;

bedgraph_dt_one_chr &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; bedgraph_dt&lt;span class="p"&gt;[&lt;/span&gt;chromosome &lt;span class="o"&gt;==&lt;/span&gt; thechr&lt;span class="p"&gt;]&lt;/span&gt;
dtrack &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; DataTrack&lt;span class="p"&gt;(&lt;/span&gt;
    range &lt;span class="o"&gt;=&lt;/span&gt; bedgraph_dt_one_chr&lt;span class="p"&gt;,&lt;/span&gt;
    type &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    genome &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;hg19&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    name &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Seq. Depth&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
plotTracks&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="kt"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;dtrack&lt;span class="p"&gt;),&lt;/span&gt;
    from &lt;span class="o"&gt;=&lt;/span&gt; st&lt;span class="p"&gt;,&lt;/span&gt; to &lt;span class="o"&gt;=&lt;/span&gt; en
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So we read the sequencing depth data, create a Gviz &lt;code&gt;DataTrack&lt;/code&gt; holding the subset of our data on chr17, then plot Gviz tracks by &lt;code&gt;plotTracks&lt;/code&gt; (though we only made one here) within a given chromosome region. Here is what we&amp;nbsp;got.&lt;/p&gt;
&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2016/01/plot-seq-depth-gviz/pics/seqdepth_one_track.png"/&gt;
&lt;/div&gt;

&lt;h3 id="add-genome-axis"&gt;Add genome&amp;nbsp;axis&lt;/h3&gt;
&lt;p&gt;The figure is a bit weird and lack of information without the genomic&amp;nbsp;location. &lt;/p&gt;
&lt;p&gt;Adding genomic location can be done automatically by Gviz through a new track &lt;code&gt;GenomeAxisTrack&lt;/code&gt;. Also, we&amp;rsquo;d like to show which region of chromosome we are at. This can be done by adding another track, &lt;code&gt;IdeogramTrack&lt;/code&gt;, to show the chromosome ideogram. Note that the latter track will download cytoband data from &lt;span class="caps"&gt;UCSC&lt;/span&gt; so the given genome must have a valid&amp;nbsp;name.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;itrack &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; IdeogramTrack&lt;span class="p"&gt;(&lt;/span&gt;
    genome &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hg19&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; chromosome &lt;span class="o"&gt;=&lt;/span&gt; thechr
&lt;span class="p"&gt;)&lt;/span&gt;
gtrack &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; GenomeAxisTrack&lt;span class="p"&gt;()&lt;/span&gt;

plotTracks&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="kt"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;itrack&lt;span class="p"&gt;,&lt;/span&gt; gtrack&lt;span class="p"&gt;,&lt;/span&gt; dtrack&lt;span class="p"&gt;),&lt;/span&gt;
    from &lt;span class="o"&gt;=&lt;/span&gt; st&lt;span class="p"&gt;,&lt;/span&gt; to &lt;span class="o"&gt;=&lt;/span&gt; en
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2016/01/plot-seq-depth-gviz/pics/seqdepth_with_loc.png"/&gt;
&lt;/div&gt;

&lt;p&gt;Better now&amp;nbsp;:)&lt;/p&gt;
&lt;h3 id="add-annotation"&gt;Add&amp;nbsp;annotation&lt;/h3&gt;
&lt;p&gt;Since we are using exome sequencing, the curve of sequencing depth only makes senses when combined with the transcript&amp;nbsp;annotations. &lt;/p&gt;
&lt;p&gt;Gviz has &lt;code&gt;GeneRegionTrack&lt;/code&gt; to extract annotation from the R annotation packages. Package Homo.sapiens includes the gene annotation package using &lt;span class="caps"&gt;UCSC&lt;/span&gt; knownGene database. Adding this new track and we will have annotation on our&amp;nbsp;plot.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;library&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;TxDb.Hsapiens.UCSC.hg19.knownGene&lt;span class="p"&gt;)&lt;/span&gt;
txdb &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; TxDb.Hsapiens.UCSC.hg19.knownGene

grtrack &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; GeneRegionTrack&lt;span class="p"&gt;(&lt;/span&gt;
    txdb&lt;span class="p"&gt;,&lt;/span&gt;
    chromosome &lt;span class="o"&gt;=&lt;/span&gt; thechr&lt;span class="p"&gt;,&lt;/span&gt; start &lt;span class="o"&gt;=&lt;/span&gt; st&lt;span class="p"&gt;,&lt;/span&gt; end &lt;span class="o"&gt;=&lt;/span&gt; en&lt;span class="p"&gt;,&lt;/span&gt;
    showId &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;TRUE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    name &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Gene Annotation&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;

plotTracks&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="kt"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;itrack&lt;span class="p"&gt;,&lt;/span&gt; gtrack&lt;span class="p"&gt;,&lt;/span&gt; dtrack&lt;span class="p"&gt;,&lt;/span&gt; grtrack&lt;span class="p"&gt;),&lt;/span&gt;
    from &lt;span class="o"&gt;=&lt;/span&gt; st&lt;span class="p"&gt;,&lt;/span&gt; to &lt;span class="o"&gt;=&lt;/span&gt; en
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2016/01/plot-seq-depth-gviz/pics/seqdepth_with_annotation.png"/&gt;
&lt;/div&gt;

&lt;p&gt;The plot should now be as informative as what we can get from the &lt;span class="caps"&gt;IGV&lt;/span&gt;. In fact, Gviz can plot the alignment result too. It can read the &lt;span class="caps"&gt;BAM&lt;/span&gt; file directly and show a more detailed coverage that matches what &lt;span class="caps"&gt;IGV&lt;/span&gt; can do. I&amp;rsquo;ll leave that part at the end of this&amp;nbsp;post. &lt;/p&gt;
&lt;p&gt;So far we&amp;rsquo;ve shown the sequencing depth of some chromosome region with annotation. However, there still leave something to be desired, mostly about the&amp;nbsp;annotation:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Can we show only the annotation of certain&amp;nbsp;genes?&lt;/li&gt;
&lt;li&gt;knownGene&amp;rsquo;s identifier is barely meaningless, can we show the gene symbol&amp;nbsp;instead?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So here comes the second part, annotation fine&amp;nbsp;tuning.&lt;/p&gt;
&lt;h2 id="plot-fine-tune"&gt;Plot fine&amp;nbsp;tune&lt;/h2&gt;
&lt;p&gt;Say, we only care about gene &lt;em&gt;&lt;span class="caps"&gt;BRCA1&lt;/span&gt;&lt;/em&gt;. So we need to get its location, or specifically, the genomic range that cover all &lt;em&gt;&lt;span class="caps"&gt;BRCA1&lt;/span&gt;&lt;/em&gt; isoforms. In the following example, I will demonstrate the Gviz&amp;rsquo;s annotation fine&amp;nbsp;tuning.&lt;/p&gt;
&lt;h3 id="genome-annotation-query-in-bioconductorr"&gt;Genome annotation query in&amp;nbsp;Bioconductor/R&lt;/h3&gt;
&lt;p&gt;If you are not familiar with how to query annotations in Bioconductor, it&amp;rsquo;s easier to think by breaking our goal of finding &lt;em&gt;&lt;span class="caps"&gt;BRCA1&lt;/span&gt;&lt;/em&gt;&amp;lsquo;s ranges into two&amp;nbsp;steps:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Get the transcript&amp;nbsp;IDs&lt;/li&gt;
&lt;li&gt;Query the transcript locations by their&amp;nbsp;IDs&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Getting transcript IDs given their gene symbol is a &lt;code&gt;select()&lt;/code&gt; on OrganismDb&amp;nbsp;object,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Get all transcript IDs of gene BRCA1&lt;/span&gt;
BRCA1_txnames &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; select&lt;span class="p"&gt;(&lt;/span&gt;
    Homo.sapiens&lt;span class="p"&gt;,&lt;/span&gt;
    keys &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;BRCA1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; keytype &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;SYMBOL&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    columns &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kt"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ENTREZID&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;TXNAME&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;TXNAME
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt; &lt;/span&gt;BRCA1_txnames
&lt;span class="go"&gt; [1] &amp;quot;uc010whl.2&amp;quot; &amp;quot;uc002icp.4&amp;quot; &amp;quot;uc010whm.2&amp;quot; &amp;quot;uc002icu.3&amp;quot;&lt;/span&gt;
&lt;span class="go"&gt; [5] &amp;quot;uc010cyx.3&amp;quot; &amp;quot;uc002icq.3&amp;quot; &amp;quot;uc002ict.3&amp;quot; &amp;quot;uc010whn.2&amp;quot;&lt;/span&gt;
&lt;span class="go"&gt; [9] &amp;quot;uc010who.3&amp;quot; &amp;quot;uc010whp.2&amp;quot; &amp;quot;uc010whq.1&amp;quot; &amp;quot;uc002idc.1&amp;quot;&lt;/span&gt;
&lt;span class="go"&gt;[13] &amp;quot;uc010whr.1&amp;quot; &amp;quot;uc002idd.3&amp;quot; &amp;quot;uc002ide.1&amp;quot; &amp;quot;uc010cyy.1&amp;quot;&lt;/span&gt;
&lt;span class="go"&gt;[17] &amp;quot;uc010whs.1&amp;quot; &amp;quot;uc010cyz.2&amp;quot; &amp;quot;uc010cza.2&amp;quot; &amp;quot;uc010wht.1&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Look like it has plenty of&amp;nbsp;isoforms!&lt;/p&gt;
&lt;h4 id="via-transcripts"&gt;via &lt;code&gt;transcripts()&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;For the transcript location, the easiest way will be querying the txDb via &lt;code&gt;transcript()&lt;/code&gt;,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;BRCA1_txs &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; transcripts&lt;span class="p"&gt;(&lt;/span&gt;
    Homo.sapiens&lt;span class="p"&gt;,&lt;/span&gt;
    vals&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kt"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;tx_name &lt;span class="o"&gt;=&lt;/span&gt; BRCA1_txnames&lt;span class="p"&gt;),&lt;/span&gt;
    columns&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kt"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;TXNAME&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SYMBOL&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;EXONID&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt; &lt;/span&gt;BRCA1_txs
&lt;span class="go"&gt;GRanges object with 20 ranges and 3 metadata columns:&lt;/span&gt;
&lt;span class="go"&gt;       seqnames               ranges strand   |                   EXONID          TXNAME          SYMBOL&lt;/span&gt;
&lt;span class="go"&gt;          &amp;lt;Rle&amp;gt;            &amp;lt;IRanges&amp;gt;  &amp;lt;Rle&amp;gt;   |            &amp;lt;IntegerList&amp;gt; &amp;lt;CharacterList&amp;gt; &amp;lt;CharacterList&amp;gt;&lt;/span&gt;
&lt;span class="go"&gt;   [1]    chr17 [41196312, 41276132]      -   | 227486,227485,227482,...      uc010whl.2           BRCA1&lt;/span&gt;
&lt;span class="go"&gt;   [2]    chr17 [41196312, 41277340]      -   | 227487,227486,227485,...      uc002icp.4           BRCA1&lt;/span&gt;
&lt;span class="go"&gt;   [3]    chr17 [41196312, 41277340]      -   | 227487,227464,227463,...      uc010whm.2           BRCA1&lt;/span&gt;
&lt;span class="go"&gt;   [4]    chr17 [41196312, 41277468]      -   | 227489,227486,227485,...      uc002icu.3           BRCA1&lt;/span&gt;
&lt;span class="go"&gt;   [5]    chr17 [41196312, 41277468]      -   | 227489,227486,227482,...      uc010cyx.3           BRCA1&lt;/span&gt;
&lt;span class="go"&gt;   ...      ...                  ...    ... ...                      ...             ...             ...&lt;/span&gt;
&lt;span class="go"&gt;  [16]    chr17 [41243452, 41277340]      -   | 227487,227486,227485,...      uc010cyy.1           BRCA1&lt;/span&gt;
&lt;span class="go"&gt;  [17]    chr17 [41243452, 41277468]      -   | 227489,227486,227485,...      uc010whs.1           BRCA1&lt;/span&gt;
&lt;span class="go"&gt;  [18]    chr17 [41243452, 41277500]      -   | 227488,227486,227485,...      uc010cyz.2           BRCA1&lt;/span&gt;
&lt;span class="go"&gt;  [19]    chr17 [41243452, 41277500]      -   | 227488,227486,227485,...      uc010cza.2           BRCA1&lt;/span&gt;
&lt;span class="go"&gt;  [20]    chr17 [41243452, 41277500]      -   |            227488,227474      uc010wht.1           BRCA1&lt;/span&gt;
&lt;span class="go"&gt;  -------&lt;/span&gt;
&lt;span class="go"&gt;  seqinfo: 93 sequences (1 circular) from hg19 genome&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then get the genomic range of these transcripts by &lt;code&gt;seqnames()&lt;/code&gt;, &lt;code&gt;start()&lt;/code&gt; and &lt;code&gt;end()&lt;/code&gt; functions on the &lt;code&gt;GRanages&lt;/code&gt; object,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;thechr &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="kp"&gt;as.character&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kp"&gt;unique&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    seqnames&lt;span class="p"&gt;(&lt;/span&gt;BRCA1_txs&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;))&lt;/span&gt;
st &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="kp"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;start&lt;span class="p"&gt;(&lt;/span&gt;BRCA1_txs&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="m"&gt;2e4&lt;/span&gt;
en &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="kp"&gt;max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;end&lt;span class="p"&gt;(&lt;/span&gt;BRCA1_txs&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="m"&gt;1e3&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Some space are added at both ends so the plot won&amp;rsquo;t tightly fit all transcripts and leave some room for the transcript&amp;nbsp;names. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt; &lt;/span&gt;&lt;span class="kt"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;thechr&lt;span class="p"&gt;,&lt;/span&gt; st&lt;span class="p"&gt;,&lt;/span&gt; en&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;[1] &amp;quot;chr17&amp;quot;    &amp;quot;41176312&amp;quot; &amp;quot;41323420&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="via-exonsby"&gt;via &lt;code&gt;exonsBy()&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;Another way to obtain the genomic range is getting the exact range of &lt;span class="caps"&gt;CDS&lt;/span&gt; (e.g. exons and UTRs) for each transcript via &lt;code&gt;exonsBy()&lt;/code&gt;. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;BRCA1_cds_by_tx &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; exonsBy&lt;span class="p"&gt;(&lt;/span&gt;
    Homo.sapiens&lt;span class="p"&gt;,&lt;/span&gt; by&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;tx&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; use.names&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;TRUE&lt;/span&gt;
&lt;span class="p"&gt;)[&lt;/span&gt;BRCA1_txnames&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The function returns a &lt;code&gt;GRangesList&lt;/code&gt; object, a list of &lt;code&gt;GRanges&lt;/code&gt; that each &lt;code&gt;GRanges&lt;/code&gt; object corresponds to a transcript&amp;nbsp;respectively.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt; &lt;/span&gt;BRCA1_cds_by_tx
&lt;span class="go"&gt;GRangesList object of length 20:&lt;/span&gt;
&lt;span class="go"&gt;$uc010whl.2 &lt;/span&gt;
&lt;span class="go"&gt;GRanges object with 22 ranges and 3 metadata columns:&lt;/span&gt;
&lt;span class="go"&gt;       seqnames               ranges strand   |   exon_id   exon_name exon_rank&lt;/span&gt;
&lt;span class="go"&gt;          &amp;lt;Rle&amp;gt;            &amp;lt;IRanges&amp;gt;  &amp;lt;Rle&amp;gt;   | &amp;lt;integer&amp;gt; &amp;lt;character&amp;gt; &amp;lt;integer&amp;gt;&lt;/span&gt;
&lt;span class="go"&gt;   [1]    chr17 [41276034, 41276132]      -   |    227486        &amp;lt;NA&amp;gt;         1&lt;/span&gt;
&lt;span class="go"&gt;   [2]    chr17 [41267743, 41267796]      -   |    227485        &amp;lt;NA&amp;gt;         2&lt;/span&gt;
&lt;span class="go"&gt;   [3]    chr17 [41258473, 41258550]      -   |    227482        &amp;lt;NA&amp;gt;         3&lt;/span&gt;
&lt;span class="go"&gt;   [4]    chr17 [41256885, 41256973]      -   |    227481        &amp;lt;NA&amp;gt;         4&lt;/span&gt;
&lt;span class="go"&gt;   [5]    chr17 [41256139, 41256278]      -   |    227480        &amp;lt;NA&amp;gt;         5&lt;/span&gt;
&lt;span class="go"&gt;   ...      ...                  ...    ... ...       ...         ...       ...&lt;/span&gt;
&lt;span class="go"&gt;  [18]    chr17 [41209069, 41209152]      -   |    227462        &amp;lt;NA&amp;gt;        18&lt;/span&gt;
&lt;span class="go"&gt;  [19]    chr17 [41203080, 41203134]      -   |    227461        &amp;lt;NA&amp;gt;        19&lt;/span&gt;
&lt;span class="go"&gt;  [20]    chr17 [41201138, 41201211]      -   |    227459        &amp;lt;NA&amp;gt;        20&lt;/span&gt;
&lt;span class="go"&gt;  [21]    chr17 [41199660, 41199720]      -   |    227458        &amp;lt;NA&amp;gt;        21&lt;/span&gt;
&lt;span class="go"&gt;  [22]    chr17 [41196312, 41197819]      -   |    227457        &amp;lt;NA&amp;gt;        22&lt;/span&gt;

&lt;span class="go"&gt;...&lt;/span&gt;
&lt;span class="go"&gt;&amp;lt;19 more elements&amp;gt;&lt;/span&gt;
&lt;span class="go"&gt;-------&lt;/span&gt;
&lt;span class="go"&gt;seqinfo: 93 sequences (1 circular) from hg19 genome&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;GRangesList&lt;/code&gt; is not merely a R list structure, which can correctly propagate the GRanges-related functions to all the GRanges it&amp;nbsp;contain.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt; &lt;/span&gt;start&lt;span class="p"&gt;(&lt;/span&gt;BRCA1_cds_by_tx&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;IntegerList of length 20&lt;/span&gt;
&lt;span class="go"&gt;[[&amp;quot;uc010whl.2&amp;quot;]] 41276034 41267743 41258473 ... 41201138 41199660 41196312&lt;/span&gt;
&lt;span class="go"&gt;[[&amp;quot;uc002icp.4&amp;quot;]] 41277199 41276034 41267743 ... 41201138 41199660 41196312&lt;/span&gt;
&lt;span class="go"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here we only cares about the widest range, so the hierarchical structure is not useful. It would be better to flatten the &lt;code&gt;GRangesList&lt;/code&gt; first,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt; &lt;/span&gt;BRCA1_cds_flatten &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="kp"&gt;unlist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;BRCA1_cds_by_tx&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt; &lt;/span&gt;BRCA1_cds_flatten
&lt;span class="go"&gt;GRanges object with 284 ranges and 3 metadata columns:&lt;/span&gt;
&lt;span class="go"&gt;             seqnames               ranges strand   |   exon_id   exon_name exon_rank&lt;/span&gt;
&lt;span class="go"&gt;                &amp;lt;Rle&amp;gt;            &amp;lt;IRanges&amp;gt;  &amp;lt;Rle&amp;gt;   | &amp;lt;integer&amp;gt; &amp;lt;character&amp;gt; &amp;lt;integer&amp;gt;&lt;/span&gt;
&lt;span class="go"&gt;  uc010whl.2    chr17 [41276034, 41276132]      -   |    227486        &amp;lt;NA&amp;gt;         1&lt;/span&gt;
&lt;span class="go"&gt;  uc010whl.2    chr17 [41267743, 41267796]      -   |    227485        &amp;lt;NA&amp;gt;         2&lt;/span&gt;
&lt;span class="go"&gt;  uc010whl.2    chr17 [41258473, 41258550]      -   |    227482        &amp;lt;NA&amp;gt;         3&lt;/span&gt;
&lt;span class="go"&gt;  uc010whl.2    chr17 [41256885, 41256973]      -   |    227481        &amp;lt;NA&amp;gt;         4&lt;/span&gt;
&lt;span class="go"&gt;  uc010whl.2    chr17 [41256139, 41256278]      -   |    227480        &amp;lt;NA&amp;gt;         5&lt;/span&gt;
&lt;span class="go"&gt;         ...      ...                  ...    ... ...       ...         ...       ...&lt;/span&gt;
&lt;span class="go"&gt;  uc010cza.2    chr17 [41249261, 41249306]      -   |    227477        &amp;lt;NA&amp;gt;         7&lt;/span&gt;
&lt;span class="go"&gt;  uc010cza.2    chr17 [41247863, 41247939]      -   |    227476        &amp;lt;NA&amp;gt;         8&lt;/span&gt;
&lt;span class="go"&gt;  uc010cza.2    chr17 [41243452, 41246877]      -   |    227474        &amp;lt;NA&amp;gt;         9&lt;/span&gt;
&lt;span class="go"&gt;  uc010wht.1    chr17 [41277288, 41277500]      -   |    227488        &amp;lt;NA&amp;gt;         1&lt;/span&gt;
&lt;span class="go"&gt;  uc010wht.1    chr17 [41243452, 41246877]      -   |    227474        &amp;lt;NA&amp;gt;         2&lt;/span&gt;
&lt;span class="go"&gt;  -------&lt;/span&gt;
&lt;span class="go"&gt;  seqinfo: 93 sequences (1 circular) from hg19 genome&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We have the &lt;span class="caps"&gt;BRCA1&lt;/span&gt; genomic region, rest of the plotting is the&amp;nbsp;same.&lt;/p&gt;
&lt;h3 id="show-only-the-annotations-of-certain-genes"&gt;Show only the annotations of certain&amp;nbsp;genes&lt;/h3&gt;
&lt;p&gt;Before we start to create our own annotation subset, we first take a look at what Gviz generated. The &lt;code&gt;GeneRegionTrack&lt;/code&gt; track store its annotation data at slot &lt;code&gt;range&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt; &lt;/span&gt;grtrack&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="kp"&gt;range&lt;/span&gt;
&lt;span class="go"&gt;GRanges object with 459 ranges and 7 metadata columns:&lt;/span&gt;
&lt;span class="go"&gt;        seqnames               ranges strand   |     feature          id         exon  transcript        gene      symbol   density&lt;/span&gt;
&lt;span class="go"&gt;           &amp;lt;Rle&amp;gt;            &amp;lt;IRanges&amp;gt;  &amp;lt;Rle&amp;gt;   | &amp;lt;character&amp;gt; &amp;lt;character&amp;gt;  &amp;lt;character&amp;gt; &amp;lt;character&amp;gt; &amp;lt;character&amp;gt; &amp;lt;character&amp;gt; &amp;lt;numeric&amp;gt;&lt;/span&gt;
&lt;span class="go"&gt;    [1]    chr17 [41177258, 41177364]      +   |        utr5     unknown uc002icn.3_1  uc002icn.3        8153  uc002icn.3         1&lt;/span&gt;
&lt;span class="go"&gt;    [2]    chr17 [41177365, 41177466]      +   |         CDS     unknown uc002icn.3_1  uc002icn.3        8153  uc002icn.3         1&lt;/span&gt;
&lt;span class="go"&gt;    [3]    chr17 [41177977, 41178064]      +   |         CDS     unknown uc002icn.3_2  uc002icn.3        8153  uc002icn.3         1&lt;/span&gt;
&lt;span class="go"&gt;    [4]    chr17 [41179200, 41179309]      +   |         CDS     unknown uc002icn.3_3  uc002icn.3        8153  uc002icn.3         1&lt;/span&gt;
&lt;span class="go"&gt;    [5]    chr17 [41180078, 41180212]      +   |         CDS     unknown uc002icn.3_4  uc002icn.3        8153  uc002icn.3         1&lt;/span&gt;
&lt;span class="go"&gt;    ...      ...                  ...    ... ...         ...         ...          ...         ...         ...         ...       ...&lt;/span&gt;
&lt;span class="go"&gt;  [455]    chr17 [41277294, 41277468]      -   |        utr5     unknown uc010cyx.3_1  uc010cyx.3         672  uc010cyx.3         1&lt;/span&gt;
&lt;span class="go"&gt;  [456]    chr17 [41277294, 41277468]      -   |        utr5     unknown uc002idc.1_1  uc002idc.1         672  uc002idc.1         1&lt;/span&gt;
&lt;span class="go"&gt;  [457]    chr17 [41277294, 41277468]      -   |        utr5     unknown uc010whr.1_1  uc010whr.1         672  uc010whr.1         1&lt;/span&gt;
&lt;span class="go"&gt;  [458]    chr17 [41277294, 41277468]      -   |        utr5     unknown uc010whs.1_1  uc010whs.1         672  uc010whs.1         1&lt;/span&gt;
&lt;span class="go"&gt;  [459]    chr17 [41322143, 41322420]      -   |        utr5     unknown uc010whp.2_1  uc010whp.2         672  uc010whp.2         1&lt;/span&gt;
&lt;span class="go"&gt;  -------&lt;/span&gt;
&lt;span class="go"&gt;  seqinfo: 1 sequence from hg19 genome; no seqlengths&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So we filter out unrelated ranges by checking if the value of metadata column &lt;code&gt;transcript&lt;/code&gt; is one of &lt;em&gt;&lt;span class="caps"&gt;BRCA1&lt;/span&gt;&lt;/em&gt;&amp;lsquo;s transcript&amp;nbsp;IDs,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;BRCA_only_range &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; grtrack&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="kp"&gt;range&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
    mcols&lt;span class="p"&gt;(&lt;/span&gt;grtrack&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="kp"&gt;range&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;transcript &lt;span class="o"&gt;%in%&lt;/span&gt; BRCA1_txnames
&lt;span class="p"&gt;]&lt;/span&gt;
grtrack&lt;span class="o"&gt;@&lt;/span&gt;range &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; BRCA_only_range
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;or by less hacky way that use the new range to construct another &lt;code&gt;GeneRegionTrack&lt;/code&gt;,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;grtrack_BRCA_only &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; GeneRegionTrack&lt;span class="p"&gt;(&lt;/span&gt;
    BRCA_only_range&lt;span class="p"&gt;,&lt;/span&gt;
    chromosome &lt;span class="o"&gt;=&lt;/span&gt; thechr&lt;span class="p"&gt;,&lt;/span&gt; start &lt;span class="o"&gt;=&lt;/span&gt; st&lt;span class="p"&gt;,&lt;/span&gt; end &lt;span class="o"&gt;=&lt;/span&gt; en&lt;span class="p"&gt;,&lt;/span&gt;
    showId &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;TRUE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    name &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Gene Annotation (BRCA1 only)&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
plotTracks&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="kt"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;itrack&lt;span class="p"&gt;,&lt;/span&gt; gtrack&lt;span class="p"&gt;,&lt;/span&gt; dtrack&lt;span class="p"&gt;,&lt;/span&gt; grtrack_BRCA_only&lt;span class="p"&gt;),&lt;/span&gt;
    from &lt;span class="o"&gt;=&lt;/span&gt; st&lt;span class="p"&gt;,&lt;/span&gt; to &lt;span class="o"&gt;=&lt;/span&gt; en
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2016/01/plot-seq-depth-gviz/pics/seqdepth_BRCA1_only.png"/&gt;
&lt;/div&gt;

&lt;h3 id="display-gene-symbols-at-annotation-track"&gt;Display gene symbols at annotation&amp;nbsp;track&lt;/h3&gt;
&lt;p&gt;It&amp;rsquo;s more obvious now about how Gviz stores the annotation. All we need is to replace the symbol name with whatever we&amp;nbsp;desire.&lt;/p&gt;
&lt;p&gt;First, we extract the metadata of the &lt;code&gt;GeneRegionTrack&lt;/code&gt;, and query for their gene symbols. Using either the transcript &lt;span class="caps"&gt;ID&lt;/span&gt; or Entrez &lt;span class="caps"&gt;ID&lt;/span&gt; will&amp;nbsp;do. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;grtrack_range &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; grtrack&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="kp"&gt;range&lt;/span&gt;
range_mapping &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; select&lt;span class="p"&gt;(&lt;/span&gt;
    Homo.sapiens&lt;span class="p"&gt;,&lt;/span&gt;
    keys &lt;span class="o"&gt;=&lt;/span&gt; mcols&lt;span class="p"&gt;(&lt;/span&gt;grtrack_range&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;symbol&lt;span class="p"&gt;,&lt;/span&gt;
    keytype &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;TXNAME&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    columns &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kt"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ENTREZID&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;SYMBOL&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt; &lt;/span&gt;&lt;span class="kp"&gt;head&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;range_mapping&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;      TXNAME SYMBOL ENTREZID&lt;/span&gt;
&lt;span class="go"&gt;1 uc002icn.3   RND2     8153&lt;/span&gt;
&lt;span class="go"&gt;2 uc002icn.3   RND2     8153&lt;/span&gt;
&lt;span class="go"&gt;3 uc002icn.3   RND2     8153&lt;/span&gt;
&lt;span class="go"&gt;4 uc002icn.3   RND2     8153&lt;/span&gt;
&lt;span class="go"&gt;5 uc002icn.3   RND2     8153&lt;/span&gt;
&lt;span class="go"&gt;6 uc002icn.3   RND2     8153&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then we concatenate the information of transcript &lt;span class="caps"&gt;ID&lt;/span&gt; and gene symbol using &lt;a href="https://cran.r-project.org/web/packages/stringr/index.html"&gt;stringr&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;library&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;stringr&lt;span class="p"&gt;)&lt;/span&gt;
new_symbols &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="kp"&gt;with&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    range_mapping&lt;span class="p"&gt;,&lt;/span&gt;
    str_c&lt;span class="p"&gt;(&lt;/span&gt;SYMBOL&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; TXNAME&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; sep &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt; &lt;/span&gt;&lt;span class="kp"&gt;head&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kp"&gt;unique&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;new_symbols&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="go"&gt;[1] &amp;quot;RND2 (uc002icn.3)&amp;quot; &amp;quot;NBR2 (uc002idf.3)&amp;quot; &amp;quot;NBR2 (uc010czb.2)&amp;quot;&lt;/span&gt;
&lt;span class="go"&gt;[4] &amp;quot;NBR2 (uc002idg.3)&amp;quot; &amp;quot;NBR2 (uc002idh.3)&amp;quot; &amp;quot;NBR1 (uc010czd.3)&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Like how we extract &lt;em&gt;&lt;span class="caps"&gt;BRCA1&lt;/span&gt;&lt;/em&gt;-only annotations, we construct a new &lt;code&gt;GeneRegionTrack&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;grtrack_symbol &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; GeneRegionTrack&lt;span class="p"&gt;(&lt;/span&gt;
    grtrack&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="kp"&gt;range&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    chromosome &lt;span class="o"&gt;=&lt;/span&gt; thechr&lt;span class="p"&gt;,&lt;/span&gt; start &lt;span class="o"&gt;=&lt;/span&gt; st&lt;span class="p"&gt;,&lt;/span&gt; end &lt;span class="o"&gt;=&lt;/span&gt; en&lt;span class="p"&gt;,&lt;/span&gt;
    showId &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;TRUE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    name &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Gene Annotation w. Symbol&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
symbol&lt;span class="p"&gt;(&lt;/span&gt;grtrack_symbol&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; new_symbols
plotTracks&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="kt"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;itrack&lt;span class="p"&gt;,&lt;/span&gt; gtrack&lt;span class="p"&gt;,&lt;/span&gt; dtrack&lt;span class="p"&gt;,&lt;/span&gt; grtrack_symbol&lt;span class="p"&gt;),&lt;/span&gt;
    from &lt;span class="o"&gt;=&lt;/span&gt; st&lt;span class="p"&gt;,&lt;/span&gt; to &lt;span class="o"&gt;=&lt;/span&gt; en
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2016/01/plot-seq-depth-gviz/pics/seqdepth_gene_symbol.png"/&gt;
&lt;/div&gt;

&lt;h2 id="summary"&gt;Summary&lt;/h2&gt;
&lt;p&gt;So we&amp;rsquo;ve learnt how to plot using Gviz. You should go explore other data tracks or try to combine sequencing depth of multiple samples. I found the design of Gviz is clean and easy to modify. I think I&amp;rsquo;ll use Gviz whenever genome-related plots are&amp;nbsp;needed. &lt;/p&gt;
&lt;p&gt;Really glad I&amp;rsquo;ve tried it&amp;nbsp;:)&lt;/p&gt;
&lt;h2 id="supplementary-plot-bam-files-directly"&gt;Supplementary - Plot &lt;span class="caps"&gt;BAM&lt;/span&gt; files&amp;nbsp;directly&lt;/h2&gt;
&lt;p&gt;We will start by replacing &lt;code&gt;DataTrack&lt;/code&gt; with &lt;code&gt;AlignmentsTrack&lt;/code&gt;. Also we select a smaller region this time so the read mapping can be clearly&amp;nbsp;seen.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;st &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="m"&gt;41.196e6L&lt;/span&gt;
en &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="m"&gt;41.202e6L&lt;/span&gt;
gtrack &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; GenomeAxisTrack&lt;span class="p"&gt;(&lt;/span&gt;cex &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# set the font size larger&lt;/span&gt;
altrack &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; AlignmentsTrack&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;myseq.bam&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; isPaired &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;TRUE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; col.mates &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;deeppink&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
plotTracks&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="kt"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;gtrack&lt;span class="p"&gt;,&lt;/span&gt; altrack&lt;span class="p"&gt;,&lt;/span&gt; grtrack&lt;span class="p"&gt;),&lt;/span&gt;
    from &lt;span class="o"&gt;=&lt;/span&gt; st&lt;span class="p"&gt;,&lt;/span&gt; to &lt;span class="o"&gt;=&lt;/span&gt; en
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2016/01/plot-seq-depth-gviz/pics/seqdepth_BAM_default.png"/&gt;
&lt;/div&gt;

&lt;p&gt;To plot only the coverage, set the type as &lt;code&gt;coverage&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;altrack &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; AlignmentsTrack&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;myseq.bam&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; type &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;coverage&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2016/01/plot-seq-depth-gviz/pics/seqdepth_BAM_coverage_only.png"/&gt;
&lt;/div&gt;

&lt;h3 id="fancier-alignment-display"&gt;Fancier alignment&amp;nbsp;display&lt;/h3&gt;
&lt;p&gt;Spend some time reading the documentation, the alignment can be much more&amp;nbsp;fancier. &lt;/p&gt;
&lt;p&gt;For example, when looking at a much smaller genome region, we many want to see the sequence and read mismatches. It could be done by adding a new track &lt;code&gt;SequenceTrack&lt;/code&gt; to include the genome&amp;nbsp;sequence,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;small_st &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="m"&gt;41267.735e3L&lt;/span&gt;
small_en &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="m"&gt;41267.805e3L&lt;/span&gt;

&lt;span class="kn"&gt;library&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;BSgenome.Hsapiens.UCSC.hg19&lt;span class="p"&gt;)&lt;/span&gt;
strack &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; SequenceTrack&lt;span class="p"&gt;(&lt;/span&gt;
    Hsapiens&lt;span class="p"&gt;,&lt;/span&gt;
    chromosome &lt;span class="o"&gt;=&lt;/span&gt; thechr&lt;span class="p"&gt;,&lt;/span&gt; from &lt;span class="o"&gt;=&lt;/span&gt; small_en&lt;span class="p"&gt;,&lt;/span&gt; to &lt;span class="o"&gt;=&lt;/span&gt; small_st&lt;span class="p"&gt;,&lt;/span&gt;
    cex&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0.8&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We tweak other tracks as well to make sure the figure won&amp;rsquo;t explode by too much information. Gene annotations are collapsed down to one liner. Also, aligned read&amp;rsquo;s height is increased to fit in individual letters (e.g., &lt;span class="caps"&gt;ATCG&lt;/span&gt;).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;grtrack_small &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; GeneRegionTrack&lt;span class="p"&gt;(&lt;/span&gt;
   grtrack&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="kp"&gt;range&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
   chromosome &lt;span class="o"&gt;=&lt;/span&gt; thechr&lt;span class="p"&gt;,&lt;/span&gt;
   start &lt;span class="o"&gt;=&lt;/span&gt; small_st&lt;span class="p"&gt;,&lt;/span&gt; end &lt;span class="o"&gt;=&lt;/span&gt; small_en&lt;span class="p"&gt;,&lt;/span&gt;
   stacking &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;dense&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
   name &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Gene Annotation&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
altrack &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; AlignmentsTrack&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="s"&gt;&amp;quot;myseq.bam&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    isPaired &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;TRUE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    min.height &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; max.height &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; coverageHeight &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0.15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; size &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;50&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
plotTracks&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="kt"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;gtrack&lt;span class="p"&gt;,&lt;/span&gt; altrack&lt;span class="p"&gt;,&lt;/span&gt; grtrack_small&lt;span class="p"&gt;,&lt;/span&gt; strack&lt;span class="p"&gt;),&lt;/span&gt;
    from &lt;span class="o"&gt;=&lt;/span&gt; small_st&lt;span class="p"&gt;,&lt;/span&gt; to &lt;span class="o"&gt;=&lt;/span&gt; small_en
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2016/01/plot-seq-depth-gviz/pics/seqdepth_BAM_small_region.png"/&gt;
&lt;/div&gt;

&lt;p&gt;We found a C&amp;gt;T &lt;span class="caps"&gt;SNP&lt;/span&gt;&amp;nbsp;here!&lt;/p&gt;</summary><category term="en"></category><category term="r"></category><category term="bioconductor"></category><category term="gviz"></category><category term="NGS"></category></entry><entry><title>Jupyter NotebookÂ Theme</title><link href="//blog.liang2.tw/posts/2016/01/jupyter-notebook-theme/" rel="alternate"></link><updated>2016-01-07T00:00:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2016-01-07:posts/2016/01/jupyter-notebook-theme/</id><summary type="html">&lt;p&gt;&lt;a href="http://jupyter.org/"&gt;Jupyter Notebook&lt;/a&gt;ï¼ä¹å°±æ¯ä»¥åç IPython Notebookï¼æè©²æ¯è¨±å¤äººå¨ç¨ Python&amp;nbsp;åè³æåææè¨éå¯¦é©æ­¥é©èçµæçå·¥å·ã&lt;/p&gt;
&lt;p&gt;ç¾å¨ &lt;a href="http://ipython.org/"&gt;IPython&lt;/a&gt; (v4.0+) å·²ç¶åæ­¸å° Interactive Python Shell çæ¬è³ªï¼è®æåªæ¯æ´åå§å»º Python &lt;span class="caps"&gt;REPL&lt;/span&gt; çå¥ä»¶ï¼ç¸ä¾çæ¨¡çµä¹æ¸æäºãåæ¬ç IPyton Notebook ä¸»è¦æ¯æä¾ä¸åå &lt;a href="https://reference.wolfram.com/language/tutorial/UsingANotebookInterface.html"&gt;Mathematica Notebook&lt;/a&gt; çç°å¢ï¼åè½å¾å¤å°±ä¸å¤æãå®å¯ä»¥ç¨ web æè &lt;span class="caps"&gt;QT&lt;/span&gt;&amp;nbsp;ä»é¢ä¾è·ã&lt;/p&gt;
&lt;p&gt;å¾ä¾åéå§æ´åå¾å¤èªè¨ï¼è®æå Julia / R / Lua ç­èªè¨é½å¯ä»¥å©ç¨éæ¨£ç Notebook æ¶æ§ï¼æ¼æ¯ &lt;a href="http://jupyter.org/"&gt;Jupyter&lt;/a&gt; å°±å æ­¤èªçï¼è®æåæ¬ç IPython åªæ¯å¶ä¸­ä¸åå¯è½çèªè¨ kernelãNotebook æ¬èº«å¯ä»¥æ¯ R èªè¨æè Julia&amp;nbsp;èªè¨ã&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#jupyter-notebook"&gt;Jupyter&amp;nbsp;Notebook&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#custom-theme-on-v41"&gt;Custom Theme on&amp;nbsp;v4.1+&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#custom-theme-before-v41"&gt;Custom Theme Before&amp;nbsp;v4.1&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h3 id="jupyter-notebook"&gt;Jupyter&amp;nbsp;Notebook&lt;/h3&gt;
&lt;p&gt;ç¨ Python&amp;nbsp;è£ååç°¡å®ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; pip install jupyter
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Jupyter é è¨­èµ° web ä»é¢ï¼æè·ä¸å tornado server é è¨­å¨ &lt;a href="http://localhost:8888"&gt;http://localhost:8888&lt;/a&gt;&amp;nbsp;ä¸ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; jupyter notebook
&lt;span class="go"&gt;[I 23:50:58.449 NotebookApp] Serving notebooks from local directory: /Users/liang&lt;/span&gt;
&lt;span class="go"&gt;[I 23:50:58.449 NotebookApp] 0 active kernels&lt;/span&gt;
&lt;span class="go"&gt;[I 23:50:58.450 NotebookApp] The IPython Notebook is running at: http://localhost:8888/&lt;/span&gt;
&lt;span class="go"&gt;[I 23:50:58.450 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æè£ browser&amp;nbsp;çè©±å°±æèªåéä¸åè¦çªã&lt;/p&gt;
&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2016/01/jupyter-notebook-theme/pics/jupyter_default_frontpage.png"/&gt;
  &lt;p class="caption center"&gt;Jupyter Notebook&amp;nbsp;Hub&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Notebook é è¨­æ¯ &lt;code&gt;.ipynb&lt;/code&gt; çæªæ¡ãå¸¸è¦çå§å®¹åéæ¨£ï¼&lt;/p&gt;
&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2016/01/jupyter-notebook-theme/pics/jupyter_default_notebook.png"/&gt;
  &lt;p class="caption center"&gt;Jupyter Notebook&amp;nbsp;Example&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id="custom-theme-on-v41"&gt;Custom Theme on&amp;nbsp;v4.1+&lt;/h3&gt;
&lt;p&gt;&lt;span class="caps"&gt;EDIT&lt;/span&gt;: 2016-01-11 &lt;a href="https://blog.jupyter.org/2016/01/08/notebook-4-1-release/"&gt;Jupyter Notebook 4.1&lt;/a&gt; å·²éåºï¼è¨­å®è·¯å¾é è¨­é½å¨ &lt;code&gt;~/.jupyter&lt;/code&gt; åºä¸ã&lt;/p&gt;
&lt;p&gt;ä»å¤©éé»æ¯æä¸»é¡åãè¶å¿«ä¾åå§ã&lt;/p&gt;
&lt;p&gt;å¯ä»¥éé &lt;code&gt;jupyter --config-dir&lt;/code&gt; æ &lt;code&gt;jupyter --paths&lt;/code&gt; æ¾å°è¨­å®æªæè©²æ¾çä½ç½®ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; jupyter --config-dir
&lt;span class="go"&gt;~/.jupyter&lt;/span&gt;
&lt;span class="gp"&gt;$&lt;/span&gt; jupyter notebook --generate-config  &lt;span class="c1"&gt;# å»ºç« Notebook è¨­å®æª&lt;/span&gt;
&lt;span class="go"&gt;Writing default config to: ~/.jupyter/jupyter_notebook_config.py&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦æåªæ¯æ¹ä¸»é¡ï¼ä¸éè¦æ´å Notebook&amp;nbsp;è¨­å®æªã&lt;/p&gt;
&lt;p&gt;ç®åèªå·±ä½¿ç¨çä¸»é¡ä¾èª &lt;a href="https://github.com/dunovank/jupyter-themes"&gt;dunovank&lt;/a&gt;ï¼ä»ææ¶éäºè³å°æ·±æ·ºå©è²ï¼æè©²è¶³å¤ ä½¿ç¨äºã&lt;span class="caps"&gt;CSS&lt;/span&gt; å¾å¥äººçåºç¤ä¸ä¾èª¿æ´ä¹ç¸å°ç°¡å®ï¼æèªå·±æ&lt;a href="https://github.com/ccwang002/dotfiles/tree/master/ipy_profile/ipython3"&gt;æ¹å¯«äºä¸é»&lt;/a&gt;ï¼å¿äºæ¹ä»éº¼)ãdunovank æå¯«åå®è£ theme çå¥ä»¶ï¼ä¸éä¸ç¨ä¹æ²éä¿ï¼åªè¦æºåå¥½ &lt;span class="caps"&gt;CSS&lt;/span&gt; å°±è½ç¨ãæç¨ Grade3&amp;nbsp;éåä¸»é¡ä¾ç¤ºç¯ã&lt;/p&gt;
&lt;p&gt;æ &lt;code&gt;custom.css&lt;/code&gt; æ¾å° &lt;code&gt;~/.jupyter/static/custom.css&lt;/code&gt;ãè¨­å®çç®éé·å¾å¦ä¸ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; tree ~/.jupyter -F -L 3
&lt;span class="go"&gt;~/.jupyter&lt;/span&gt;
&lt;span class="go"&gt;âââ custom/&lt;/span&gt;
&lt;span class="go"&gt;âÂ Â  âââ custom.css -&amp;gt; /path/to/custom_light.css&lt;/span&gt;
&lt;span class="go"&gt;âââ jupyter_notebook_config.py&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="custom-theme-before-v41"&gt;Custom Theme Before&amp;nbsp;v4.1&lt;/h3&gt;
&lt;p&gt;ç¾å¨å çºæ­·ç¶ IPython å° Jupyter çéç¨ï¼è¨­å®éè »åæ£çãä»¥å¾çè¨­å®æå¨ &lt;code&gt;~/.ipython&lt;/code&gt;ï¼èå°äº Jupyter ä¹å¾ï¼ç¸éè¨­å®æå¨ &lt;code&gt;~/.jupyter&lt;/code&gt;ãææåè¨­å®æªæªçè©±å°±å©åè·¯å¾é½æª¢æ¥ä¸ä¸å§ã&lt;/p&gt;
&lt;p&gt;åªè¦æéå &lt;span class="caps"&gt;CSS&lt;/span&gt; æ¾å° &lt;code&gt;~/.ipython/profile_default/custom.css&lt;/code&gt; åéé Jupyter Notebook å°±å¯ä»¥äº&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt;ãææå¦ä¸ï¼&lt;/p&gt;
&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2016/01/jupyter-notebook-theme/pics/jupyter_grade3_frontpage.png"/&gt;
  &lt;img src="//blog.liang2.tw/posts/2016/01/jupyter-notebook-theme/pics/jupyter_grade3_notebook1.png"/&gt;
  &lt;p class="caption center"&gt;Jupyter Notebook Theme Grade3&amp;nbsp;Demo&lt;/p&gt;
&lt;/div&gt;

&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2016/01/jupyter-notebook-theme/pics/jupyter_grade3_notebook2.png"/&gt;
  &lt;p class="caption center"&gt;æ Toolbar å¨é¨ toggle&amp;nbsp;èµ·ä¾ï¼ä»¥åè¡¨æ ¼çæ¨£å­ã&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;åäººè¦ºå¾é·æéä½¿ç¨ä¸ä¾ï¼å°æ¯åº¦ä½ä¸é»å°ç¼çæ¯è¼å¥½ãé»åºä¹ä¸é¯ï¼ä¸éç«åå¸¸å¸¸æèªå·±å¸¶ç½åºï¼æ´é«æè¦ºå°±ä¸æ¯å¾æ¼äº®ï¼å¯è½è¦é£ matplotlib theme ä¸èµ·æ¹å§ &lt;span class="caps"&gt;XD&lt;/span&gt;&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;éè·¯å¾ä¸¦ä¸ç¬¦å Jupyter è·¨ kernel çè¨­è¨çå¿µï¼&lt;del&gt;æè¦ºæªä¾ææ¹è·¯å¾&lt;/del&gt;å·²ç¶å¨ 4.1+ çæ¬ä¸­å®ææ´åï¼è IPython è¨­å®åå®¶äºã&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</summary><category term="zh"></category><category term="jupyter"></category><category term="notebook"></category></entry><entry><title>Blog defaults to HTTPS</title><link href="//blog.liang2.tw/posts/2016/01/blog-https/" rel="alternate"></link><updated>2016-01-06T00:00:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2016-01-06:posts/2016/01/blog-https/</id><summary type="html">&lt;p&gt;ç°¡è¨ä¹ï¼ç¾å¨ blog ä½¿ç¨ httpsãä¸è¬ç http é£ç·æè¢«éæ°å°åè³&amp;nbsp;httpsã&lt;/p&gt;
&lt;p&gt;Blog æ¬ä¾å°±æ¯æ¶å¨ &lt;a href="https://github.com/ccwang002/ccwang002.github.io"&gt;GitHub Pages&lt;/a&gt; ä¸ï¼å¶å¯¦é è¨­æ httpsï¼ä½å¨ç¶²åæ¹æèªè¨ domain ä¹å¾ https èªç¶å°±å¤±æäºãå¨ GitHub ä¸æé issue è«ä»åå å¥ &lt;a href="https://github.com/isaacs/github/issues/156"&gt;&lt;span class="caps"&gt;HTTPS&lt;/span&gt; support for custom domain&lt;/a&gt; éåè½ï¼ä¸éç®åéæ¯éè¦èªå·±æ³è¾¦æ³ãé¨è &lt;a href="https://letsencrypt.org/"&gt;Let&amp;rsquo;s Encrypt&lt;/a&gt; éç¨®æåçæµè¡ï¼GitHub&amp;nbsp;ææå»ç©æ¥µå°æ¾æ¯è¼åé©çè§£æ±ºæ¹æ¡å§ã&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#cloudflare-ssl-and-cdn"&gt;CloudFlare &lt;span class="caps"&gt;SSL&lt;/span&gt; and &lt;span class="caps"&gt;CDN&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#disqus"&gt;Disqus&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#justfont"&gt;justfont&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#hinet"&gt;Hinet&amp;nbsp;è½åæå&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="cloudflare-ssl-and-cdn"&gt;CloudFlare &lt;span class="caps"&gt;SSL&lt;/span&gt; and &lt;span class="caps"&gt;CDN&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;å¨çé£å &lt;a href="https://github.com/isaacs/github/issues/156"&gt;issue&lt;/a&gt; å°±å¯ä»¥æ¾å°å¶ä»äººç¨ CloudFlare çè§£æ³ãæ¦å¿µä¸å°±åç¨ä¸å±¤ CloudFlare &lt;span class="caps"&gt;CDN&lt;/span&gt;ï¼ç¶å¾å®ç &lt;span class="caps"&gt;CDN&lt;/span&gt; ææä¾ https ç°½ç« ãç´æ¥ç CloudFlare å¨ Crypto&amp;nbsp;é çä»ç´¹æ¯è¼å¿«ï¼&lt;/p&gt;
&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2016/01/blog-https/pics/cloudflare_ssl.png"/&gt;
  &lt;p class="caption center"&gt;source: &lt;a href="https://www.cloudflare.com/ssl/"&gt; CloudFlare one-click &lt;span class="caps"&gt;SSL&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;æä»¥ CloudFlare å» cache GitHub é é¢æç¨çæ¯ httpsï¼åå°ä½¿ç¨èæä¹æ¯ç¨ httpsãå©ä¸å°±æ¯ä½ è¦ä¸è¦ç¸ä¿¡ CloudFlare&amp;nbsp;äºã&lt;/p&gt;
&lt;p&gt;CloudFlare çè¨­å®å¯ä»¥åè &lt;a href="https://blog.keanulee.com/2014/10/11/setting-up-ssl-on-github-pages.html"&gt;Keanu&amp;rsquo;s Blog&lt;/a&gt;ãä¸äºéé»ç­è¨ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ææ CloudFlare ç &lt;span class="caps"&gt;DNS&lt;/span&gt;&amp;nbsp;Server&lt;/li&gt;
&lt;li&gt;Crypto &lt;span class="caps"&gt;SSL&lt;/span&gt; options é¸ Fullï¼ä¸æ¯ Strict ç®å GitHub&amp;nbsp;éä¸æ¯æ´ï¼&lt;/li&gt;
&lt;li&gt;å¨ Page Rules å¼·è¿«ææ http é£çµéæ°ä½¿ç¨ httpsï¼ä¾å¦ï¼&lt;code&gt;http://blog.liang2.tw/*&lt;/code&gt;ï¼&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span class="caps"&gt;HTTPS&lt;/span&gt; ä»¥å &lt;span class="caps"&gt;DNS&lt;/span&gt; çè¨­å®é½éè¦ä¸æ®µæéï¼éå¹¾åå°ææè§å¯åä¸å¤©åæ http&amp;nbsp;éæã&lt;/p&gt;
&lt;p&gt;Pelican ç¼ä½è¨­å® &lt;code&gt;publishconf.py&lt;/code&gt; ç®¡ç¶²åç &lt;code&gt;SITE_URL&lt;/code&gt; è½è¨­æ &lt;code&gt;//blog.liang.tw&lt;/code&gt; ä¸ç¨å¸¶ protocolï¼ééº¼éè¦çè³è¨æ²å¯«å¨æä»¶è£¡åï¼ï¼éæ¨£å°±è½åæ serve&amp;nbsp;http(s)ã&lt;/p&gt;
&lt;p&gt;éæ¨£å¶å¯¦å°±å®æäºãä½åºä¹æå¤éæ¯æäºå°åé¡ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¶²é å­å &lt;a href="http://en.justfont.com/membership"&gt;justfont&lt;/a&gt; è¦ Business Plan æè½æ¯æ´ &lt;span class="caps"&gt;HTTPS&lt;/span&gt;ã&lt;/li&gt;
&lt;li&gt;çè¨ç³»çµ± &lt;a href="https://disqus.com/"&gt;Disqus&lt;/a&gt; &lt;span class="caps"&gt;HTTP&lt;/span&gt; å &lt;span class="caps"&gt;HTTPS&lt;/span&gt; ç«ç¶æ¯ç¶ä½&lt;a href="https://github.com/aspnet/Docs/issues/623"&gt;ä¸åçè¨æ¿&lt;/a&gt;ä¾ä½¿ç¨ï¼èä¸è¦æå&amp;nbsp;mergeã&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="disqus"&gt;Disqus&lt;/h2&gt;
&lt;p&gt;ä¼¼ä¹è§£æ³åªæå¨é¨å°åå° httpsãééä¸è½ç´æ¥æ¹ Disqus è¨­å®ï¼è¦ç¨å®ç &lt;a href="https://help.disqus.com/customer/portal/articles/912757-url-mapper"&gt;&lt;span class="caps"&gt;URL&lt;/span&gt; Mapper&lt;/a&gt; ä¸è¼ææçè¨çåºç¾é£çµç &lt;span class="caps"&gt;CSV&lt;/span&gt;&amp;nbsp;æåä¿®æ¹ã &lt;/p&gt;
&lt;p&gt;æè¦ºå¾åç ²ãä¸éç«ä¸ççè¨ä¸å¤ï¼ä¹ä¸ç¨æ¹å¤å°çè¨ï¼å¾å¿«å°±åæ­¥å°æ°çä½ç½®ä¸ã&lt;/p&gt;
&lt;h2 id="justfont"&gt;justfont&lt;/h2&gt;
&lt;p&gt;ä¹åæè´å©éè±è¨ç«ï¼å¶å¯¦ææ¿å°å©å¹´ç Business&amp;nbsp;Planãå¯«ä¿¡çµ¦å®¢æä¸å¤©å°±æ¹å¥½è¨­å®äºãä¸éä¹å¾å°±è¦å¤ä»é¢å¦ã&lt;/p&gt;
&lt;h2 id="hinet"&gt;Hinet&amp;nbsp;è½åæå&lt;/h2&gt;
&lt;p&gt;ææ²æèªå·±æ¶ä»»ä½ serverï¼æ¶å¾ç¶­è­·ãä¸éä¹å¾æ¶å¾æå­ãå¨å¶ä» subdomain é½æ²ç¨çææ³ä¸ï¼æéé Hinet è¨­å® &lt;a href="http://liang2.tw"&gt;http://liang2.tw&lt;/a&gt; æå°åè³ &lt;a href="http://blog.liang2.tw"&gt;http://blog.liang2.tw&lt;/a&gt; åè¢«å°åå°&amp;nbsp;httpsã&lt;/p&gt;
&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2016/01/blog-https/pics/cloudflare_dns_setting.png"/&gt;
  &lt;p class="caption center"&gt;CloudFlare &lt;span class="caps"&gt;DNS&lt;/span&gt;&amp;nbsp;setting&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;å¤§æ¦æ¯éæ¨£ãå¸æè½å¨ä¸è¦èªå·±æ¶ server çææ³ä¸ç¹¼çºç¶çéå&amp;nbsp;blogã&lt;/p&gt;</summary><category term="zh"></category><category term="blog"></category><category term="pelican"></category></entry><entry><title>Overview of Genomic Data Processing inÂ Bioconductor</title><link href="//blog.liang2.tw/posts/2015/12/biocondutor-genomic-data/" rel="alternate"></link><updated>2015-12-29T20:28:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2015-12-29:posts/2015/12/biocondutor-genomic-data/</id><summary type="html">&lt;p&gt;Sorry for the late update. In the past two months, I finished my Ph.D. applications (hope to hear good news in the next two months) and was busy preparing the PyCon Taiwan 2016. Also, a year-long website development finally came to the&amp;nbsp;end.&lt;/p&gt;
&lt;p&gt;Now most things are set so I can back to writing my&amp;nbsp;blog.&lt;/p&gt;
&lt;p&gt;Since September, there accumulates at least 5 drafts and I don&amp;rsquo;t know when I can finish them, so I think I have to change my writing strategy. I will first publish things as soon as information collection is done, and deeper reviews will be given in the following posts. Right now I will focus on Bioconductor (and general Bioinformatics topics) and&amp;nbsp;Django.&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#bioconductor"&gt;Bioconductor&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#annotation-and-genome-reference"&gt;Annotation and Genome&amp;nbsp;Reference&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#experiment-data-storage"&gt;Experiment Data&amp;nbsp;Storage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#operations-on-genome"&gt;Operations on&amp;nbsp;Genome&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#genomic-data-visualization"&gt;Genomic data&amp;nbsp;visualization&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#summary"&gt;Summary&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id="bioconductor"&gt;Bioconductor&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://www.bioconductor.org/"&gt;Bioconductor&lt;/a&gt; is indeed a rich resources for R both in terms of data and tools. And I found I have yet spent time seriously understanding the whole ecosystem, which I believe can drastically lighten the loading of daily&amp;nbsp;analysis.&lt;/p&gt;
&lt;p&gt;Bioconductor&amp;rsquo;s website is informative. If you are familar with R, you should already know that in order to understand the usage of a package, one of the best way is to read its vignettes. Packages on Bioconductor generally have vignettes, which is really helpful and the website makes them accessible. On top of that, they have &lt;a href="https://www.bioconductor.org/help/course-materials/"&gt;Courses &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Conferences&lt;/a&gt; and &lt;a href="https://www.bioconductor.org/help/workflows/"&gt;Workflows&lt;/a&gt;. The former section collects all conference materials in the past few years, which contains package hands-on, analysis tutorial, and R advanced topics. It&amp;rsquo;s a hidden gem to me since I have already found numerous materials worth reading only after a glance over it. The latter one should be well-known. It gives examples of typical analysis&amp;nbsp;workflows.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;m interested in the following topics in&amp;nbsp;Biocondutor:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Annotation and genome reference (OrgDb, TxDb, OrganismDb,&amp;nbsp;BSgenome)&lt;/li&gt;
&lt;li&gt;Experiment data storage&amp;nbsp;(ExpressionSets)&lt;/li&gt;
&lt;li&gt;Operations on genome&amp;nbsp;(GenomicRanges)&lt;/li&gt;
&lt;li&gt;Genomic data visualization (Gviz,&amp;nbsp;ggbio)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Keywords in Biocondutors for each topic are attached in the parens, mostly being the package name. For each topic, I&amp;rsquo;ll put the related resources I collected in the following&amp;nbsp;sections.&lt;/p&gt;
&lt;p&gt;Before the listing, I found &lt;a href="http://genomicsclass.github.io/book/"&gt;PH525x series&lt;/a&gt; maintained by Rafael Irizarry and Michael Love from Harvard serves as a comprehensive entry point for almost every related topic. The site is the accompanied resources for their edX classes. Both of them worth taking a&amp;nbsp;look.&lt;/p&gt;
&lt;h3 id="annotation-and-genome-reference"&gt;Annotation and Genome&amp;nbsp;Reference&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://genomicsclass.github.io/book/pages/annoPhen.html"&gt;Annotating phenotypes and molecular function&lt;/a&gt; from &lt;a href="http://genomicsclass.github.io/book/"&gt;PH525x series&lt;/a&gt; gives a good overview and a taste of the powerful ecosystem Bioconductor&amp;nbsp;provides.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://www.bioconductor.org/help/course-materials/2015/BioC2015/Annotation_Resources.html"&gt;Annotation Resources&lt;/a&gt; from &lt;a href="https://www.bioconductor.org/help/course-materials/2015/BioC2015/"&gt;BioC 2015&lt;/a&gt; gives more extensive introduction about all available types of references from genome sequences to transcriptome and gene&amp;nbsp;info.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For example, human comes&amp;nbsp;with&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://bioconductor.org/packages/release/data/annotation/html/org.Hs.eg.db.html"&gt;org.Hs.eg.db&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://bioconductor.org/packages/release/data/annotation/html/TxDb.Hsapiens.UCSC.hg38.knownGene.html"&gt;TxDb.Hsapiens.&lt;span class="caps"&gt;UCSC&lt;/span&gt;.hg38.knownGene&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://bioconductor.org/packages/release/data/annotation/html/Homo.sapiens.html"&gt;Homo.sapiens&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://bioconductor.org/packages/release/data/annotation/html/BSgenome.Hsapiens.UCSC.hg38.html"&gt;BSgenome.Hsapiens.&lt;span class="caps"&gt;UCSC&lt;/span&gt;.hg38&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="experiment-data-storage"&gt;Experiment Data&amp;nbsp;Storage&lt;/h3&gt;
&lt;p&gt;ExpressionSet helps store the expression experiment data, which one can combine   expression values and phenotypes of the same sample. Additionally the experiment data (like descriptions of &lt;span class="caps"&gt;GEO&lt;/span&gt; dataset) can be attached as&amp;nbsp;well.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://genomicsclass.github.io/book/pages/eset.html"&gt;The ExpressionSet container&lt;/a&gt; from &lt;a href="http://genomicsclass.github.io/book/"&gt;PH525x series&lt;/a&gt; gives an intro. It should be sufficient enough to use ExpressionSet in daily&amp;nbsp;work.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://www.bioconductor.org/packages/release/bioc/vignettes/Biobase/inst/doc/ExpressionSetIntroduction.pdf"&gt;The ExpressionSet Introduction&lt;/a&gt; from its package &lt;a href="https://www.bioconductor.org/packages/release/bioc/html/Biobase.html"&gt;Biobase&lt;/a&gt;âs vignette gives detailed&amp;nbsp;explanation.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="operations-on-genome"&gt;Operations on&amp;nbsp;Genome&lt;/h3&gt;
&lt;p&gt;I haven&amp;rsquo;t gone into the details, but operations about genomic ranges are often tricky and more importantly, badly&amp;nbsp;optimized.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://genomicsclass.github.io/book/pages/iranges_granges.html"&gt;IRanges and GRanges&lt;/a&gt; and &lt;a href="http://genomicsclass.github.io/book/pages/operateGRanges.html"&gt;GRanges operations&lt;/a&gt; from &lt;a href="http://genomicsclass.github.io/book/"&gt;PH525x series&lt;/a&gt; give the overview of using the package &lt;a href="https://bioconductor.org/packages/release/bioc/html/GenomicRanges.html"&gt;GenomicRanges&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://www.bioconductor.org/packages/release/bioc/vignettes/GenomicRanges/inst/doc/GenomicRangesIntroduction.pdf"&gt;An Introduction to Genomic Ranges Classes&lt;/a&gt;, a &lt;a href="https://bioconductor.org/packages/release/bioc/html/GenomicRanges.html"&gt;GenomicRanges&lt;/a&gt; vignette, gives a detailed&amp;nbsp;view.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Also, their paper, &lt;a href="http://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1003118"&gt;&amp;ldquo;Software for Computing and Annotating Genomic Ranges&amp;rdquo;, &lt;em&gt;&lt;span class="caps"&gt;PLOS&lt;/span&gt; One&lt;/em&gt;&lt;/a&gt; should be another overview source of the&amp;nbsp;package.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://cran.r-project.org/web/packages/data.table/index.html"&gt;data.table&lt;/a&gt;&amp;lsquo;s &lt;code&gt;foverlap&lt;/code&gt; function worth the comparison, since I already use it and I know it is &lt;a href="https://github.com/Rdatatable/data.table/wiki/talks/EARL2014_OverlapRangeJoin_Arun.pdf"&gt;blazingly fast&lt;/a&gt;. &lt;code&gt;foverlap&lt;/code&gt; handles the overlapping of integer ranges so it can be applied to genomic operation. Its code is quite complex so its mechanism is still a myth to me. I&amp;rsquo;d like to see its comparison with using database like&amp;nbsp;SQLite.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="genomic-data-visualization"&gt;Genomic data&amp;nbsp;visualization&lt;/h3&gt;
&lt;p&gt;Basically I can find two&amp;nbsp;packages:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://bioconductor.org/packages/release/bioc/html/Gviz.html"&gt;Gviz&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://bioconductor.org/packages/release/bioc/html/ggbio.html"&gt;ggbio&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Don&amp;rsquo;t know their difference yet. Both of them can produce well-done figures. But I think I have some experience with ggbio, which was a bit tricky to use. So for now I will go for&amp;nbsp;Gviz.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.bioconductor.org/help/course-materials/2012/BiocEurope2012/GvizEuropeanBioc2012.pdf"&gt;Visualizing genomic features with the Gviz package&lt;/a&gt; given at Bioc Europe 2012 has a decent introduction about&amp;nbsp;Gviz.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://bioconductor.org/packages/release/bioc/vignettes/Gviz/inst/doc/Gviz.pdf"&gt;The Gviz User Guide&lt;/a&gt; looks very comprehensive, which also cover usage with expression and alignment&amp;nbsp;results.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="summary"&gt;Summary&lt;/h2&gt;
&lt;p&gt;These resources should be enough for weeks of trying. It&amp;rsquo;s excited to find so many useful&amp;nbsp;tools.&lt;/p&gt;
&lt;p&gt;So, good luck to me for my Ph.D. application, PyCon Taiwan 2016, and a shorter blog posting&amp;nbsp;frequency.&lt;/p&gt;</summary><category term="en"></category><category term="r"></category><category term="bioconductor"></category></entry><entry><title>Customize Django UserÂ Model</title><link href="//blog.liang2.tw/posts/2015/11/django-custom-user/" rel="alternate"></link><updated>2015-11-04T18:23:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2015-11-04:posts/2015/11/django-custom-user/</id><summary type="html">&lt;p&gt;Django å¸³èçæ¬ä½å®ç¾©å¨ &lt;code&gt;django.contrib.auth&lt;/code&gt; ç &lt;a href="https://docs.djangoproject.com/en/1.8/ref/contrib/auth/#fields"&gt;User&lt;/a&gt;&amp;nbsp;ä¸­ï¼å°ä½¿ç¨èèè¨åå«äºï¼username*ãfirst_nameãlast_nameãemailãpassword*ãåæå°éç¼èä¾èªªï¼éæï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æå® Group å&amp;nbsp;Permission&lt;/li&gt;
&lt;li&gt;æ¯å¦çº&amp;nbsp;staffãsuperuser&lt;/li&gt;
&lt;li&gt;å¸³èééãæå¾ä¸æ¬¡ç»å¥æé&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å§å»ºçå¸³èåè½æè©²å¾å¯¦ç¨ï¼å®å¨æ§ä¹å¾å¥½ãæä»¥ä¸è¬ä¾èªªé½ä¸æå»æ¹å®ã&lt;/p&gt;
&lt;p&gt;å¦æåªæ¯æ³è¦å¹« User å å profileï¼ä¾å¦çæ¥ãä¾èªåªåæçç­æ¬ä½ï¼ä¹ä¸éè¦æ¹å¯« Userãåèå®ç¶² &lt;a href="https://docs.djangoproject.com/en/1.8/topics/auth/customizing/#extending-the-existing-user-model"&gt;Extending the existing User model&lt;/a&gt;ï¼åªéè¦å»ºä¸å one-to-one relationship æå° User&amp;nbsp;å°±å¥½äºï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.conf&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UserProfile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OneToOneField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AUTH_USER_MODEL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;birth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DateField&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;orig_planet&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½ Django é è¨­ç¨ username ä¾ç»å¥ï¼å¦æè¦æ¹ç¨ email&amp;nbsp;ç»å¥è¦æéº¼åï¼&lt;/p&gt;
&lt;h3 id="email"&gt;æ¹ç¨ Email&amp;nbsp;åå¸³èç»å¥&lt;/h3&gt;
&lt;p&gt;å çº User æ¯åå¾éè¦ç modelï¼æä»¥æ¹å¯«æè¦æ³¨æç¸å®¹æ§çåé¡ãå¶å¯¦å®ç¶²ä¹ææå­¸ &lt;a href="https://docs.djangoproject.com/en/1.8/topics/auth/customizing/#specifying-a-custom-user-model"&gt;Specifying a custom User model&lt;/a&gt;ï¼ä¸ééæå­¸æ¯åé¢é·å¾å¤ã&lt;/p&gt;
&lt;p&gt;ç¶²è·¯ä¸å·²ç¶æäºº @jcugat åäºä¸åå¥ä»¶ &lt;a href="https://github.com/jcugat/django-custom-user"&gt;django-custom-user&lt;/a&gt;ï¼ä»å¯¦ä½äº &lt;code&gt;EmailUser&lt;/code&gt; å³ç¨ email ä½çºå¸³èç»å¥ãå·²ç¶æææè¦å·¥é½åå¥½äºï¼æä»¥å¦ææ³è¦åå ä¸èªå·±çæ¬ä½ç­ç­ï¼å¯ä»¥ç¹¼æ¿ä»ç &lt;code&gt;AbstractEmailUser&lt;/code&gt;ã&lt;/p&gt;
&lt;p&gt;å¶å¯¦å¦æçå®èªå® User ä¹å¾ï¼å¯«å¥½ User Model ä¸é£ï¼æ¯è¼è¤éçæ¯ååµå»ºãä¿®æ¹ User ä»¥å admin çè¨­å®ãé¤äºè®éåå¥ä»¶ç source code ä¹å¾ï¼&lt;a href="http://stackoverflow.com/questions/15012235"&gt;éä¸² Stack Overflow è¨è«&lt;/a&gt;ä¹æå°äºä¸åçå¯¦ä½æ¹å¼ãDjango éé¨ä»½ç source code&amp;nbsp;è »å¥½è®çï¼ä¹å¯ä»¥çä¸ä¸ã&lt;/p&gt;
&lt;p&gt;å çºä¹å¾è¦å Email èªè¨¼ï¼æè©²æç¨ &lt;a href="https://github.com/pennersr/django-allauth"&gt;django-allauth&lt;/a&gt; åãæè¦ºå¾ä¹æ²ç¼æäºï¼æè©²è¦ææç« æç­æå° &lt;span class="caps"&gt;XD&lt;/span&gt;&lt;/p&gt;</summary><category term="zh"></category><category term="django"></category><category term="python"></category></entry><entry><title>æ¸ä½æä»£ççæ°£</title><link href="//blog.liang2.tw/posts/2015/10/digital-anger/" rel="alternate"></link><updated>2015-10-10T00:00:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2015-10-10:posts/2015/10/digital-anger/</id><summary type="html">&lt;p&gt;å¨æ¸ä½æä»£ï¼å¾ç¨åå°ççæ°£æ¯ä»¶å¾å°é£çäºã&lt;/p&gt;
&lt;p&gt;é¦åæºéåªä»å°±ä¸å¤ªé¼åµéç¨®äºãæ³è¦å¨ &lt;span class="caps"&gt;FB&lt;/span&gt; ä¸æ¾å°åç ²çè­ä¸ä»¶äºï¼ä½ &lt;span class="caps"&gt;FB&lt;/span&gt;&amp;nbsp;æå çºå¤ªæ¿ççç¼è¨ï¼æä»¥çæ­£çå°çäººå¶å¯¦ä¸å¤ï¼æèåªææ¨æ­å°ææç¸ååå¥½çé£ç¾¤äººï¼å¥½åéä¸å°ãè­äººãçç®æ¨ãå¶å¯¦çµå¤§å¤æ¸çç¤¾ç¾¤ç¶²ç«æå¤æå°é½æéç¨®ãåæçåè½ãã&lt;/p&gt;
&lt;p&gt;åä¾ï¼æéçæ°£çå°è±¡ï¼ä¸è«æ¯ä¸åç¾¤é«ï¼æèæ¯ç§ä¸çå¹¾åäººä¹éï¼æ¸ä½æä»£ççæ°£éæ¯å¾ä¸ä¸æ¨£çãåå¾ä¸è¬çæç·è¡¨éèªªèµ·å§ï¼æ¸ä½æä»£çå·¥å·åï¼å¤§å¹å°å å¼·æç¼èªå·±æ¥å¸¸çæç·çè¡¨ç¾åãå¾å³çµ±ææ¸å¤å°è½ä½¿ç¨çé¡æå­ï¼å°è¡¨æç¬¦èï¼å°è²¼åãæåçè²¼åï¼äººåè¶ä¾è¶æè¾¦æ³ææ¥å¸¸ä¸­åå°çæç·æ³¢åï¼ç¨å¾èªå¼µçæ¹å¼è¡¨ç¾ã&lt;/p&gt;
&lt;p&gt;ä¾å¦ï¼ç¼ç¾åå¾è»ä»å¤©æ©ä¾çååéï¼&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä»å¤©åå¾è»ç«ç¶æ©ä¾ååéï¼æï¼&lt;/li&gt;
&lt;li&gt;ä»å¤©åå¾è»ç«ç¶æ©ä¾ååé&amp;nbsp;Î£(Â°ÐÂ°;&lt;/li&gt;
&lt;li&gt;ä»å¤©åå¾è»ç«ç¶æ©ä¾ååé&amp;nbsp;!!!!!!!!ï¼éä¸æ±é ­çå­çååï¼&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä½å¾æ¥µç«¯çè² é¢æç·å¢ï¼&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»å¤©éä¾ç¼ç¾ç¸½çµ±è·åææå¤§é»¨ï¼é½éæ¯åæ°é»¨&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;éæ¨£åé³è¿°äºäºå¯¦ï¼ä½æ²æè¡¨éåºèªå·±å¿ä¸­çæ¤æã&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¹¾çªèç¼èººå¨åºä¸æªè½èµ·èº«ï¼å¬èçæ¤æ¨å°åå¤©è±æ¿ç©ºæ®æ³é ­ï¼éæäº¤æ¿èç´å°æèä¹å¤±å»äºåéã&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;â¦â¦å¹²æå±äºï¼èä¸åä½å¤ªé·äºåå¨å¯«å°èªªï¼å¯è½ä¹è¶éä¸äºåªé«çå­æ¸éå¶ãé¡æå­å¥½åä¹ä¸çä¸ç¢ï¼ç¨&lt;code&gt;ï¼â¯âµâ¡â²ï¼â¯ï¸µâ´ââ´&lt;/code&gt; ï¼ç¿»æ¡ï¼è¡¨ééæ¨£çæç·ï¼åªææè¦ºå¾ãä¸æ­£å¼ãé å·æ²è¬ä¹æï¼ä½çæ­£æ¤æçäººæ¯ä¸æéç©ç¬çã&lt;/p&gt;
&lt;p&gt;æ³äºæ³ï¼å¥½åéæ¯åªè½åæ­¸å°å³çµ±ç«ä¿¡æä»£çæ¹å¼ï¼å¤å å¯¦é«çåä½ãåæ¯å¤±è¯ï¼è§£é¤æåï¼Unfollowï¼æèæ¹ç¨æ´æ¿é²çææ®µèè©å½ï¼é«è©±å°±å¾ææã&lt;/p&gt;
&lt;p&gt;ä½éæ¨£çæ¨è«è®æå¾å¥½å¥ï¼ä»¥åçäººæ¯æéº¼è·å¥äººåµæ¶çã&lt;/p&gt;
&lt;p&gt;å¶å¯¦è®æè§å¯å°çæ°£å¨ä¸ååªä»çè¡¨éï¼ä¸¦ä¸æ¯ç·£æ¼åè¿°çæ³ãéèµ·æºæ¼ä¸æ¬¡æå¨çèäººå®¶ç¨ &lt;span class="caps"&gt;FB&lt;/span&gt;&amp;nbsp;è¨æ¯åµæ¶ãä¾å¦å¹´è¼äººå¤±ç´äºï¼èäººå°±æå¾çæ°£çæ¿åºâ¦â¦ææ©æ²é£åäººï¼æçä»æ³èªªçæ¯&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¨é¨äººé½å¨ç­ä½ ä¸åäºï¼â¦ï¼ä¸ç¥äºåå­æ°£è©±ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä½æå¾éåºçè¨æ¯æ¯&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¨ç­ä½ &amp;nbsp;æ©&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¹å¤ªæº«æäºãåå å¾ç°¡å®ï¼èäººå¾é£é£çºæè¶éååæ­£ç¢ºå­ï¼å¨çæççæï¼è½ééå°ï¼æå¯«ï¼é¸å­äºåå­å°±äºä¸èµ·äºï¼é£åãæ©ãä¹åªæ¯ä¸å°å¿æå°ãæä»¥å°±æçå°ä¸åäººå´å·´ä¸å¾çæ°£çé¹éåªå¦è¿¸åºä¸å å­å¥ï¼ä½ææ©ä¸æçãå³éå»çå»æ²ä»éº¼ã&lt;/p&gt;
&lt;p&gt;æå¤å°æ¯ï¼éæ¨£çåªä»åèåç¶ä¸åä¸é¯çæç·ç·©è¡ï¼å°èäººåä¾èªªãæ¬ä¾å¾æ°£çï¼å¨éåºè¨æ¯ï¼å¦ä¸ç«¯åè¦ä¹å¾ï¼ä¸ç¥æéº¼å°å°±å¹³å¾©äºè¨±å¤ã&lt;/p&gt;
&lt;p&gt;é£å¹´è¼äººå¢ï¼&lt;/p&gt;
&lt;p&gt;éæ²æè¶³å¤ çè§å¯è¨éï¼å¤§å®¶ä¹ä¸è¦éæ¨£æ°æ &amp;gt;&amp;nbsp;&amp;lt;ï¼ä½ææ³ï¼æå¹´å¤§å®¶é½ææ±æ±å§å°±è½æ¶éè¶³å¤ çæ¨£æ¬äºï¼ç¬ï¼&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;EDIT&lt;/span&gt; 2015-10-10:&amp;nbsp;å¯è½éæ²æ©æææ±æ±å§å¢ãä¸å±æ¹è®å¾å¤ªå¿«ã&lt;/p&gt;
&lt;p&gt;/&lt;/p&gt;
&lt;p&gt;é¡ç®æ¯å¨æç¨ä¸­æ³å°çã&lt;/p&gt;
&lt;p&gt;ä¸éå§æ¯æ³å°ä¸­æçãæ¸ä½æä»£ççæ°£ãï¼ä½ç¸½è¦ºå¾ä¸å¤ å¸¥æ°£ï¼æ¹åäºå dichotomized affectionï¼dicho- æ¯åå¨å¯«è«æå­¸å°çè©ï¼å¶å¯¦è· binarize æ¯å·®ä¸å¤çæ¦å¿µï¼ä½æ³äºæ³ï¼éç¯è¦è¬çä¹ä¸æ¯å¨ææå®ä½è£¡æ¾å threshold å»åå 0/1ï¼åæ¹æäº polarized affectionï¼ä½æ³äºæ³ï¼éåæå¢æè©²æ¯è¼åç¡æ³ååæ¬æ¬å°è¢«å³è¼¸è¨èï¼æè©²æ¯å low-pass filterâ¦â¦æ¯èªªæå¨å¹¹éº»ï¼ä¸­æææ§å°ä¹¾èï¼éæ¨£å°±å¥½äº&amp;nbsp;:P&lt;/p&gt;
&lt;p&gt;/&lt;/p&gt;
&lt;p&gt;éæ¯ç¯èæï¼å¯«æ¼&amp;nbsp;2015-08-26ã&lt;/p&gt;
&lt;p&gt;ä»å¤©çå° Facebook&amp;nbsp;è¦æ¨æ°æ´å¤æ¨£çè¡¨æç¬¦èï¼èä¸ååªæ¯è®ãæ¼æ¯å°±æ³èµ·äºå®ãä¹é ä¾¿ççé¨è½æ ¼è²¼éç¨®æç« ææä»éº¼åé¿ã&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Today, Facebook is taking the wraps off what form the new Like may take. It is rolling out âReactions,â a new set of six emoji that will sit alongside the original thumbs-up to let users quickly respond with love, laughter, happiness, shock, sadness and anger.
(Source: &lt;a href="http://techcrunch.com/2015/10/08/with-reactions-facebook-supercharges-the-like-button-with-6-empathetic-emoji"&gt;TechCrunch&lt;/a&gt;)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;/&lt;/p&gt;
&lt;p&gt;é£æåæäººåè¦èªªæè©²è¦èæ®é«è©±çå½¢æ³ã&lt;/p&gt;
&lt;p&gt;é«è©±æè©²å°±æ¯æææå³éæç·çç¨è©äºï¼ä½æåª½æææä¸è½è¬é«è©±ï¼æä»¥ä¸å¨èæ®ç¯åå§&amp;nbsp;xd&lt;/p&gt;
&lt;p&gt;ä¾å¦ï¼åè¨­ï¼&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ææèªªä»å¹´å¯ä»¥ç¢æ¥­ï¼çµæèéä¸è¯ç°½é¢æ ¡å®ï¼å¹¹&lt;/li&gt;
&lt;li&gt;å»ä½ çææèªªä»å¹´å¯ä»¥é¢ééä»Xçé¬¼å°æ¹ï¼çµæé£åæ­»èé ­ä¸è¯ç°½é¢æ ¡å®ï¼å¹¹éä»éº¼å±ææ³&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æè¦ºå¾éæ¯æ²ææ¯è¡¨æç¬¦èä¾å¾ææï¼æèèªªï¼æç·å¯åº¦ä¸å¤ é«ï¼èä¸æ³è¦éå°æ´æ·±çå¹¹æ(?)ï¼å¸¸è¦å°±å¤å å¹¾åé«è©±ã&lt;/p&gt;
&lt;p&gt;ä½æä¸ç¢ºå®å¤§å®¶å¹³å¸¸æéº¼é±è®çï¼é¤äºå¾å¤å¿åè¨è«åå¤ï¼ç¶²è·¯ä¸å¤§å®¶ä¹ä¸ç¨æèå°æ¹é¼»å­è¬ï¼è©±è¬èµ·ä¾é½æ²ä»é¡§å¿ï¼éäºçä¹ä¹äºå¾ï¼å°éç¨®ç¨è©æèªåæ¿¾æï¼ä¸ç¶å°±æ¯å¾é£ç¥éå°æ¹å°åºæå¤çæ°£ã&lt;/p&gt;
&lt;p&gt;å°æä¾èªªï¼æ¹è®å°æäººçèªç¥é æ¯èµ·ä»ä½¿ç¨çé«è©±ä¾å¾éæ¼ããååä¾éåäººçæ°£èµ·ä¾ééº¼å¯æï¼ç­è¨ï¼ãï¼å¥½åæ¯è·¨éçµå°ä¸è½è·¨éçç´ç·ãä½éè®ææ¯è¨è«ãæ¸ä½æä»£çåºç·ãæãæ¸ä½æä»£çå½¢è±¡ãäºï¼é è¶éæç®åæèç¯çåã&lt;/p&gt;</summary><category term="zh"></category></entry><entry><title>ç¨ Django è SQLiteÂ æ¶æ½ç±¤ç¶²ç«</title><link href="//blog.liang2.tw/posts/2015/10/django-draw-member/" rel="alternate"></link><updated>2015-10-04T14:55:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2015-10-04:posts/2015/10/django-draw-member/</id><summary type="html">&lt;h4 id="_1"&gt;åææè¦&lt;/h4&gt;
&lt;p&gt;ææ LoveLive! å©å­£çå®äºï¼Î¼&amp;rsquo;s å¨ç¬¬ä¸å­£çæé·åæ»¿æååã&lt;strong&gt;\çå§«æé«/&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;â¦â¦åå¥½å¦ï¼ä¹åè¬äº&lt;a href="../../09/flask-draw-member"&gt;ç¨ Flask å»æ¶ä¸åæ½ç±¤ç¶²ç«&lt;/a&gt;ãä¸éæåæçµçç®æ¨æ¯ç¨ Django åï¼æä»¥æ¥ä¸ä¾å°±è¦æ¹å¯«ãä¹èéåæ©ææ¯è¼ä¸ä¸å©å Framework è¨­è¨æ¦å¿µçä¸åï¼&lt;del&gt;ä¾å¦ Django ä¸éå§å¯«æå¤å&lt;/del&gt;ã&lt;del&gt;Flask å¯«å°æå¾æå¤å&lt;/del&gt;ï¼ã&lt;/p&gt;
&lt;h3 id="from-flask-to-django"&gt;From Flask to&amp;nbsp;Django&lt;/h3&gt;
&lt;p&gt;çºäºè½æä½åä¸è¦ä¸ä¸å­æææ Django çåè½é½æ¾é²ä¾ï¼ä¸­ééç¨æå¾å¤ãä¸å¸¸è¦çå¯«æ³ããæ³è¦ç´æ¥å¯« Django best practice çè©±ï¼å¯ä»¥åè &lt;span class="caps"&gt;TP&lt;/span&gt; å¤§å¤§ç&lt;a href="https://github.com/uranusjr/django-tutorial-for-programmers"&gt;ãçºç¨å¼äººå¯«ç Django Tutorial ã&lt;/a&gt;ï¼ä»çè¦åæ¯ 30&amp;nbsp;åå®ååä¸åè¨é¤ç³»çµ±ã&lt;/p&gt;
&lt;p&gt;éç¨ä¸­æç¨å°å¾å¤ Django &lt;span class="caps"&gt;API&lt;/span&gt;ï¼æ²æè§£éçè©±å¯ä»¥å°&lt;a href="https://docs.djangoproject.com/en/1.8/"&gt;å®ç¶²&lt;/a&gt;å»æ¥ä½¿ç¨ãå¦å¤æç¼ç¾å¦æè½ç¨ debugger å» trace Django å·è¡çæµç¨è½å¹«å©çè§£ï¼æ³è¦ä¸åç²¾ç¾ç debugger çè©±å¯ä»¥è£å PyCharm ç &lt;span class="caps"&gt;IDE&lt;/span&gt;ã&lt;/p&gt;
&lt;p&gt;æ´é«çè¦åææ¼¸è¿æ Django&amp;nbsp;çåè½å é²ä¾ï¼ä¾åºæè©²æ¯ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Django View,&amp;nbsp;Template&lt;/li&gt;
&lt;li&gt;Django Model, &lt;span class="caps"&gt;ORM&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Django&amp;nbsp;Form&lt;/li&gt;
&lt;li&gt;(Django Admin&amp;nbsp;æ²æç¨å°)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦æç &lt;a href="https://docs.djangoproject.com/en/1.8/"&gt;Django doc&lt;/a&gt;&amp;nbsp;é¦é çè©±ï¼ä¹æ¯åéå¹¾åé¨ä»½ï¼éç¶éç¯æç« ä¸¦ä¸æææææ¦å¿µé½ä»ç´¹ä¸éã&lt;/p&gt;
&lt;p&gt;å¦å¤ï¼å¨æ¹å¯«çæåæè·³éç¨ raw &lt;span class="caps"&gt;SQL&lt;/span&gt;ï¼å çºå®å¨ä¸ç¨ &lt;span class="caps"&gt;ORM&lt;/span&gt; æé»é£éæ¥å¶ä» Django é¨ä»½ãæèè¶£çè©±å¨è¬å® Model ä¹å¾å¯ä»¥åè&amp;nbsp;Detailsã&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#_1"&gt;åææè¦&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#from-flask-to-django"&gt;From Flask to&amp;nbsp;Django&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#django"&gt;Django åå§è¨­å®&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#django-server"&gt;Django&amp;nbsp;server&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#django-app"&gt;ç¬¬ä¸å Django&amp;nbsp;app&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#django-settings"&gt;Django&amp;nbsp;settings&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#database-migration"&gt;Database&amp;nbsp;Migration&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#url-dispatcher"&gt;&lt;span class="caps"&gt;URL&lt;/span&gt;&amp;nbsp;dispatcher&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#django-model-and-orm"&gt;Django Model and &lt;span class="caps"&gt;ORM&lt;/span&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#migration-the-tracker-of-model-changes"&gt;Migration the tracker of model&amp;nbsp;changes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#orm-queries-in-shell"&gt;&lt;span class="caps"&gt;ORM&lt;/span&gt; queries in&amp;nbsp;shell&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#data-in-orm-and-fixtures"&gt;Data in &lt;span class="caps"&gt;ORM&lt;/span&gt; and&amp;nbsp;fixtures&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#django-template"&gt;Django&amp;nbsp;Template&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#more-on-djangos-model-template-and-view-mtv"&gt;More on Django&amp;rsquo;s model, template and view (&lt;span class="caps"&gt;MTV&lt;/span&gt;)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#django-form"&gt;Django Form&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#more-django-form-in-view"&gt;More Django form in&amp;nbsp;view&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_2"&gt;ç¸½çµ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#details"&gt;Details&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#raw-sql"&gt;Raw &lt;span class="caps"&gt;SQL&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#better-queryset"&gt;Better&amp;nbsp;QuerySet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#timezone"&gt;Timezone&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#post-form-and-csrf"&gt;&lt;span class="caps"&gt;POST&lt;/span&gt; form and &lt;span class="caps"&gt;CSRF&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h3 id="django"&gt;Django&amp;nbsp;åå§è¨­å®&lt;/h3&gt;
&lt;p&gt;ä¸æ¨£éä¸å Python&amp;nbsp;èæ¬ç°å¢ï¼éæåå°±æ¯å®çå¥½èäºï¼è½æä¸åå°æ¡çå¥ä»¶éé¢ï¼ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pip install django pytz ipython pyyaml
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://pythonhosted.org/pytz/"&gt;pytz&lt;/a&gt; å¨&lt;a href="../../09/datetime-sqlite"&gt;åä¸ç¯&lt;/a&gt;å·²ç¶ä»ç´¹éï¼æ¯èçæåçå¥ä»¶ã&lt;a href="http://ipython.org/"&gt;IPython&lt;/a&gt; å¨åæ¯ Interactive Pythonï¼åæ¨£æ¯ Python shell ä½æä¾äºå¾å¤éå åè½ï¼æå¸¸ç¨çæè©²æ¯èªåè£å®ã&lt;a href="http://pyyaml.org/"&gt;PyYAML&lt;/a&gt; ç¨ä¾èç &lt;span class="caps"&gt;YAML&lt;/span&gt; ç©ä»¶ï¼å¯è£å¯ä¸è£ï¼ä¸è£ä¹å¾çä¾å­å°±ç¨ &lt;span class="caps"&gt;JSON&lt;/span&gt;&amp;nbsp;å³å¯ã&lt;/p&gt;
&lt;p&gt;æåçå°æ¡æ ¹ç®éæ¯ &lt;code&gt;demo_django_draw_member&lt;/code&gt;ãå çº Django çè¨­å®å¾å¤ï¼åå¨éç®éä¸ç¨ &lt;a href="https://docs.djangoproject.com/en/1.8/ref/contrib/admin/"&gt;django-admin&lt;/a&gt; æåºæ¬çæ¶æ§å»ºèµ·ä¾ãæåå»ºäºä¸ååçº &lt;code&gt;draw_site&lt;/code&gt; çå°æ¡ï¼Projectï¼ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;VENV&lt;span class="o"&gt;)&lt;/span&gt; $ django-admin startproject draw_site
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å·è¡å®ä¹å¾æè©²æå¤åºä¸å æªæ¡ï¼çµæ§å¦ä¸ãæ³¨æå°æå©å±¤ &lt;code&gt;draw_site&lt;/code&gt;ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;demo_django_draw_member/
âââ draw_site/
    âââ draw_site/
    âÂ Â  âââ __init__.py
    âÂ Â  âââ settings.py
    âÂ Â  âââ urls.py
    âÂ Â  âââ wsgi.py
    âââ manage.py*
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¹å¾å·¥ä½çç®éå¶å¯¦æ¯ &lt;code&gt;demo_django_draw_member/draw_site/&lt;/code&gt;ï¼ä¹å°±æ¯æ &lt;code&gt;manage.py&lt;/code&gt; çé£å±¤ç®éï¼ä¹å¾çè·¯å¾é½æ¯ç¸å°æ¼ &lt;code&gt;demo_django_draw_member/draw_site/&lt;/code&gt;ãä»ç´¹ä¸ä¸æ¯åæªæ¡ã&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;manage.py&lt;/code&gt; ä¹å¾å°±æåä»£ django-admin çåè½ãå©èæå¤§çå·®å¥æ¯ manage.py ç¥é project&amp;nbsp;çè¨­å®ã&lt;/li&gt;
&lt;li&gt;&lt;code&gt;draw_site/settings.py&lt;/code&gt; è£¡é¢å­è Django çåç¨®è¨­å®ï¼å secret keyãdatabaseãtemplate engineãapp&amp;nbsp;ç­ã&lt;/li&gt;
&lt;li&gt;&lt;code&gt;draw_site/urls.py&lt;/code&gt; è£¡é¢å­è &lt;span class="caps"&gt;URL&lt;/span&gt; dispatching è¨­å®ï¼å³åªåè·¯å¾è¦ç¨åªå function&amp;nbsp;å»èçã&lt;/li&gt;
&lt;li&gt;&lt;code&gt;draw_site/wsgi.py&lt;/code&gt; &lt;a href="http://wsgi.org/"&gt;&lt;span class="caps"&gt;WSGI&lt;/span&gt;&lt;/a&gt; æ¯è¦ç¯ Python web server çæ¨æºï¼éå¸¸ä¸æåéåæªæ¡å°±ä¸ç´°æãFlaskãDjango é½æ¯ç¸å®¹ &lt;span class="caps"&gt;WSGI&lt;/span&gt;&amp;nbsp;çå¯¦ä½ã&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸å Django ç±ä¸å project åå¾å¤å apps æçµæãæ¯å app å°±å°æ³¨å¨ç¶²ç«çæååè½ä¸ï¼åèªåèåèªéè¦ç database schemaãtemplateãview&amp;nbsp;logicsãéæ¨£çå¥½èæ¯åæ¨£çåè½å°±ä¸ç¨éå¯«ï¼åæå¨å¾å¤§çç¶²ç«æéæ¨£ççµæ§æå©æ¼ç®¡çéä½çéè¼¯ã&lt;/p&gt;
&lt;h4 id="django-server"&gt;Django&amp;nbsp;server&lt;/h4&gt;
&lt;p&gt;åæ Django&amp;nbsp;è·èµ·ä¾ççå§ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; python manage.py runserver
&lt;span class="go"&gt;...&lt;/span&gt;
&lt;span class="go"&gt;Django version 1.8.5, using settings &amp;#39;draw_site.settings&amp;#39;&lt;/span&gt;
&lt;span class="go"&gt;Starting development server at http://127.0.0.1:8000/&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/10/django-draw-member/pics/django_initial.png"/&gt;
  &lt;p class="caption"&gt;Django Hello&amp;nbsp;World&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;éæ¯ Django å§å»ºå¨ä»éº¼ &lt;span class="caps"&gt;URL&lt;/span&gt; é½æ²è¨­å®æçæ­¡è¿ç«é¢ãçå°éåè³å°è¡¨ç¤ºåºæ¬ç settings æ­£å¸¸ãDjango è· Flask ä¸æ¨£ï¼å§å»ºç server æå¨ source code ææ¹è®çæå&amp;nbsp;reloadï¼æä»¥ä¸ç´éèè·ä¹å¯ä»¥ã&lt;/p&gt;
&lt;h4 id="django-app"&gt;ç¬¬ä¸å Django&amp;nbsp;app&lt;/h4&gt;
&lt;p&gt;æåçç¶²ç«åªæç¨å°ä¸å appï¼æå®å»ºåºä¾ååçº &lt;code&gt;draw_member&lt;/code&gt;ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;python manage.py startapp draw_member
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;demo_django_draw_member/
âââ draw_site/
    âââ draw_member/
    âÂ Â  âââ __init__.py
    âÂ Â  âââ admin.py
    âÂ Â  âââ migrations/
    âÂ Â  âââ models.py
    âÂ Â  âââ tests.py
    âÂ Â  âââ views.py
    âââ draw_site/
    âÂ Â  âââ ...
    âââ manage.py*
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯ä»¥çå° app è project&amp;nbsp;çæ¶æ§æ¯ä¸ä¸æ¨£çã&lt;/p&gt;
&lt;p&gt;è¦æéåæ°ç app å å° project è£¡ï¼ä¿®æ¹ &lt;code&gt;draw_site/settings.py&lt;/code&gt;ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# draw_site/settings.py&lt;/span&gt;

&lt;span class="n"&gt;INSTALLED_APPS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;draw_member&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;    &lt;span class="c1"&gt;# å éä¸è¡&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;django.contrib.admin&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;django.contrib.auth&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;django.contrib.contenttypes&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;django.contrib.sessions&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;django.contrib.messages&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;django.contrib.staticfiles&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é è¨­å¶å¯¦è£äºå¾å¤&amp;nbsp;appãæ«æä¸çä»åæ¯ä»éº¼ã&lt;/p&gt;
&lt;h4 id="django-settings"&gt;Django&amp;nbsp;settings&lt;/h4&gt;
&lt;p&gt;åç°¡å®ä»ç´¹ä¸ä¸ &lt;code&gt;draw_site/settings.py&lt;/code&gt;ãé¤äºååç¨å°&amp;nbsp;INSTALLED_APPSï¼è¬å¹¾åè·ééæ¯è¼æéçåæ¸ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Database&lt;/span&gt;
&lt;span class="c1"&gt;# https://docs.djangoproject.com/en/1.8/ref/settings/#databases&lt;/span&gt;

&lt;span class="n"&gt;DATABASES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;ENGINE&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;django.db.backends.sqlite3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;NAME&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BASE_DIR&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;db.sqlite3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;# Internationalization&lt;/span&gt;
&lt;span class="c1"&gt;# https://docs.djangoproject.com/en/1.8/topics/i18n/&lt;/span&gt;

&lt;span class="n"&gt;LANGUAGE_CODE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;en-us&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;TIME_ZONE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;UTC&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;USE_TZ&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span class="caps"&gt;DATABSES&lt;/span&gt; è£¡å®ç¾©äºä½¿ç¨çè³æåº«ãé è¨­æä½¿ç¨ &lt;code&gt;db.sqlite3&lt;/code&gt; éå SQLite&amp;nbsp;è³æåº«ã&lt;/p&gt;
&lt;p&gt;åä¾æ¯èªè¨ãæåçè¨­å®ãé è¨­æ¯ &lt;span class="caps"&gt;UTC&lt;/span&gt; ä¸¦ä¸ä½¿ç¨ timezoneï¼ä¹å°±æ¯ server çæéé½æ¯ç¨ &lt;span class="caps"&gt;UTC&lt;/span&gt;&amp;nbsp;è¨éçã&lt;/p&gt;
&lt;h4 id="database-migration"&gt;Database&amp;nbsp;Migration&lt;/h4&gt;
&lt;p&gt;å¨ä»éº¼ code é½éæ²å¯«ä¹åï¼ä»ç´¹ä¸å database è§å¿µï¼&lt;a href="https://docs.djangoproject.com/en/1.8/topics/migrations/"&gt;migration&lt;/a&gt;ã&lt;/p&gt;
&lt;p&gt;å¨ä¹åçä¾å­å¯ä»¥ç¥éï¼æåæåè¨­è¨ä¸åè³æåº«è©²å­ä»éº¼æ±è¥¿ï¼æ´åç¶²ç«æµç¨ææéº¼ç¨éäºè³æï¼éäºå½¢æ table schemaãä½æ¯é¨èæéï¼å¯è½ç¶²ç«ææ°çåè½ï¼å¾é£èªªå®å¨ä¸å»æ´å&amp;nbsp;schemaã&lt;/p&gt;
&lt;p&gt;æ´å schema ä¸æ¯ä»¶ç°¡å®çäºï¼å¦ææ¯ä¸ production çç¶²ç«ï¼è³æåº«ææéä½ä»¥ä¾ç´¯ç©çè³æï¼ç¸½ä¸è½ schema æ¹äºéäºè³æå°±ä¸æå§ï¼èä¸å¨ç¶²ç«éç¼çæåï¼å¨ä¸åçæ¬çï¼æä¸åäººéç¼çï¼code å°±å¯è½æä¸åç schemaãè¦æéº¼ç¢ºä¿ code è database ççæå°±è¦é &amp;nbsp;migrationã&lt;/p&gt;
&lt;p&gt;â¦â¦ä¸éå§å°±ééº¼è¤éï¼å¥½å¦æåçä¾å­æ²æç¨å° migration å¤§å¤æ¸çåè½ï¼åªæç¨å® initiate databaseãå§å»ºç app é½æèªå·±ç database schemaï¼å¯ä»¥ç¨å®æè³æåº«ç table&amp;nbsp;å»ºåºä¾ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; python manage.py migrate
&lt;span class="go"&gt;Operations to perform:&lt;/span&gt;
&lt;span class="go"&gt;  Synchronize unmigrated apps: messages, staticfiles&lt;/span&gt;
&lt;span class="go"&gt;  Apply all migrations: sessions, auth, contenttypes, admin&lt;/span&gt;
&lt;span class="go"&gt;Synchronizing apps without migrations:&lt;/span&gt;
&lt;span class="go"&gt;  Creating tables...&lt;/span&gt;
&lt;span class="go"&gt;    Running deferred SQL...&lt;/span&gt;
&lt;span class="go"&gt;  Installing custom SQL...&lt;/span&gt;
&lt;span class="go"&gt;Running migrations:&lt;/span&gt;
&lt;span class="go"&gt;  Rendering model states... DONE&lt;/span&gt;
&lt;span class="go"&gt;  Applying contenttypes.0001_initial... OK&lt;/span&gt;
&lt;span class="go"&gt;  Applying auth.0001_initial... OK&lt;/span&gt;
&lt;span class="go"&gt;  Applying admin.0001_initial... OK&lt;/span&gt;
&lt;span class="go"&gt;  Applying contenttypes.0002_remove_content_type_name... OK&lt;/span&gt;
&lt;span class="go"&gt;  Applying auth.0002_alter_permission_name_max_length... OK&lt;/span&gt;
&lt;span class="go"&gt;  Applying auth.0003_alter_user_email_max_length... OK&lt;/span&gt;
&lt;span class="go"&gt;  Applying auth.0004_alter_user_username_opts... OK&lt;/span&gt;
&lt;span class="go"&gt;  Applying auth.0005_alter_user_last_login_null... OK&lt;/span&gt;
&lt;span class="go"&gt;  Applying auth.0006_require_contenttypes_0002... OK&lt;/span&gt;
&lt;span class="go"&gt;  Applying sessions.0001_initial... OK&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;migration å°±æä¸æ­¥æ­¥æ database èª¿æ´å°ç¬¦åç¾å¨ code ççæï¼éäºèª¿æ´å°±æè¨éå¨ &lt;code&gt;&amp;lt;app&amp;gt;/migrations/&lt;/code&gt; åºä¸ï¼ç­ç­å°±æçå°äºã&lt;/p&gt;
&lt;h3 id="url-dispatcher"&gt;&lt;span class="caps"&gt;URL&lt;/span&gt;&amp;nbsp;dispatcher&lt;/h3&gt;
&lt;p&gt;æåæ¥ä¸ä¾è¦æ¹é¦é ï¼æ Django é è¨­ç &lt;code&gt;/&lt;/code&gt; é¦é ææ Hello&amp;nbsp;Worldã&lt;/p&gt;
&lt;p&gt;Flask &lt;span class="caps"&gt;URL&lt;/span&gt; routing æ¯ç´æ¥ç¨ decorator å¯«å¨ view function&amp;nbsp;ä¸é¢ãå¹«å¤§å®¶åé¡§ä¸ä¸ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;index&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;lt;p&amp;gt;Hello World!&amp;lt;/p&amp;gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Django ç view å &lt;span class="caps"&gt;URL&lt;/span&gt; æ¯åéçï¼é¦åæ¯&amp;nbsp;viewï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# draw_member/views.py&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.shortcuts&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;render&lt;/span&gt;  &lt;span class="c1"&gt;# åæ«æçè&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.http&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;HttpResponse&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;home&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;HttpResponse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;lt;p&amp;gt;Hello World!&amp;lt;/p&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;çµæ§ä¸å¤§åå°ç°ï¼ä¹å çºæ &lt;a href="http://wsgi.org/"&gt;&lt;span class="caps"&gt;WSGI&lt;/span&gt;&lt;/a&gt;&amp;nbsp;è¦ç¯çéä¿å¦ï¼ã&lt;/p&gt;
&lt;p&gt;åä¾æ¯ &lt;span class="caps"&gt;URL&lt;/span&gt; è¨­å®ãæååæ &lt;span class="caps"&gt;URL&lt;/span&gt; å å¨ project è¨­å®ãééå¯è½è¦ºå¾è¨­å®æé»åæ£æ¯è¼æªï¼ç­ä¸ä¸åæå®æ¾å° app&amp;nbsp;è£¡é¢ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# draw_site/urls.py&lt;/span&gt;
&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;draw_site URL Configuration&lt;/span&gt;

&lt;span class="sd"&gt;The `urlpatterns` list routes URLs to views. For more information please see:&lt;/span&gt;
&lt;span class="sd"&gt;    https://docs.djangoproject.com/en/1.8/topics/http/urls/&lt;/span&gt;
&lt;span class="sd"&gt;...&lt;/span&gt;
&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.conf.urls&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;include&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.contrib&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;admin&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;draw_member.views&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;home&lt;/span&gt;

&lt;span class="n"&gt;urlpatterns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
    &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;r&amp;#39;^$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;home&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;r&amp;#39;^admin/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;include&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;admin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;site&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;urls&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ¦å¿µä¹å¾ç°¡å®ï¼æè¦ç view function å¾ app import é²ä¾ï¼æä»¥ app ç®éæ¯å Python moduleï¼åºä¸æ &lt;code&gt;__init__.py&lt;/code&gt;ï¼ï¼çµ¦ä¸å regex è¡¨ç¤ºçè·¯å¾ï¼å¾é¢æ¾ä¸èç function ä»¥åä¸å optional çåå­ï¼éååå­å°±ä»£è¡¨äºéå &lt;span class="caps"&gt;URL&lt;/span&gt;&amp;nbsp;è·¯å¾ï¼ä¹å¾å¯ä»¥åæ¥ã&lt;/p&gt;
&lt;p&gt;æ¸¬ä¸ä¸ç¢ºèªè¨­å®é½æ¯æ­£ç¢ºçã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; curl -XGET &lt;span class="s2"&gt;&amp;quot;localhost:8000&amp;quot;&lt;/span&gt;
&lt;span class="go"&gt;&amp;lt;p&amp;gt;Hello World!&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åçä¸ä¸ &lt;code&gt;draw_site/urls.py&lt;/code&gt;ï¼å¯ä»¥çå° Django é è¨­æ¾äºå &lt;code&gt;/admin&lt;/code&gt; å¾é¢ç¨çæ¯ &lt;code&gt;include(app.urls)&lt;/code&gt;ï¼è¡¨ç¤ºéä¸æ´ååªè¦æ¯ admin/ éé ­ç &lt;span class="caps"&gt;URL&lt;/span&gt; é½äº¤çµ¦ admin.site.urls å»èçè·¯å¾ãéæ¨£æ¹ä¾¿ app å¨ä¸åç¶²ç«ä¸­éè¦å©ç¨ï¼å çºå¯è½æ¾çè·¯å¾é½ä¸ä¸æ¨£ï¼ä½ä¸å app å§ç &lt;span class="caps"&gt;URL&lt;/span&gt;&amp;nbsp;èçææä¸è´æ§ã&lt;/p&gt;
&lt;p&gt;é¦¬ä¸ä¾æ¹å¯«ä¸ä¸ãé¦åå¨ app &lt;strong&gt;draw_member&lt;/strong&gt; åºä¸å ä¸å &lt;code&gt;urls.py&lt;/code&gt;ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# draw_member/urls.py&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.conf.urls&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;include&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;.views&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;home&lt;/span&gt;  &lt;span class="c1"&gt;# explicit relative import&lt;/span&gt;

&lt;span class="n"&gt;urlpatterns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
    &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;r&amp;#39;^$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;home&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åºæ¬ä¸æ ¼å¼å°±æ¯ç§æåæ¬å°±æçãå çºæ¾å¨åå app è£¡é¢äºï¼import view æå°±å¯ä»¥ç¨ explicit relative importï¼éä¸æ¯ relative import&amp;nbsp;åï¼&lt;/p&gt;
&lt;p&gt;åæ¬ç urls.py å°±æ¹ææ &lt;span class="caps"&gt;URL&lt;/span&gt; çèçãdispatchãçµ¦éå&amp;nbsp;appï¼æ¹æåºä¸éæ¨£ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# draw_site/urls.py&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.conf.urls&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;include&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.contrib&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;admin&lt;/span&gt;


&lt;span class="n"&gt;urlpatterns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
    &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;r&amp;#39;^admin/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;include&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;admin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;site&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;urls&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
    &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;r&amp;#39;^&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;include&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;draw_member.urls&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;r'^'&lt;/code&gt; ä»£è¡¨å¾æ ¹ç®éå°±äº¤çµ¦éå app å»ç®¡çï¼ä¹å çºéæ¨£æ¯è¼å°ä¸çè·¯å¾è¦æ¾åé¢ï¼åæ¯ /adminãç¨å­ä¸²è¡¨ç¤ºå¨å·è¡çæåæ import éå moduleï¼ä¸æ³ä¹å¯ä»¥æ¿æå­ä¸²æ app import&amp;nbsp;é²ä¾ã&lt;/p&gt;
&lt;p&gt;ä»¥ä¸å°±æ¯æåºæ¬ç &lt;a href="https://docs.djangoproject.com/en/1.8/topics/http/urls/"&gt;&lt;span class="caps"&gt;URL&lt;/span&gt; dispatching&lt;/a&gt;ã&lt;/p&gt;
&lt;h3 id="django-model-and-orm"&gt;Django Model and &lt;span class="caps"&gt;ORM&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;æ¥èèçè³æåº«çåé¡ãç¶ç¶å¯ä»¥å¨ Django è£¡é¢å¯« raw &lt;span class="caps"&gt;SQL&lt;/span&gt;ï¼ä½ééæä¾å¦ä¸åæ³æ³ï¼Object-relational Mapping (&lt;span class="caps"&gt;ORM&lt;/span&gt;)ã&lt;span class="caps"&gt;ORM&lt;/span&gt; æè³æç¨ç©ä»¶å°åçæ¹å¼æ´çï¼æ &lt;span class="caps"&gt;SQL&lt;/span&gt;ãtableãdatabase çç´°ç¯äº¤çµ¦ &lt;span class="caps"&gt;ORM&lt;/span&gt; engine&amp;nbsp;å»ç¿»è­¯ãéå¯ä»¥å¨æ¾å°éå¸¸å¤ä»ç´¹ï¼ç´æ¥è·³å°å¯¦ä½ã&lt;/p&gt;
&lt;pre style="font-family: Consolas, 'Courier New', monospace"&gt;
    âââââââââââââââââââââââ
    â members             â
    âââââââââââââââââââââââ¤
    â id          INTEGER â &lt;ââ
    â name           TEXT â   â
    â group_name     TEXT â   â
    âââââââââââââââââââââââ   â
                              â
    âââââââââââââââââââââââ   â
    â draw_histories      â   â foreign
    âââââââââââââââââââââââ¤   â key
    â memberid    INTEGER â âââ
    â time       DATETIME â
    âââââââââââââââââââââââ
&lt;/pre&gt;

&lt;p&gt;åæ³ä¸ä¸æåç schema è¨­è¨ãæ¹ç¨ &lt;span class="caps"&gt;ORM&lt;/span&gt; ä¾æèæåå°±æææå¡ï¼Memberï¼ä»¥åæ½ç±¤æ­·å²ï¼Historyï¼å©å¤§ modelsã&lt;strong&gt;Member&lt;/strong&gt; è¨éäºåå­èæå±¬åé«ï¼&lt;strong&gt;History&lt;/strong&gt;&amp;nbsp;æè¨éæéãéç­æ½ç±¤æ¯å±¬æ¼åªåæå¡çã&lt;/p&gt;
&lt;p&gt;å¨ Django ä¸­ï¼model å®ç¾©å¨ &lt;code&gt;models.py&lt;/code&gt; è£¡é¢ï¼é¦¬ä¸ä¾å¯«å¯«çã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# draw_members/models.py&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.db&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.utils.timezone&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;now&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Member&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;256&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;group_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;256&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__str__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt; of &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group_name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;History&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;member&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ForeignKey&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;related_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;draw_histories&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# now() will return datetime.utcnow()&lt;/span&gt;
    &lt;span class="n"&gt;time&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DateTimeField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;default&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__str__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt; at &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;member&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¸å class è£¡çå±¬æ§å°±å°æå°ä¸åæ¬ä½ï¼Fieldï¼ï¼æ¬ä½ææä»çåå¥ä»¥åè³æåº«å¯¦ä½ä¸çéå¶ï¼ä¾å¦å­ä¸²æä¸éï¼ç¶ç¶ä¹å¯ä»¥ä¸è¨­ï¼ãField type å¯ä»¥åè&lt;a href="https://docs.djangoproject.com/en/1.8/ref/models/fields/#field-types"&gt;å®ç¶²&lt;/a&gt;ã&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Member&lt;/strong&gt; åºä¸é½æ¯å­ä¸²æä»¥æ¯ &lt;code&gt;CharField&lt;/code&gt;ã &lt;strong&gt;History&lt;/strong&gt; ç¨å¾®è¤éä¸é»ï¼æéçè¨é date ç¨ &lt;code&gt;DateTimeField&lt;/code&gt;ï¼éæ¨£æ¬ä½æ¿åä¾å°±æè½ææ Python datetime objectï¼å¦ä¸å member ç¨çæ¯ &lt;code&gt;ForeignKey&lt;/code&gt;ï¼ä¹å°±æ¯ relationship fieldï¼ä¾è¡¨ç¤ºéç­æ½ç±¤å±¬æ¼æ¿åæå¡ãå¾é¢ç &lt;code&gt;related_name&lt;/code&gt; æä¾äºåæ¥åè½ï¼ä¹å°±æ¯è½å¾ä¸å member å»æ¥ä»ææç&amp;nbsp;historiesã&lt;/p&gt;
&lt;p&gt;åæåå¯«å¥½å©å class åºä¸ç &lt;code&gt;__str__&lt;/code&gt;ï¼éæ¨£ç­ä¸å¨ Python shell&amp;nbsp;æä½æå®¹æè¾¨èªæ¯åç©ä»¶çå§å®¹ã&lt;/p&gt;
&lt;h4 id="migration-the-tracker-of-model-changes"&gt;Migration the tracker of model&amp;nbsp;changes&lt;/h4&gt;
&lt;p&gt;å¤èªªç¡ç¨ï¼é¦¬ä¸ä¾è©¦ä¸è©¦ã&lt;/p&gt;
&lt;p&gt;â¦â¦ç­ç­ï¼æ³å° migration äºåï¼æ¯æ¬¡æ´å database model é½è¦è· migrationï¼ç¢ºä¿ code&amp;nbsp;èè³æåº«çæä¸è´ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; python manage.py makemigrations draw_member
&lt;span class="go"&gt;python manage.py makemigrations draw_member&lt;/span&gt;
&lt;span class="go"&gt;Migrations for &amp;#39;draw_member&amp;#39;:&lt;/span&gt;
&lt;span class="go"&gt;  0001_initial.py:&lt;/span&gt;
&lt;span class="go"&gt;    - Create model History&lt;/span&gt;
&lt;span class="go"&gt;    - Create model Member&lt;/span&gt;
&lt;span class="go"&gt;    - Add field member to history&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯ä»¥çå° Django å¾è°æçç¥éæåå¤å®ç¾©äºå©å modelsï¼è£¡é¢æäºå°æå°è³æåº«çæ¬ä½åæãéäºè³è¨æå¯«å¨ migration file&amp;nbsp;è£¡é¢ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# draw_member/migrations/0001_initial.py&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Migration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;migrations&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Migration&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

    &lt;span class="n"&gt;dependencies&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="n"&gt;operations&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
        &lt;span class="n"&gt;migrations&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CreateModel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;History&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;fields&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AutoField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;serialize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;primary_key&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;verbose_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;auto_created&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
                &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;time&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DateTimeField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;default&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;django&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;utils&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
            &lt;span class="p"&gt;],&lt;/span&gt;
        &lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="n"&gt;migrations&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CreateModel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Member&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;fields&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AutoField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;serialize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;primary_key&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;verbose_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;auto_created&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
                &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;256&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
                &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;group_name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;256&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
            &lt;span class="p"&gt;],&lt;/span&gt;
        &lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="n"&gt;migrations&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="n"&gt;model_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;history&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;member&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;field&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ForeignKey&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;draw_member.Member&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;related_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;draw_histories&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨æå° Django &lt;span class="caps"&gt;ORM&lt;/span&gt; èªåå¹«æåå äº &lt;code&gt;id&lt;/code&gt; éå primary keyï¼ç­ç­å°±æç¨å°ãMigration è£¡é¢çç´°ç¯ç­å° Django&amp;nbsp;æ´çäºä¹å¾å°±è½æ¢æ¢äºè§£äºã&lt;/p&gt;
&lt;p&gt;æäºæ°ç migration&amp;nbsp;å°±è¦åæ­¥è³æåº«ççæï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; python manage.py migrate
&lt;span class="go"&gt;...&lt;/span&gt;
&lt;span class="go"&gt;Running migrations:&lt;/span&gt;
&lt;span class="go"&gt;  Rendering model states... DONE&lt;/span&gt;
&lt;span class="go"&gt;  Applying draw_member.0001_initial... OK&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="orm-queries-in-shell"&gt;&lt;span class="caps"&gt;ORM&lt;/span&gt; queries in&amp;nbsp;shell&lt;/h4&gt;
&lt;p&gt;æ¥ä¸ä¾æåæä½ä¸ä¸ &lt;span class="caps"&gt;ORM&lt;/span&gt;ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python manage.py shell
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å°±ææéä¸å Python shellãå¦æè£äº IPython å°±ææé IPython shellã
éåèä¸è¬çæä»éº¼å·®å¥å¢ï¼ä»æå¸¶æ Django project çè¨­å®ãå¦ææ¯å¾ä¸è¬ç shell&amp;nbsp;å¯ä»¥åè·ä»¥ä¸çæä»¤ä¾éå°ç¸åçææã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="go"&gt;$ DJANGO_SETTINGS_MODULE=&amp;quot;draw_site.settings&amp;quot; python&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;django&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;django&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;draw_member.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;History&lt;/span&gt;
&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;m1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;é«å ç©ä¹æ&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;group_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Î¼&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;m2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;å¹³æ²¢ å¯&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;group_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;K-ON!&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;m1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m2&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;é«å&lt;/span&gt; &lt;span class="err"&gt;ç©ä¹æ&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="err"&gt;Î¼&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;s&amp;gt;, &amp;lt;Member: å¹³æ²¢ å¯ of K-ON!&amp;gt;)&lt;/span&gt;
&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;m1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;m2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;History&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;member&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;m1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½¿ç¨ä¸å°±æè³æç¶ä½ç©ä»¶ä¾æä½ï¼å¦å &lt;span class="caps"&gt;ORM&lt;/span&gt; å­é¢çææãæ³¨æåªæå¨ &lt;code&gt;.save()&lt;/code&gt; æçæ­£è¢«å­å°è³æè£¡ãæ¿æ²æå­ç object ä¾æä½ database å°±æåºç¾&amp;nbsp;exceptionã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;h_failed&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;History&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;member&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;FF&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;group_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;f&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;h_failed&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="gt"&gt;Traceback (most recent call last):&lt;/span&gt;
&lt;span class="c"&gt;...&lt;/span&gt;
&lt;span class="gr"&gt;IntegrityError&lt;/span&gt;: &lt;span class="n"&gt;NOT NULL constraint failed: draw_member_history.member_id&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¦ºå¾éº»ç©çè©±ï¼ç¨ &lt;code&gt;Model.objects.create()&lt;/code&gt; å°±å¯ä»¥ä¸æ­¥æå®ãæ­£ç¢ºçå­å¥½ä¹å¾ï¼ç¾å¨è³æåº«å·²ç¶æè³æäºãæåå¯ä»¥åå¨ SQLite&amp;nbsp;è£¡ç¢ºèªã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="go"&gt;-- sqlite3 db.sqlite3&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;header&lt;/span&gt; &lt;span class="k"&gt;on&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;draw_member_member&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="go"&gt;id|name|group_name&lt;/span&gt;
&lt;span class="go"&gt;1|é«å ç©ä¹æ|Î¼&amp;#39;s&lt;/span&gt;
&lt;span class="go"&gt;2|å¹³æ²¢ å¯|K-ON!&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;draw_member_history&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="go"&gt;id|time|member_id&lt;/span&gt;
&lt;span class="go"&gt;1|2015-10-05 15:17:32.061384|1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ééååå object çæä½ï¼æåä¹è½å»ºåºå¦åæå¯« &lt;span class="caps"&gt;SQL&lt;/span&gt; ä¸æ¨£çè³æåº«ï¼ç¶ç¶å &lt;code&gt;id&lt;/code&gt;ã&lt;code&gt;member_id&lt;/code&gt; éäºæ¬ä½æ¯ &lt;span class="caps"&gt;ORM&lt;/span&gt; engine&amp;nbsp;èªåå¹«æåååºä¾çï¼éäºå¯ä»¥èªè¨ï¼ä¸éé è¨­çè¡çºä¸é£çè§£ã&lt;/p&gt;
&lt;p&gt;è¦æéº¼å¾ &lt;span class="caps"&gt;ORM&lt;/span&gt; åååä¸ &lt;span class="caps"&gt;SQL&lt;/span&gt;&amp;nbsp;ä¸æ¨£æè³æå¢ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;draw_member.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;History&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="go"&gt;[&amp;lt;Member: é«å ç©ä¹æ of Î¼&amp;#39;s&amp;gt;, &amp;lt;Member: å¹³æ²¢ å¯ of K-ON!&amp;gt;]&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;History&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="go"&gt;[&amp;lt;History: é«å ç©ä¹æ at 2015-10-05 15:17:32.061384+00:00&amp;gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è³æéé &lt;code&gt;Model.objects&lt;/code&gt; éå Manager å»æ¥è©¢ï¼ç´°ç¯å°±å»ç Django éæ¼ &lt;a href="https://docs.djangoproject.com/en/1.8/topics/db/queries"&gt;Making queries&lt;/a&gt; çå§å®¹å§ãæ¥è©¢è³æåº«å°±æåå³ &lt;a href="https://docs.djangoproject.com/en/1.8/ref/models/querysets/#django.db.models.query.QuerySet"&gt;QuerySet&lt;/a&gt;ï¼éä¸¦ä¸æççå»ãæ¥ãè³æåº«ï¼ä½åææä»¤å­èç­ççè¦ç¨å°å¼ææå»è¨ç®ï¼ä¹å°±æ¯ lazy&amp;nbsp;evaluationã&lt;/p&gt;
&lt;p&gt;QuerySet åºä¸å°±æå¾å¤å°æå° &lt;span class="caps"&gt;SQL&lt;/span&gt; æä»¤çæ¥è©¢ï¼åæ¯æ¿åææ objects ç &lt;code&gt;QuerySet.all()&lt;/code&gt;ï¼åé¢å·²ç¶ç¨éäºãæèç¯©é¸ç &lt;code&gt;QuerySet.filter()&lt;/code&gt;ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;group_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;K-ON!&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;[&amp;lt;Member: å¹³æ²¢ å¯ of K-ON!&amp;gt;]&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;group_name__contains&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;!&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;[&amp;lt;Member: å¹³æ²¢ å¯ of K-ON!&amp;gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¶ä¸­ &lt;code&gt;&amp;lt;field&amp;gt;__contains&lt;/code&gt; å°±æ¯ Django &lt;span class="caps"&gt;ORM&lt;/span&gt; çºäºå¯¦åå &lt;span class="caps"&gt;SQL&lt;/span&gt; &lt;code&gt;LIKE&lt;/code&gt; æä»¤çå°ææ¬ä½ã&lt;/p&gt;
&lt;p&gt;åè¬å¹¾åæéçï¼é¦åæ¯å Model é½æå primary key &lt;code&gt;pk&lt;/code&gt;ï¼é è¨­æå° &lt;code&gt;Model.id&lt;/code&gt; éåæ¬ä½ä¸ï¼å¦ç¨ &lt;code&gt;QuerySet.get()&lt;/code&gt; å¯ä»¥æ¿å°å®ä¸ç©ä»¶ï¼éæåè¬ç¨ç pk&amp;nbsp;å°±æ´¾ä¸ç¨å ´äºã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pk&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;&amp;lt;Member: é«å ç©ä¹æ of Î¼&amp;#39;s&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ¥ relation&amp;nbsp;ä¹å¾ç°¡å®ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;h1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;History&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pk&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;member&lt;/span&gt;
&lt;span class="go"&gt;&amp;lt;Member: é«å ç©ä¹æ of Î¼&amp;#39;s&amp;gt;&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;member&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;
&lt;span class="go"&gt;&amp;#39;é«å ç©ä¹æ&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éè¨å¾ä¹åè¨­å¾ &lt;code&gt;related_name="draw_histories"&lt;/code&gt;ï¼è¡¨ç¤ºæåè½å¾ &lt;strong&gt;Member&lt;/strong&gt;&amp;nbsp;åæ¥åå»è©²äººç¸éçæ­·å²ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;m1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pk&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;m1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;draw_histories&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="go"&gt;[&amp;lt;History: é«å ç©ä¹æ at 2015-10-05 15:17:32.061384+00:00&amp;gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æå¾æåä¾åªè³æï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;History&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¶ç¶ä¸éå§æåå¯ä»¥æ´åæ &lt;code&gt;db.sqlite3&lt;/code&gt; æ´ååªæåéæ° &lt;code&gt;python manage.py migrate&lt;/code&gt; ä¸æ¬¡å°±å¯ä»¥è® database å°æç table é½å»ºç«å¥½ï¼ä¸éåªé©ç¨æ¼ SQLite èå·²ãæèï¼æ­£ç¢ºçãæ¸ç©ºè³æåº«ãåæ³æ¯ç¨ &lt;code&gt;flush&lt;/code&gt; æä»¤ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; python manage.py flush
&lt;span class="go"&gt;You have requested a flush of the database.&lt;/span&gt;
&lt;span class="go"&gt;This will IRREVERSIBLY DESTROY all data currently in the &amp;#39;draw_site/db.sqlite3&amp;#39; database,&lt;/span&gt;
&lt;span class="go"&gt;and return each table to an empty state.&lt;/span&gt;
&lt;span class="go"&gt;Are you sure you want to do this?&lt;/span&gt;

&lt;span class="go"&gt;    Type &amp;#39;yes&amp;#39; to continue, or &amp;#39;no&amp;#39; to cancel: yes&lt;/span&gt;
&lt;span class="go"&gt;Installed 0 object(s) from 0 fixture(s)&lt;/span&gt;
&lt;span class="go"&gt;Installed 0 object(s) from 0 fixture(s)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="data-in-orm-and-fixtures"&gt;Data in &lt;span class="caps"&gt;ORM&lt;/span&gt; and&amp;nbsp;fixtures&lt;/h4&gt;
&lt;p&gt;æåæ &lt;code&gt;members.csv&lt;/code&gt; çè³æå¡«å°è³æåº«å§ãééå°±ä¸ç¨ç´°èªªäºã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;csv&lt;/span&gt;
&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;../../draw_member/members.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;newline&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
   &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;    &lt;span class="n"&gt;csv_reader&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;csv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DictReader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;    &lt;span class="n"&gt;members&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
   &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
   &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;csv_reader&lt;/span&gt;
   &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;    &lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;draw_member.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Member&lt;/span&gt;
&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;members&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
   &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;     &lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;group_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
   &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯ä»¥èªå·±æª¢æ¥ä¸ä¸æ¯ä¸æ¯ 14&amp;nbsp;åäººé½å¯«å°è³æåº«äºã&lt;/p&gt;
&lt;p&gt;ä¸éç¾å¨æååé¡æ¯ï¼ä¹å¾å¯è½æå¸¸å¸¸æè³æåº«ç æéç·´ï¼æèè¦æéäºï¼æå¾å¤ä¾æºï¼çè³æè®å°è³æåº«ï¼æ¯æ¬¡é½éæ°è®å¯«ä¹æ¯å¯ä»¥ï¼ä½ææ²æå¥çåæ³è½æè³æåå­èµ·ä¾ï¼&lt;/p&gt;
&lt;p&gt;ééå°±è¦ä»ç´¹ &lt;a href="https://docs.djangoproject.com/en/1.8/howto/initial-data/#providing-initial-data-with-fixtures"&gt;Django fixtures&lt;/a&gt; äºãä»è½æè³æåº«çè³æå­æ &lt;span class="caps"&gt;JSON&lt;/span&gt;ã&lt;span class="caps"&gt;YAML&lt;/span&gt;ï¼éè¦ &lt;a href="http://pyyaml.org/"&gt;PyYAML&lt;/a&gt;ï¼ç­æ ¼å¼ã&lt;/p&gt;
&lt;p&gt;ä¸è¬ fixtures æ¯è¢«å¨ &lt;code&gt;&amp;lt;app&amp;gt;/fixtures/&lt;/code&gt; ç®éåºä¸ï¼è¨å¾åæç®éå»ºåºä¾ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mkdir draw_member/fixtures
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ ¹æ database çå§å®¹å»ºç« fixtures å¯ä»¥ä½¿ç¨ &lt;code&gt;dumpdata&lt;/code&gt; æä»¤ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;python manage.py dumpdata &lt;span class="se"&gt;\&lt;/span&gt;
    --format&lt;span class="o"&gt;=&lt;/span&gt;yaml &lt;span class="se"&gt;\&lt;/span&gt;
    --indent&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    --output draw_member/fixtures/anime_members.yaml
    draw_member.Member &lt;span class="se"&gt;\&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# draw_member/fixtures/anime_members.yaml&lt;/span&gt;
&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;   &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fields&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="p p-Indicator"&gt;{&lt;/span&gt;&lt;span class="nv"&gt;group_name&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\u03BC&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="p p-Indicator"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\u9AD8\u5742&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="se"&gt;\u7A42\u4E43\u679C&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p p-Indicator"&gt;}&lt;/span&gt;
    &lt;span class="l l-Scalar l-Scalar-Plain"&gt;model&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;draw_member.member&lt;/span&gt;
    &lt;span class="l l-Scalar l-Scalar-Plain"&gt;pk&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;1&lt;/span&gt;
&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;   &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fields&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="p p-Indicator"&gt;{&lt;/span&gt;&lt;span class="nv"&gt;group_name&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\u03BC&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="p p-Indicator"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\u7D62\u702C&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="se"&gt;\u7D75\u91CC&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p p-Indicator"&gt;}&lt;/span&gt;
    &lt;span class="l l-Scalar l-Scalar-Plain"&gt;model&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;draw_member.member&lt;/span&gt;
    &lt;span class="l l-Scalar l-Scalar-Plain"&gt;pk&lt;/span&gt;&lt;span class="p p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;2&lt;/span&gt;
&lt;span class="c1"&gt;# ...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¨ &lt;span class="caps"&gt;JSON&lt;/span&gt; è¼¸åºä¹å¯ä»¥ï¼æ¹æ &lt;code&gt;--format=json&lt;/code&gt; å°±å¯ä»¥äº&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;quot;model&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;draw_member.member&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;quot;pk&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;quot;fields&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;\u9ad8\u5742 \u7a42\u4e43\u679c&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;group_name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;\u03bc&amp;#39;s&amp;quot;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;},&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æåå¯ä»¥ç¨ &lt;code&gt;python manage.py flush&lt;/code&gt; æè³æåº«æ¸æï¼æ¨¡æ¬è³æçè®å¥ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; python manage.py loaddata anime_members.yaml
&lt;span class="go"&gt;Installed 14 object(s) from 1 fixture(s)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éæ¨£è³æçå­åå°±ä»ç´¹å¾å·®ä¸å¤äºãæ´å¤çç´°ç¯å¯ä»¥åè&lt;a href="https://docs.djangoproject.com/en/1.8/#the-model-layer"&gt;å®ç¶² model layer&lt;/a&gt;&amp;nbsp;çèªªæã&lt;/p&gt;
&lt;h3 id="django-template"&gt;Django&amp;nbsp;Template&lt;/h3&gt;
&lt;p&gt;å¨é²è¡ä¸å»ä¹åï¼åç¢ºèªæåçç®éçµæ§æ¯ä¸æ¨£çã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;demo_django_draw_member/
âââ draw_site/
    âââ db.sqlite3
    âââ draw_member/
    âÂ Â  âââ __init__.py
    âÂ Â  âââ admin.py
    âÂ Â  âââ fixtures/
    âÂ Â  âÂ Â  âââ anime_members.json
    âÂ Â  âÂ Â  âââ anime_members.yaml
    âÂ Â  âââ migrations/
    âÂ Â  âÂ Â  âââ 0001_initial.py
    âÂ Â  âÂ Â  âââ __init__.py
    âÂ Â  âââ models.py
    âÂ Â  âââ tests.py
    âÂ Â  âââ urls.py
    âÂ Â  âââ views.py
    âââ draw_site/
    âÂ Â  âââ __init__.py
    âÂ Â  âââ settings.py
    âÂ Â  âââ urls.py
    âÂ Â  âââ wsgi.py
    âââ manage.py*
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Django ç template é è¨­æ¯æ¾å¨ &lt;code&gt;&amp;lt;app&amp;gt;/templates/&lt;/code&gt; åºä¸ãä¸éçºäºå¨è·¨ app æä¸è¦è¡å°åå­ï¼æåæå¤åä¸å±¤ app&amp;nbsp;çºåçè³æå¤¾ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mkdir -p draw_member/templates/draw_member
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å®è· Flask ç¨ç Jinja2 templates ä¹çä¸éå¸¸é¡ä¼¼ï¼Jinja2 æ¨¡ä»¿ Django templateï¼ï¼å©èæå¤§çå·®å¥æ¯å¨ Jinja2 è£¡è½å¾èªç±çä½¿ç¨ Python functionï¼ä¸é Django é çæ¯ template tag ä»¥å&amp;nbsp;filterãæåçä¾å­å©èæ¯æ²å·®å¤å°ã&lt;/p&gt;
&lt;p&gt;ä¸æ¨£åæ &lt;code&gt;base.html&lt;/code&gt; ä»¥å &lt;code&gt;home.html&lt;/code&gt; ååºä¾ãæåä¹åæ Form å¯«ä¸äºï¼æ«æåç¨ &lt;span class="caps"&gt;GET&lt;/span&gt;ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;{# draw_member/templates/draw_member/base.html #}&lt;/span&gt;
&lt;span class="cp"&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt; &lt;span class="na"&gt;lang&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;en&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;head&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;meta&lt;/span&gt; &lt;span class="na"&gt;charset&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;UTF-8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;meta&lt;/span&gt; &lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;viewport&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;content&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;width=device-width&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;title&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;æ½ç±¤ç³»çµ±&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="nv"&gt;title&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;head&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;hr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;h3&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;åè½å&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;h3&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;ul&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;li&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;url&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;home&amp;#39;&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;é¦é ï¼æ½ç±¤ï¼&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;li&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;li&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;url&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;history&amp;#39;&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;æ­·å²è¨é&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;li&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;ul&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;{# draw_member/templates/draw_member/home.html #}&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;extends&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;draw_member/base.html&amp;#39;&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;

&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;ä¾æ½åºå¿«æ¨çå¤¥ä¼´å§ï¼&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;é¸æè¦è¢«æ½çåé«&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;form&lt;/span&gt; &lt;span class="na"&gt;action&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;url&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;draw&amp;#39;&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;method&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;get&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;label&lt;/span&gt; &lt;span class="na"&gt;for&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;group_name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;åéåç¨±ï¼&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;label&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;input&lt;/span&gt; &lt;span class="na"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;radio&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;group_name&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Î¼&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Î¼&amp;#39;s
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;input&lt;/span&gt; &lt;span class="na"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;radio&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;group_name&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;K-ON!&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;K-ON!
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;input&lt;/span&gt; &lt;span class="na"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;radio&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;group_name&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ALL&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;checked&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;ï¼å¨ï¼
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;input&lt;/span&gt; &lt;span class="na"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;submit&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Submit&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;form&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ´é«çæ¦å¿µæè©²å¾å¥½çè§£ã&lt;code&gt;{% url 'xxxx' %}&lt;/code&gt; å°±æ¯ &lt;span class="caps"&gt;URL&lt;/span&gt; resolverï¼éè¨å¾å¨ &lt;code&gt;urls.py&lt;/code&gt; çè¨­å®ææçµ¦å &lt;code&gt;name&lt;/code&gt; åæ¸åï¼ééå°±ææ ¹æé£ååå­åå³æ­£ç¢ºçç¶²åã&lt;/p&gt;
&lt;p&gt;é ä¾¿æ´æ°ä¸ä¸ &lt;span class="caps"&gt;URL&lt;/span&gt; æéäº view åå å¥½ï¼ä¸ç¶ç­ä¸ runserver&amp;nbsp;æèªªæ¾ä¸å°éäºç¶²åã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# draw_members/urls.py&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.conf.urls&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;include&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;.views&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;history&lt;/span&gt;

&lt;span class="n"&gt;urlpatterns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
    &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;r&amp;#39;^$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;home&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;r&amp;#39;^draw/$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;draw&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;r&amp;#39;^history/$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;history&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;history&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# draw_members/views.py&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.shortcuts&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;render&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.http&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;HttpResponse&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;home&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;HttpResponse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;lt;p&amp;gt;Hello World!&amp;lt;/p&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;HttpResponse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;lt;p&amp;gt;Draw&amp;lt;/p&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;history&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;HttpResponse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;lt;p&amp;gt;History&amp;lt;/p&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç·æ¥èæ¹å¯«æåçé¦é ï¼è®å®ç¨ä¸ &lt;code&gt;home.html&lt;/code&gt;ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;home&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;draw_member/home.html&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/10/django-draw-member/pics/django_home.png"/&gt;
  &lt;p class="caption"&gt;å ä¸ template&amp;nbsp;çé¦é &lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Template æ´å¤çèªªæå¯ä»¥åè&lt;a href="https://docs.djangoproject.com/en/1.8/#the-template-layer"&gt;å®ç¶² template layer&lt;/a&gt;&amp;nbsp;çèªªæã&lt;/p&gt;
&lt;h3 id="more-on-djangos-model-template-and-view-mtv"&gt;More on Django&amp;rsquo;s model, template and view (&lt;span class="caps"&gt;MTV&lt;/span&gt;)&lt;/h3&gt;
&lt;p&gt;æåææéè¦çæ½ç±¤åè½å¯¦ä½åºä¾å§ã&lt;/p&gt;
&lt;p&gt;éééè¦çè§£çå°±æ¯ï¼Django ææå³å° &lt;span class="caps"&gt;GET&lt;/span&gt; / &lt;span class="caps"&gt;POST&lt;/span&gt; çåæ¸ä»¥ dict å­å¨ &lt;code&gt;request.GET&lt;/code&gt; / &lt;code&gt;request.POST&lt;/code&gt; è£¡é¢ï¼&lt;code&gt;@require_GET&lt;/code&gt; éå¶åªè½ä½¿ç¨ &lt;span class="caps"&gt;GET&lt;/span&gt;&amp;nbsp;å»æºéã&lt;/p&gt;
&lt;p&gt;å¶ä»çéè¼¯é½æ¯ç§æä»¥åçã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;random&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.shortcuts&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;render&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.http&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;HttpResponse&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Http404&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.views.decorators.http&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;require_GET&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;.models&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;History&lt;/span&gt;

&lt;span class="nd"&gt;@require_GET&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;# Retrieve all related members&lt;/span&gt;
    &lt;span class="n"&gt;group_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GET&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;group_name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ALL&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;group_name&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ALL&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;valid_members&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;valid_members&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;group_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;group_name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# Raise 404 if no members are found given the group name&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;valid_members&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exists&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
        &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;Http404&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;No member in group &amp;#39;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;#39;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;group_name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# Lucky draw&lt;/span&gt;
    &lt;span class="n"&gt;lucky_member&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;choice&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;valid_members&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# Update history&lt;/span&gt;
    &lt;span class="n"&gt;draw_history&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;History&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;member&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;lucky_member&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;draw_history&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;HttpResponse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;&amp;lt;p&amp;gt;&lt;/span&gt;&lt;span class="si"&gt;{0.name}&lt;/span&gt;&lt;span class="s2"&gt;ï¼åé«ï¼&lt;/span&gt;&lt;span class="si"&gt;{0.group_name}&lt;/span&gt;&lt;span class="s2"&gt;ï¼&amp;lt;/p&amp;gt;&amp;quot;&lt;/span&gt;
        &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lucky_member&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¨ &lt;span class="caps"&gt;ORM&lt;/span&gt; å¯«èµ·ä¾æ¯ raw &lt;span class="caps"&gt;SQL&lt;/span&gt; ä¹¾æ·¨å¤äºï¼ä¸éä¸éå§è¦æå°æç function é½è¨èµ·ä¾å°±æ¯ã
é¦¬ä¸æ¸¬è©¦ä¸ä¸ï¼ä¸æ¨£å·æ¶åä¸å»å¯«&amp;nbsp;templateã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; curl -XGET &lt;span class="s2"&gt;&amp;quot;localhost:8000/draw/?group=ALL&amp;quot;&lt;/span&gt;
&lt;span class="go"&gt;&amp;lt;p&amp;gt;å°æ³ è±é½ï¼åé«ï¼Î¼&amp;#39;sï¼&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦ææ¯å¾é¦é å»é»çï¼è§å¯ä¸ä¸ç¶²åçè®åãä¾å¦ï¼&lt;code&gt;http://localhost:8000/draw/?group_name=K-ON!&lt;/code&gt;ï¼å¯ä»¥çå° form çé¸é ç´æ¥å¯«å¨ç¶²ååãéæ¯ä½¿ç¨ &lt;span class="caps"&gt;POST&lt;/span&gt; è &lt;span class="caps"&gt;GET&lt;/span&gt;&amp;nbsp;æå¤§çä¸åã&lt;/p&gt;
&lt;p&gt;åä¾ææ­·å²è¨éçé¨ä»½ä¹å¯«ä¸ä¸ï¼ä¹æ template&amp;nbsp;é½è£ä¸ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;{# draw_member/templates/history.html #}&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;extends&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;draw_member/base.html&amp;#39;&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;

&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;title&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;æ½ç±¤æ­·å²&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="nv"&gt;title&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;

&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;æ½ç±¤æ­·å²ï¼æè¿ 10 ç­ï¼&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;table&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;thead&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
      &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;åå­&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
      &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;åé«&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
      &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;æ½ä¸­æé&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;thead&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;tbody&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;history&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nv"&gt;recent_histories&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
      &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;history.member.name&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;history.member.group_name&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;history.time&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="nf"&gt;date&lt;/span&gt;&lt;span class="s2"&gt;:&amp;quot;r&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
      &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endfor&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;tbody&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;table&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;history.html èæ¬ä¾ Flask ä¸ä¸æ¨£çå°æ¹ï¼å¨ç¨ä¸äº &lt;code&gt;date:"r"&lt;/code&gt; ç filterï¼å³çåæ¸æ¥å¨ &lt;code&gt;:&lt;/code&gt; ä¹å¾ãä¹æ´æ°å°æ view&amp;nbsp;çåä½ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;history&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;recent_draws&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;History&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;order_by&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;-time&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="p"&gt;()[:&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;draw_member/history.html&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;recent_histories&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;recent_draws&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;})&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/10/django-draw-member/pics/django_history.png"/&gt;
&lt;/div&gt;

&lt;p&gt;å¯ä»¥çå°é è¨­ç¨çæ¯ &lt;span class="caps"&gt;UTC&lt;/span&gt; æåï¼æåçè½æç´°ç¯æ¾å°ææ«å§ãæåå¯ä»¥å¨ view&amp;nbsp;è£¡æ´æ¹è¦åç¾çæåï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.utils.timezone&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;activate&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;history&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;activate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Asia/Taipei&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# ...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/10/django-draw-member/pics/django_history_tz.png"/&gt;
&lt;/div&gt;

&lt;p&gt;éæ¨£åºæ¬åè½å°±æå®å¦ï¼ç´°ç¯ä¸æ¨£åè&lt;a href="https://docs.djangoproject.com/en/1.8/#the-view-layer"&gt;å®ç¶² view layer&lt;/a&gt;&amp;nbsp;çèªªæã&lt;/p&gt;
&lt;h3 id="django-form"&gt;Django&amp;nbsp;Form&lt;/h3&gt;
&lt;p&gt;ç´æ¥æ form å¯«å¨ template è£¡é¢ä¹æ¯å¯ä»¥ï¼ææå form å¯è½è· model æ¯æ¯ç¸éï¼èä¸ form input å¤äºä¹å¾æ¯åæ¬ä½é½è¦èªå·±è®å¯«ä¹å¤ªä¸ç´è¦ºãæ³è¦é©è¨¼ä½¿ç¨èç input&amp;nbsp;çè©±å°±æ´è¤éäºã&lt;/p&gt;
&lt;p&gt;æ¼æ¯å°±æäº Django&amp;nbsp;Formãé¦¬ä¸ä¾çç¨èµ·ä¾æ¯æéº¼æ¨£ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# draw_member/forms.py&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;DrawForm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Form&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;GROUP_CHOICES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Î¼&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Î¼&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;K-ON!&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;K-ON!&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;ALL&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;ï¼å¨ï¼&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;group&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ChoiceField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;choices&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;GROUP_CHOICES&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åéåç¨±&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;label_suffix&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ï¼&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;widget&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RadioSelect&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;initial&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ALL&amp;#39;&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å»ºäºä¸åæ°ç form classï¼å Model ä¸æ¨£ï¼è£¡é¢è¦å®äºæ¯åæ¬ä½çå±¬æ§ãæåééåªæä¸å &lt;code&gt;group&lt;/code&gt; æ¯åå®é¸ç ChoiceFieldï¼&lt;code&gt;choices&lt;/code&gt; æ¯å list of two-item&amp;nbsp;tuplesï¼ç¬¬ä¸åæ¯å§é¨çå¼ï¼ç¬¬äºåæ¯é¡¯ç¤ºçå­ãå¶ä»çé½æ¯ç´°ç¯çèª¿æ´ã&lt;/p&gt;
&lt;p&gt;æéå form ç¨å° view è£¡é¢ãæ°å»ºä¸å form object &lt;code&gt;form&lt;/code&gt;ï¼ç¶å¾æéåè®æ¸ &lt;code&gt;form&lt;/code&gt; å³é² template&amp;nbsp;è£¡é¢ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;.forms&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;DrawForm&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;home&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;form&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;DrawForm&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;draw_member/home.html&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;form&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;})&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åä¾ä¿®æ¹ templateï¼å°±ä¸ç¨èªå·±å¯« form çå§å®¹äºï¼æ¹æ &lt;code&gt;{{ form }}&lt;/code&gt; Django&amp;nbsp;å°±æèªåç¢çã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;{# draw_member/home.html #}&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;extends&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;draw_member/base.html&amp;#39;&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;

&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;ä¾æ½åºå¿«æ¨çå¤¥ä¼´å§ï¼&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;é¸æè¦è¢«æ½çåé«&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;form&lt;/span&gt; &lt;span class="na"&gt;action&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;url&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;draw&amp;#39;&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;method&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;get&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;form&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;input&lt;/span&gt; &lt;span class="na"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;submit&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Submit&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;form&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/10/django-draw-member/pics/django_form.png"/&gt;
&lt;/div&gt;

&lt;p&gt;ä¸ééåé·å¾è·æååæ¬ç form ä¸ä¸æ¨£åãå¥½å¨ Django form æ¯å¾å½æ§çï¼form å¨è¢« render æ &lt;span class="caps"&gt;HTML&lt;/span&gt; æå¯ä»¥æä¾ç´°ç¯çèª¿æ´ï¼å¤§å®¶å¯ä»¥åè&lt;a href="https://docs.djangoproject.com/en/1.8/topics/forms/#form-rendering-options"&gt;å®ç¶² Form rendering options&lt;/a&gt;&amp;nbsp;èª¿æ´ãæç´æ¥çµ¦èª¿å¥½ççµæå§ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;form&lt;/span&gt; &lt;span class="na"&gt;action&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;url&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;draw&amp;#39;&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;method&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;get&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;form.group.label_tag&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;
    &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;radio&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nv"&gt;form.group&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
      &lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;radio.tag&lt;/span&gt; &lt;span class="cp"&gt;}}{{&lt;/span&gt; &lt;span class="nv"&gt;radio.choice_label&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;
    &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endfor&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;input&lt;/span&gt; &lt;span class="na"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;submit&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Submit&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;form&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¨çµæå»å°ç§æ¯å &lt;code&gt;{{ ... }}&lt;/code&gt; é¨ä»¶å°æç &lt;span class="caps"&gt;HTML&lt;/span&gt;&amp;nbsp;åç´ å§ã&lt;/p&gt;
&lt;h4 id="more-django-form-in-view"&gt;More Django form in&amp;nbsp;view&lt;/h4&gt;
&lt;p&gt;Form çåè½å¯ä¸åªéæ¨£ï¼å¯ä»¥å¨åµå»º DrawForm æç´æ¥æ &lt;code&gt;request.GET&lt;/code&gt; å³å¥ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# draw_member/views.py&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;# Retrieve all related members&lt;/span&gt;
    &lt;span class="n"&gt;form&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;DrawForm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GET&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_valid&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
        &lt;span class="n"&gt;group_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cleaned_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;group&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;group_name&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ALL&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;valid_members&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;valid_members&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;group_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;group_name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="c1"&gt;# Raise 404 if no members are found given the group name&lt;/span&gt;
        &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;Http404&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;No member in group &amp;#39;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;#39;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;
                      &lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;group&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="c1"&gt;# Lucky draw&lt;/span&gt;
    &lt;span class="n"&gt;lucky_member&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;choice&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;valid_members&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# ...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¨ &lt;code&gt;form.is_valid()&lt;/code&gt; å¯ä»¥é©è¨¼æ¯åæ¬ä½çè³ææ¯ä¸æ¯æ­£ç¢ºçã&lt;/p&gt;
&lt;p&gt;æåä¹é ä¾¿æ /draw å ä¸ template&amp;nbsp;å§ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;{# draw_member/draw.html #}&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;extends&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;draw_member/base.html&amp;#39;&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;

&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;title&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;æ½ç±¤çµæ&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="nv"&gt;title&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;

&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;æ½ç±¤çµæ&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;lucky_member.name&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;ï¼åé«ï¼&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;lucky_member.group_name&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;ï¼&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# draw_member/views.py&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="c1"&gt;# ...&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;draw_member/draw.html&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;lucky_member&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lucky_member&lt;/span&gt;
    &lt;span class="p"&gt;})&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ´å¤ Forms çä»ç´¹ä¸æ¨£åè&lt;a href="https://docs.djangoproject.com/en/1.8/#forms"&gt;å®ç¶²&lt;/a&gt;ã&lt;/p&gt;
&lt;h3 id="_2"&gt;ç¸½çµ&lt;/h3&gt;
&lt;p&gt;åå®çæåå¨ &lt;a href="https://github.com/ccwang002/draw_member_django"&gt;Github&lt;/a&gt; ä¸ï¼åè &lt;span class="caps"&gt;README&lt;/span&gt;&amp;nbsp;å°±å¯ä»¥è¨­å®å¥½ç°å¢äºã&lt;/p&gt;
&lt;p&gt;éæ¨£å°±æ Django æåºæ¬ç Model, View, Template, Form å¹¾åå¤§é¨ä»½é«é©ä¸éäºãå¯ä»¥æè¦ºåºä¾ Django æä¾çåè½æ¯ Flask å¤å¾å¤ï¼ä½ä¹ä»£è¡¨è¦è±æ´å¤çæåå­¸ç¿ä½¿ç¨å®ãå¶å¯¦æ¹å¯«å°æå¾æåç code éå¸¸å°ï¼å¯ä»¥çºäºçµæ§åç code&amp;nbsp;éæ¯è¼å¤ã&lt;/p&gt;
&lt;p&gt;ç¶ç¶éä¸ä»£è¡¨å°±å­¸æ Django äºãæå¾ä¾ä»ç´¹å¹¾åå¯ä»¥æ¥çºå­¸ç¿ç Django&amp;nbsp;è³æºï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/uranusjr/django-tutorial-for-programmers"&gt;ãçºç¨å¼äººå¯«ç Django Tutorial ã&lt;/a&gt;æ¯åçæ­£å¾é¶å°ä¸ç 30 å¤©å­¸ç¿è¦åï¼éç¶æå­¸äºå¥½å¹¾åæ T___Tï¼ï¼æäºéåæ½ç±¤ç¨å¼çæ¦å¿µåå»è®ä¸æ¬¡æè©²ææ´æ¸æ¥æ´å Django çè¨­è¨ãä½èï¼Tzu-ping Chung&amp;nbsp;(@uranusjr)&lt;/li&gt;
&lt;li&gt;&lt;a href="http://masteringdjango.com"&gt;&lt;em&gt;Mastering Django: Core&lt;/em&gt;&lt;/a&gt;, the successor to &lt;a href="http://www.djangobook.com/en/2.0/index.html"&gt;&lt;em&gt;The Django Book&lt;/em&gt;&lt;/a&gt; last updated in 2009, is the definitive guide to Django targeting the latest Django version 1.8 at the time of&amp;nbsp;writing.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ´å¤ç Django æè½æ¨¹é¸æè«è¦ &lt;span class="caps"&gt;TP&lt;/span&gt; ç &lt;a href="https://github.com/uranusjr/django-tutorial-for-programmers/blob/master/30-moving-on.md"&gt;lesson 30&lt;/a&gt;ã&lt;/p&gt;
&lt;h3 id="details"&gt;Details&lt;/h3&gt;
&lt;p&gt;è· Flask&amp;nbsp;ä¸æ¨£ï¼åºä¸è¨éä¸äºç´°ç¯ææ¹åç­ç­çºäºé¿åç¯å¹éé·ï¼å·²ç¶å¤ªé·äºï¼èç§»è³æ­¤çæ®µè½ã&lt;/p&gt;
&lt;h4 id="raw-sql"&gt;Raw &lt;span class="caps"&gt;SQL&lt;/span&gt;&lt;/h4&gt;
&lt;p&gt;å¨ä»ç´¹ Django Model çæåç´æ¥ç¨äº &lt;span class="caps"&gt;ORM&lt;/span&gt;ï¼ä½å¯¦éä¸ Django æ¯å¯ä»¥å¯« raw &lt;span class="caps"&gt;SQL&lt;/span&gt; äºï¼èä¸éæãè°æçãç raw &lt;span class="caps"&gt;SQL&lt;/span&gt; è½å¤ æ¿åå°æç model&amp;nbsp;objectãé¦¬ä¸ä¾çæéº¼åäºã&lt;/p&gt;
&lt;p&gt;åä¾çè°æçç raw &lt;span class="caps"&gt;SQL&lt;/span&gt;ï¼ä½¿ç¨ &lt;code&gt;Model.objects.raw&lt;/code&gt; æ¿åææåé«æ¯ K-&lt;span class="caps"&gt;ON&lt;/span&gt;&amp;nbsp;é¡çæå¡ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;raw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;&lt;span class="s2"&gt;SELECT id, name, group_name&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;&lt;span class="s2"&gt;FROM draw_member_member&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;&lt;span class="s2"&gt;WHERE group_name LIKE &amp;#39;K-ON&lt;/span&gt;&lt;span class="si"&gt;%%&lt;/span&gt;&lt;span class="s2"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="go"&gt;[&amp;lt;Member: å¹³æ²¢ å¯ of K-ON!&amp;gt;,&lt;/span&gt;
&lt;span class="go"&gt; &amp;lt;Member: ç§å±± æ¾ª of K-ON!&amp;gt;,&lt;/span&gt;
&lt;span class="go"&gt; &amp;lt;Member: ç°äºä¸­ å¾ of K-ON!&amp;gt;,&lt;/span&gt;
&lt;span class="go"&gt; &amp;lt;Member: ç´å¹ ç´¬ of K-ON!&amp;gt;,&lt;/span&gt;
&lt;span class="go"&gt; &amp;lt;Member: ä¸­é æ¢ of K-ON!&amp;gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æåå³ä¸å RawQuerySetï¼è£¡é¢å¶å¯¦ä¹æ¯ Member objectsï¼éæ¯é  Django å»èªå°æç primary keyï¼ä¹å°±æ¯èªªå¨ raw() &lt;span class="caps"&gt;SQL&lt;/span&gt; query è£¡ä¸å®è¦æ¾ primary keyãæ³¨æé£å &lt;code&gt;%&lt;/code&gt; éè¦è¢« escape å çº raw() ç &lt;span class="caps"&gt;SQL&lt;/span&gt; query æ¯è½æ¾åæ¸çï¼å°±å Python å§å»º str&amp;nbsp;%-formattingï¼ã&lt;/p&gt;
&lt;p&gt;ä¸éæåæéº¼ç¥é Member æ¯å­å¨åªå table å¢ï¼é è¨­æ¯ &lt;code&gt;&amp;lt;app&amp;gt;_&amp;lt;model&amp;gt;&lt;/code&gt;ï¼ä½è³è¨å¨ meta options è£¡ç &lt;code&gt;db_table&lt;/code&gt;ï¼ä¹è½è¢«è¦å¯«ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_meta&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;db_table&lt;/span&gt;
&lt;span class="go"&gt;&amp;#39;draw_member_member&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å çº Member è£¡é¢æå nameãgroup_name ç­æ¬ä½ï¼å¨ä¸ query çæåä¸ä¸å®é½æå¯«å¨ &lt;span class="caps"&gt;SELECT&lt;/span&gt; è£¡é¢ææ¿å¼åä¾ï¼é£éº¼éäºæ¬ä½å°±æ¯ deferred çæï¼åªæå¨ççæ¿å¼æææå»è· database&amp;nbsp;è¦ãä¸è¬ä½¿ç¨ä¸æææè¦ºå©èçå·®ç°ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;raw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;SELECT id FROM draw_member_member&amp;quot;&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;&lt;span class="p"&gt;))[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="nb"&gt;type&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;draw_member.models.Member_Deferred_group_name_name&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_deferred_fields&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="go"&gt;{&amp;#39;group_name&amp;#39;, &amp;#39;name&amp;#39;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½æå°±æ¯ä¸æ³ç¨ &lt;span class="caps"&gt;ORM&lt;/span&gt;ï¼éåº¦æ¢ï¼ä¹æ²è¾¦æ³å¯«è¤éç queryï¼æ°ï¼ãéå°±åæ­¸å°æå³çµ±ç database connection, cursor éäºæ¦å¿µï¼å°±åæ²æ SQLAlchemy ç&amp;nbsp;Flaskã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.db&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;connection&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;connection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;&lt;span class="s2"&gt;SELECT name&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;&lt;span class="s2"&gt;FROM draw_member_member&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;&lt;span class="s2"&gt;WHERE group_name LIKE &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;K-ON&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
&lt;span class="go"&gt;[(&amp;#39;å¹³æ²¢ å¯&amp;#39;,), (&amp;#39;ç§å±± æ¾ª&amp;#39;,), (&amp;#39;ç°äºä¸­ å¾&amp;#39;,), (&amp;#39;ç´å¹ ç´¬&amp;#39;,), (&amp;#39;ä¸­é æ¢&amp;#39;,)]&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;&lt;span class="s2"&gt;SELECT member_id, time&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;&lt;span class="s2"&gt;FROM draw_member_history&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;&lt;span class="s2"&gt;LIMIT 3&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="go"&gt;[(8, datetime.datetime(2015, 10, 5, 17, 36, 41, 608078, tzinfo=&amp;lt;UTC&amp;gt;)),&lt;/span&gt;
&lt;span class="go"&gt; (11, datetime.datetime(2015, 10, 5, 17, 37, 26, 164830, tzinfo=&amp;lt;UTC&amp;gt;)),&lt;/span&gt;
&lt;span class="go"&gt; (11, datetime.datetime(2015, 10, 5, 17, 37, 37, 483697, tzinfo=&amp;lt;UTC&amp;gt;))]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here you&amp;nbsp;go.&lt;/p&gt;
&lt;h4 id="better-queryset"&gt;Better&amp;nbsp;QuerySet&lt;/h4&gt;
&lt;p&gt;çéäº raw &lt;span class="caps"&gt;SQL&lt;/span&gt; ä¹å¾ï¼æåä¾æ³æ³ &lt;span class="caps"&gt;ORM&lt;/span&gt; çæ¹åå§ãéç¶èªªæ¯æ¬¡è¦æ¥è©¢çæååå¯« &lt;span class="caps"&gt;SQL&lt;/span&gt; ä¸æ¨£æ query çµååºä¾ä¹å¯ä»¥ï¼ä½ç¨ &lt;span class="caps"&gt;ORM&lt;/span&gt; çå¥½èæè©²æ¯è½æéäºå¯¦ä½ç´°ç¯è·ãåè£èµ·ä¾ããä¾å¦æè¿ n æ¬¡æ½ç±¤è¨éãæææå¡çåé«åç¨±ï¼ç®åæ¯å¯«æ­»å¨ DrawForm&amp;nbsp;è£¡é¢ï¼ã&lt;/p&gt;
&lt;p&gt;éæåå°±å¯ä»¥æå¸¸ç¨ç query è®æä¸å methodï¼ä¾å¦æè¿ 10 æ¬¡æ½ç±¤è¨éå°±åªè¦ç¨ &lt;code&gt;History.objects.recent(10)&lt;/code&gt; å°±å¯ä»¥äºã&lt;/p&gt;
&lt;p&gt;éå¶å¯¦æå¾å¤åæ³ï¼åæ¯å¯«ä¸å classmethodãOverride default ManagerãOverride default QuerySetãåªåæ¹æ³æ¯è¼å¥½å¢ï¼å¨ &lt;a href="http://stackoverflow.com/a/2213341"&gt;StackOverflow&lt;/a&gt;ã&lt;a href="https://groups.google.com/forum/#!topic/django-users/0WSdnWFTuUg"&gt;mail list&lt;/a&gt; é½æè¨è«ãåºæ¬ä¸é½è½éå°ç¸åçææï¼ä½å¾å©èçåæ³æ¯æ¯è¼åå¥½çï¼å çº Manager(or QuerySet for Django 1.7+) è² è²¬èç model å°æå°ç database table ç­ç´çæä½ï¼ä½ classmethod æè©²æ¯èçå·²ç¶å¾ table row ä¸­æ¿åºçä¸å model object ç¸éçæä½ãå¦ææåæ¨£æ§è³ªç code æ¾å¨ä¸èµ·ï¼å°±æè©²ä½¿ç¨&amp;nbsp;Manager(QuerySet)ã&lt;/p&gt;
&lt;p&gt;èä¸ &lt;span class="caps"&gt;TP&lt;/span&gt; ä¹å¨ Gitter ä¸éç¤ºäºï¼å°±æ¯éæ¨£ï¼çµæ¡ï¼ãä¾æ¹å¯«&amp;nbsp;modelã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# draw_member/models.py&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MemberQuerySet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QuerySet&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;unique_groups&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values_list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;group_name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;flat&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;distinct&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HistoryQuerySet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;QuerySet&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;recent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;order_by&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;-time&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)[:&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Member&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;# ...&lt;/span&gt;
    &lt;span class="n"&gt;objects&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;MemberQuerySet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_manager&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;History&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;# ...&lt;/span&gt;
    &lt;span class="n"&gt;objects&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;HistoryQuerySet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_manager&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¨ Member æåå®ç¾©äºä¸å &lt;code&gt;unique_groups&lt;/code&gt; æ¿åææåé«çåç¨±ï¼å¨ History å®ç¾©äº &lt;code&gt;recent&lt;/code&gt; æ¿åºææéæåºæåé¢ n åãæ°å®ç¾©ç &lt;code&gt;QuerySet.as_manager()&lt;/code&gt; å°±åä»£ææ¬ä¾ç &lt;code&gt;Model.objects&lt;/code&gt;ã&lt;/p&gt;
&lt;p&gt;æ¥èä¾æ¹å¯« view æä¹åå¯«ç query&amp;nbsp;ææã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#draw_member/views.py&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;history&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;# ...&lt;/span&gt;
    &lt;span class="n"&gt;recent_draws&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;History&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;recent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# ...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éæ¨£å°±ç°¡æ½ä¸é»ãåä¾é ä¾¿æ form&amp;nbsp;æ¹å¾æ¯è¼å½æ§ï¼ä¸è¦æåé«åå¯«æ­»ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#draw_member/forms.py&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;.models&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Member&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;member_group_choices&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;valid_groups&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Member&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;unique_groups&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;choices&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;grp&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;valid_groups&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;choices&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;grp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;grp&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;choices&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ALL&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ï¼å¨ï¼&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;choices&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;DrawForm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Form&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;group&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ChoiceField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;choices&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;member_group_choices&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="c1"&gt;# ...&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="timezone"&gt;Timezone&lt;/h4&gt;
&lt;p&gt;æè¦ºæè¿ä¸ç´å¨å¯«&lt;a href="../../09/datetime-sqlite/"&gt;æåç¸éçæ±è¥¿&lt;/a&gt;åãåºæ¬ä¸ server è¨éçæéé½ç¨ &lt;span class="caps"&gt;UTC&lt;/span&gt;&amp;nbsp;åé¡å°±å°å¾å¤ï¼ä½æå¾éæ¯è¦åç¾ä¸åä½¿ç¨èç¨çæåã&lt;/p&gt;
&lt;p&gt;ä½åé¡æ¯ &lt;span class="caps"&gt;HTTP&lt;/span&gt; header è£¡é¢ä¸¦æ²æéæ¨£çè³è¨ï¼æä»¥ä¸ä¾ç¨ geoip å»çï¼äºä¾ç¨å¯«å javascript å¨ä½¿ç¨èè¼å¥çæåå»å¤æ·æåï¼ç¸½ä¹æ¯åè¦å¦å¤è¨éçæ±è¥¿ãç´°ç¯&lt;a href="https://docs.djangoproject.com/en/1.8/topics/i18n/timezones/#selecting-the-current-time-zone"&gt;å®ç¶²ä¸ä¹æèªªæ&lt;/a&gt;ã&lt;/p&gt;
&lt;p&gt;å¨æä¸­æ¯ä½¿ç¨ &lt;code&gt;activate('Aisa/Taipei')&lt;/code&gt; ææåæ¹æ &lt;span class="caps"&gt;UTC&lt;/span&gt;+8ãééä»ç´¹å¦ä¸åæ¹å¼ï¼æ¯å¯«å¨ template&amp;nbsp;è£¡é¢çã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;{# draw_member/templates/draw_member/history.html #}&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
  &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;load&lt;/span&gt; &lt;span class="nv"&gt;tz&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;æ½ç±¤æ­·å²ï¼æè¿ 10 ç­ï¼&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;table&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="c"&gt;{# ... #}&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;tbody&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;timezone&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Asia/Taipei&amp;#39;&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
    &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;history&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nv"&gt;recent_histories&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
      &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;&lt;span class="c"&gt;{# ... #}&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endfor&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
    &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endtimezone&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;tbody&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;table&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="post-form-and-csrf"&gt;&lt;span class="caps"&gt;POST&lt;/span&gt; form and &lt;span class="caps"&gt;CSRF&lt;/span&gt;&lt;/h4&gt;
&lt;p&gt;å¿è¨è¬äºï¼æåç form ç®åæ¯ç¨ &lt;code&gt;action="get"&lt;/code&gt;ï¼ç¶ç¶å¯ä»¥æ¹åç¨ &lt;span class="caps"&gt;POST&lt;/span&gt;ï¼ä¹å¾ç°¡å®ï¼å°± &lt;span class="caps"&gt;GET&lt;/span&gt; ææ &lt;span class="caps"&gt;POST&lt;/span&gt;&amp;nbsp;å°±å¥½äºã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# draw_site/views.py&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.views.decorators.http&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;require_POST&lt;/span&gt;

&lt;span class="nd"&gt;@require_POST&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;# Retrieve all related members&lt;/span&gt;
    &lt;span class="n"&gt;form&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;DrawForm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;POST&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# ...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;{# draw_site/templates/home.html #}&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;form&lt;/span&gt; &lt;span class="na"&gt;action&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;url&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;draw&amp;#39;&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;method&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;post&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é¦¬ä¸ä¾è©¦è©¦çã&lt;/p&gt;
&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/10/django-draw-member/pics/django_csrf_failed.png"/&gt;
  &lt;p class="caption"&gt;&lt;span class="caps"&gt;POST&lt;/span&gt; form without &lt;span class="caps"&gt;CSRF&lt;/span&gt;&amp;nbsp;token&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;æ¿å°äºä¸å 403 Forbidden &amp;ldquo;&lt;span class="caps"&gt;CSRF&lt;/span&gt; verification failed.&amp;rdquo;ã&lt;span class="caps"&gt;CSRF&lt;/span&gt; (Cross Site Request Forgery) å¨ &lt;a href="https://zh.wikipedia.org/wiki/%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0"&gt;wiki&lt;/a&gt; ææ¯è¼å®æ´çä»ç´¹ï¼éæ¯ä¸ç¨®æ»æææ³ï¼å¨ä½¿ç¨èç»å¥ç¶²ç«ä¹å¾ï¼session çºç»å¥çæï¼ï¼å½é ä¸åè·ç¶²ç«ä¸ä¸æ¨£ç form ä¾å½è£ä½¿ç¨èçè¡çºãä¾å¦è³¼ç¥¨ç³»çµ±è²·ç¥¨ï¼å¦ææ²æª¢æ¥çè©±ï¼æå¯ä»¥æ¿ä½¿ç¨èç session&amp;nbsp;å»ç¶²ç«ä¸é¨ä¾¿è²·ç¥¨ï¼ç¶²ç«é½æèªçºæ¯ä½¿ç¨èå¨æä½ã&lt;/p&gt;
&lt;p&gt;å æ­¤ &lt;a href="https://docs.djangoproject.com/en/1.8/ref/csrf/"&gt;&lt;span class="caps"&gt;CSRF&lt;/span&gt; token&lt;/a&gt; ç¨ä¾é²ç¯éåå½é ï¼å¨ç¢ç form çæåï¼ç¶²ç«æåç¢çä¸åæ¬ä½çå¼ï¼éåæ¬ä½çå¼æ¯æ¬¡é½ææ¹è®ï¼éæ¨£å°±è½ç¢ºå®éå form æ¯å¾ç¶²ç«ä¸æ¿å°çãDjango èç &lt;span class="caps"&gt;CSRF&lt;/span&gt; protection æ¯éé &lt;a href="https://docs.djangoproject.com/en/1.8/topics/http/middleware/"&gt;Middleware&lt;/a&gt;ï¼ä¸åä»¥åæ²ææå°çæ¦å¿µï¼è¡¨ç¤ºä»æ¯æ¯è¼åºå±¤çæ±è¥¿ãç¸å°èè¨ï¼ä¹ä¸ç¨æ¹æåç codeï¼å¨éåä¾å­å°±åªè¦æ &lt;code&gt;{% csrf_token %}&lt;/code&gt; å å° form&amp;nbsp;è£¡é¢å°±å¯ä»¥äºã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;{# draw_site/templates/home.html #}&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;form&lt;/span&gt; &lt;span class="na"&gt;action&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;url&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;draw&amp;#39;&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;method&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;post&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="c"&gt;{# ... #}&lt;/span&gt;
    &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;csrf_token&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;input&lt;/span&gt; &lt;span class="na"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;submit&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Submit&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;form&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="zh"></category><category term="django"></category><category term="sqlite"></category><category term="python"></category></entry><entry><title>Datetime in SQLite andÂ Python</title><link href="//blog.liang2.tw/posts/2015/09/datetime-sqlite/" rel="alternate"></link><updated>2015-09-28T12:00:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2015-09-28:posts/2015/09/datetime-sqlite/</id><summary type="html">&lt;p&gt;è¦æ­£ç¢ºèçæéä¸¦ä¸å®¹æãæ¿æ¥&lt;a href="../flask-draw-member"&gt;æåååçä¾å­&lt;/a&gt;ï¼å¶å¯¦æ¯ç´æ¥ææéè½æåºä¾çå­ä¸²å­å¨ SQLite&amp;nbsp;è£¡ãéæå¹¾ååé¡ã&lt;/p&gt;
&lt;p&gt;é¦åæ¯æåçåé¡ãæåç´æ¥æ server æå¨æåçæéå­å°è³æåº«å»ï¼å°åçæåçº &lt;a href="https://en.wikipedia.org/wiki/Asia/Taipei"&gt;Asia/Taipei&lt;/a&gt; (&lt;span class="caps"&gt;UTC&lt;/span&gt;+8)ãå¦æä»å¤© server è·å°å¦ä¸åæåï¼ä¾å¦æ±äº¬ Asia/Tokyo (&lt;span class="caps"&gt;UTC&lt;/span&gt;+9)&amp;nbsp;å¥½äºï¼éæåè³æåº«è£¡å°±åå«äºå©åæåçæéï¼ä½å çºæ¯å­ä¸²æ¯å®å¨çä¸åºå·®ç°çã&lt;/p&gt;
&lt;p&gt;åä¾ç¨å­ä¸²å­æéä¹æä¸äºåé¡ãé¦åæ¯æåºï¼éç¶æåçä¾å­æ¯è½æ­£ç¢ºçæåºï¼ä½å¦ææéæ ¼å¼æäºï¼å &lt;code&gt;%H:%M:%S %Y-%m-%d&lt;/code&gt;ï¼é£å°±ä¸ä¸å®ãåä¾å¯ä»¥çå°å¾çºæ³èçæéå°±ææ¯è¼è¤éãä¸ééä¸é¨ä»½æ¯å çº SQLite æ²æå°éèçæ¥ææéçè³æåæï¼å PostgreSQL&amp;nbsp;å°±è½çå¾æã&lt;/p&gt;
&lt;p&gt;æä»¥æ³è¦æ­£ç¢ºèçæéæå¹¾åè¦é»ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å­å°è³æåº«çæéæè©²è¦ &lt;span class="caps"&gt;UTC&lt;/span&gt;&amp;nbsp;ä¾è¡¨ç¤º&lt;/li&gt;
&lt;li&gt;å¨èçæéæï¼æåºãé¡¯ç¤ºãèçæåï¼ï¼æè©²è½ææ­£ç¢ºçè³ææ ¼å¼ï¼ä¾å¦ &lt;a href="https://docs.python.org/3.5/library/datetime.html#datetime-objects"&gt;datetime&lt;/a&gt;ï¼&lt;/li&gt;
&lt;li&gt;åç¾çµ¦ä½¿ç¨èæåè½æå°è©²äººï¼æ&amp;nbsp;serverï¼æå¨æå&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åºä¸æ¯æ¯è¼æ­£ç¢ºèçæéçæ¹å¼ã&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#timezone"&gt;æåï¼Timezoneï¼&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#datetime-in-sqlite-again"&gt;Datetime in SQLite, again&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#python-3-timezone"&gt;Python 3 å§å»º timezone&amp;nbsp;æ¯æ´&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#python-sqlite-adapter"&gt;è® Python å§å»º SQLite adapter&amp;nbsp;æ¯æ´æå&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_1"&gt;ç¸½çµ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h3 id="timezone"&gt;æåï¼Timezoneï¼&lt;/h3&gt;
&lt;p&gt;æåé½éæ²æèçéæåãæåå¨ Python å§å»ºç datetime åªæ¯åãæ¦å¿µãï¼ä¹å°±æ¯èªªï¼ä½¿ç¨èå¯ä»¥å³é²å»ä¸åçæåï¼å­å¨ &lt;code&gt;datetime.tzinfo&lt;/code&gt; ä¸­ï¼ï¼Python è½éå°ææä¾æåç datetime&amp;nbsp;åæ­£ç¢ºçå¤æ·ãä½å°åçæåæ¯å¤å°ï¼ç´ç´çæåæ¯å¤å°å®ä¸ç¥éã&lt;/p&gt;
&lt;p&gt;çºä»éº¼ä¸èçåå°æåééº¼éè¦çæ¦å¿µï¼å çºæéè®åçéåº¦å¾å¿«ï¼å ä¸æ¥åç¯ç´æéæ¯å¹´å¯è½é½ä¸ä¸æ¨£ï¼Python&amp;nbsp;ä¸ä¸çéæ²åºæåçè³è¨å·²ç¶æ´æ°äºå¾å¤æ¬¡ã&lt;/p&gt;
&lt;p&gt;å æ­¤å¨ Python ä¸­å¯¦éä¸æåèçé å¾æ¯ç¬¬ä¸æ¹å¥ä»¶ &lt;a href="http://pythonhosted.org/pytz/"&gt;pytz&lt;/a&gt;ãåå®è£ Flask ä¸æ¨£ï¼ç¨ &lt;code&gt;pip install pytz&lt;/code&gt; å°±å¯ä»¥äºã&lt;/p&gt;
&lt;p&gt;å¯¦éæä½ççã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;datetime&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;      &lt;span class="c1"&gt;# local time&lt;/span&gt;
&lt;span class="go"&gt;datetime.datetime(2015, 9, 29, 16, 33, 39, 537111)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;utcnow&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;   &lt;span class="c1"&gt;# UTC time&lt;/span&gt;
&lt;span class="go"&gt;datetime.datetime(2015, 9, 29, 8, 33, 39, 538745)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é¦åï¼å¯ä»¥çå° datetime æ¬èº«æä¾äº &lt;code&gt;now()&lt;/code&gt; ä»¥å &lt;code&gt;utcnow()&lt;/code&gt; å©å function ä¾æ¿å°ç¾å¨çæéãå°åæ¯ &lt;span class="caps"&gt;UTC&lt;/span&gt;+8 æä»¥æéæ¯ &lt;span class="caps"&gt;UTC&lt;/span&gt; æéå­é¢ä¸å¿« 8 å°æãæ³¨æå°å©ååå³ç datetime&amp;nbsp;ç©ä»¶é½æ²æåå«æåçè³è¨ã&lt;/p&gt;
&lt;p&gt;èçæéååä¸é½ä»¥ &lt;span class="caps"&gt;UTC&lt;/span&gt; çºåºæºãæåå»ºç«ä¸å &lt;span class="caps"&gt;UTC&lt;/span&gt; çç¾å¨æéå­å¨è®æ¸ &lt;code&gt;utcnow&lt;/code&gt;ï¼ä¸¦ä¸ç¨ pytz èçæéãImport pytz é²ä¾ï¼ä¸¦ä¸å®ç¾©äºå©åæåï¼&lt;span class="caps"&gt;UTC&lt;/span&gt; ä»¥å &lt;span class="caps"&gt;TPE&lt;/span&gt;ï¼å°åæéï¼ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pytz&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pytz&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;tpe&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pytz&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Asia/Taipei&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;utcnow&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;utcnow&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;utcnow&lt;/span&gt;
&lt;span class="go"&gt;datetime.datetime(2015, 9, 29, 8, 38, 14, 738241)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fromutc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;utcnow&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;datetime.datetime(2015, 9, 29, 8, 38, 14, 738241, tzinfo=&amp;lt;UTC&amp;gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;tpe&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fromutc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;utcnow&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;datetime.datetime(2015, 9, 29, 16, 38, 14, 738241, tzinfo=&amp;lt;DstTzInfo &amp;#39;Asia/Taipei&amp;#39; CST+8:00:00 STD&amp;gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fromutc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;utcnow&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;tpe&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fromutc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;utcnow&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;True&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¨ pytz å®ç¾©çæåèç datetime ä¹å¾å°±æå¤äº &lt;code&gt;tzinfo&lt;/code&gt; çè³è¨ãéæä¹è½æ­£ç¢ºæ¯è¼ä¸åæåçæéã&lt;/p&gt;
&lt;p&gt;å¦ä½èçä¸åä»»æå®ç¾©çæéå¢ï¼ä¾å¦ 2016&amp;nbsp;å¹´å°ååæ¦å¥½äºï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="go"&gt;&amp;#39;2016-01-01 00:00:00&amp;#39;&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;tpe_2016_newyear&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tpe&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;localize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;tpe_2016_newyear&lt;/span&gt;
&lt;span class="go"&gt;datetime.datetime(2016, 1, 1, 0, 0, tzinfo=&amp;lt;DstTzInfo &amp;#39;Asia/Taipei&amp;#39; CST+8:00:00 STD&amp;gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tpe_2016_newyear&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;datetime.datetime(2015, 12, 31, 16, 0, tzinfo=&amp;lt;UTC&amp;gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä½¿ç¨ &lt;code&gt;.localize(&amp;lt;datetime&amp;gt;)&lt;/code&gt; çµ¦äºä¸ååå§æ²ææåè³è¨ç &lt;code&gt;datetime&lt;/code&gt; æåãæäºæåä¹å¾ï¼è¦å¨ä¸åæåéè½æå°±ä½¿ç¨ &lt;code&gt;.normalize(&amp;lt;datetime&amp;gt;)&lt;/code&gt;ã&lt;/p&gt;
&lt;p&gt;å¯ä»¥åæ¥æ¥ç¶å°å 2016&amp;nbsp;åæ¦æï¼ç¾åæ±å²¸æéæ¯å¹¾é»ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;est&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pytz&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;US/Eastern&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;est&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tpe_2016_newyear&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;datetime.datetime(2015, 12, 31, 11, 0, tzinfo=&amp;lt;DstTzInfo &amp;#39;US/Eastern&amp;#39; EST-1 day, 19:00:00 STD&amp;gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä»¥å¾è¦ççè³½è½æ­ãéè¦ç¼è¡¨å°±ä¸æåæä¸æ¸æ¥æéäºã&lt;/p&gt;
&lt;h3 id="datetime-in-sqlite-again"&gt;Datetime in SQLite,&amp;nbsp;again&lt;/h3&gt;
&lt;p&gt;æåæèç datetime èæåäºï¼é£éº¼å°±ä¾æ¹å¯«ä¸ä¸æ¬ä¾ SQLite å­æéçæ¹å¼ãå¶å¯¦ Python datetime æ¯æ´ SQLite è½æï¼åæ¨£å¾&lt;a href="https://docs.python.org/3.5/library/sqlite3.html#default-adapters-and-converters"&gt;Python module èªªææä»¶&lt;/a&gt;è£¡é¢æ¿åºä¾çã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;datetime&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sqlite3&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pytz&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pytz&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;tpe&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pytz&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Asia/Taipei&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sqlite3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;connect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;test.db&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="n"&gt;detect_types&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;sqlite3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PARSE_DECLTYPES&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;sqlite3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PARSE_COLNAMES&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;CREATE TABLE test(dt timestamp)&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;&amp;lt;sqlite3.Cursor object at 0x10a59b960&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è³ææ¬ä½çè¨­çº &lt;code&gt;timestamp&lt;/code&gt;ï¼ä¸¦ä¸å¨é£æ¥çæåè¨­å® &lt;code&gt;PARSE_DECLTYPES&lt;/code&gt; å &lt;code&gt;PARSE_COLNAMES&lt;/code&gt;ï¼ç¨å¾å¯ä»¥çå°ä»åçææã&amp;nbsp;è¶å¿«ææéå­é²å»å§ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;utcnow&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;utcnow&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;utcnow&lt;/span&gt;
&lt;span class="go"&gt;datetime.datetime(2015, 9, 29, 12, 48, 16, 671538)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;        &lt;span class="s1"&gt;&amp;#39;INSERT INTO test(dt) VALUES (?)&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;utcnow&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;...&lt;/span&gt;
&lt;span class="go"&gt;&amp;lt;sqlite3.Cursor object at 0x1082380a0&amp;gt;&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;tpe_2016_newyear&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tpe&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;localize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tpe_2016_newyear&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;datetime.datetime(2015, 12, 31, 16, 0, tzinfo=&amp;lt;UTC&amp;gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;utc_dt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;utc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tpe_2016_newyear&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tzinfo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;        &lt;span class="s1"&gt;&amp;#39;INSERT INTO test(dt) VALUES (?)&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;utc_dt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;...&lt;/span&gt;
&lt;span class="go"&gt;&amp;lt;sqlite3.Cursor object at 0x10a59b960&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å­äºå©åæéï¼ä¸åæ¯ &lt;span class="caps"&gt;UTC&lt;/span&gt; çç¾å¨æéï¼å¦ä¸åæ¯ä»¥ &lt;span class="caps"&gt;UTC&lt;/span&gt; è¡¨ç¤ºçå°å 2016 åæ¦ãæ³¨æå©åæéé½æ &lt;span class="caps"&gt;UTC&lt;/span&gt; æåå»æäºï¼å çºå¨æäºææ³åºä¸ SQLite è python ç datetime adapter æçä¸ææåï¼éæ¯å &lt;a href="https://bugs.python.org/issue19065"&gt;bug #19065&lt;/a&gt;ï¼ã&lt;/p&gt;
&lt;p&gt;å¦æç¨ SQLite å¯ä»¥çå°æéé½æ¯ä»¥ &lt;span class="caps"&gt;UTC&lt;/span&gt; åç¾ãä»å¯ä»¥ç¨å®å§å»ºç &lt;code&gt;datetime('&amp;lt;UTC time&amp;gt;', 'localtime')&lt;/code&gt; æ &lt;span class="caps"&gt;UTC&lt;/span&gt;&amp;nbsp;æéå­ä¸²è½ææé»è¦çç¶å°æéãéæ¨£èçæ¯å®¹æèå¶ä»æç¨ç¨å¼ç¸å®¹çã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="go"&gt;-- sqlite3 test.db&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;schema&lt;/span&gt;
&lt;span class="go"&gt;CREATE TABLE test(dt timestamp);&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;dt&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="go"&gt;2015-09-29 12:48:16.671538&lt;/span&gt;
&lt;span class="go"&gt;2015-12-31 16:00:00&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;localtime&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="go"&gt;2015-09-29 20:48:16&lt;/span&gt;
&lt;span class="go"&gt;2016-01-01 00:00:00&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åç¨ Python è®åä¾ä»ç¶æ¯ datetime&amp;nbsp;æ ¼å¼ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;ret_vals&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;SELECT dt AS &amp;quot;[timestamp]&amp;quot; FROM test&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchall&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;ret_vals&lt;/span&gt;
&lt;span class="go"&gt;[(datetime.datetime(2015, 9, 29, 12, 48, 16, 671538),),&lt;/span&gt;
&lt;span class="go"&gt; (datetime.datetime(2015, 12, 31, 16, 0),)]&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;tpe&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fromutc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;ret_vals&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="go"&gt;[datetime.datetime(2015, 9, 29, 20, 48, 16, 671538, tzinfo=&amp;lt;DstTzInfo &amp;#39;Asia/Taipei&amp;#39; CST+8:00:00 STD&amp;gt;),&lt;/span&gt;
&lt;span class="go"&gt; datetime.datetime(2016, 1, 1, 0, 0, tzinfo=&amp;lt;DstTzInfo &amp;#39;Asia/Taipei&amp;#39; CST+8:00:00 STD&amp;gt;)]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="python-3-timezone"&gt;Python 3 å§å»º timezone&amp;nbsp;æ¯æ´&lt;/h4&gt;
&lt;p&gt;çºäºå¯«éç¯ blog åç ç©¶äºä¸ä¸å§å»ºç datetime.timezoneãPython 2 æ²æéååè½ï¼ä¸éåºæ¬ç timedelta&amp;nbsp;æï¼æä»¥è¦èªå·±åæè©²ä¹æ¯åå¾å°â¦å§ï¼&lt;/p&gt;
&lt;p&gt;å§å»ºç datetime.timezone ç±ä¸å utcoffset åå»ºç«ï¼åºæ¬ä¸å°±æ¯å³åç¸å°æ¼ &lt;span class="caps"&gt;UTC&lt;/span&gt; çæéå·®ï¼ä»¥ datetime.timedelta è¡¨ç¤ºãä¸æ¨£å§å»ºå¸¶æ &lt;span class="caps"&gt;UTC&lt;/span&gt;&amp;nbsp;æåï¼ééè©¦èå»ºäºå°åä»¥åæ±äº¬çæéã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;datetime&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;dt&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;tpe_now&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;tpe_now&lt;/span&gt;
&lt;span class="go"&gt;datetime.datetime(2015, 9, 29, 20, 40, 49, 347568)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;tpe_delta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timedelta&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hours&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;tpe&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tpe_delta&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;jpn_delta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timedelta&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hours&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;jpn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;jpn_delta&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æäººå¨å°åï¼æä»¥ datetime.datetime.now() æçµ¦æå°åæéï¼åç¨ timedelta&amp;nbsp;æåç®åºåæåçæéã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;utc_now&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tpe_now&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;tpe_delta&lt;/span&gt;  &lt;span class="c1"&gt;# manually time shift&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;jpn_now&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;utc_now&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;jpn_delta&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;utc_now&lt;/span&gt;
&lt;span class="go"&gt;datetime.datetime(2015, 9, 29, 12, 40, 49, 347568)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;tpe_now&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;utc_now&lt;/span&gt;
&lt;span class="go"&gt;False&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç´æ¥æ¯è¼éäºç®åºä¾çæéï¼ä¸æå¤ä¸ç¸ç­ï¼å çºé è¨­ç tzinfo&amp;nbsp;æ¯ç©ºçã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;tpe_now&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tzinfo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;tpe&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;datetime.datetime(2015, 9, 29, 20, 40, 49, 347568, tzinfo=datetime.timezone(datetime.timedelta(0, 28800)))&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;tpe_now&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tzinfo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;tpe&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;utc_now&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tzinfo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;True&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;jpn_now&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tzinfo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;jpn&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;tpe_now&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tzinfo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;tpe&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;True&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;çµ¦äºåå°çæåç tzinfo ä¹å¾ï¼å¯ä»¥çå° datetime&amp;nbsp;å¨åæ¯è¼çæåæ¯æèæ®æåä½ç§»çã&lt;/p&gt;
&lt;p&gt;æ¥èåä¾çä¸ä¸pytz èå§å»º datetime.timezone&amp;nbsp;çç¸å®¹ç¨åº¦ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pytz&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;pytz_utc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pytz&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;pytz_tpe&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pytz&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Asia/Taipei&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;pytz&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;jpn_now&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tzinfo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;jpn&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="go"&gt;datetime.datetime(2015, 9, 29, 12, 40, 49, 347568, tzinfo=&amp;lt;UTC&amp;gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;pytz_tpe&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;localize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tpe_now&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;utc_now&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tzinfo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;True&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ¯è¼è·è½æé½æ²æåé¡ï¼å¯ä»¥æ¾å¿è½æã&lt;/p&gt;
&lt;h3 id="python-sqlite-adapter"&gt;è® Python å§å»º SQLite adapter&amp;nbsp;æ¯æ´æå&lt;/h3&gt;
&lt;p&gt;çäºä¸ä¸ &lt;a href="https://bugs.python.org/issue19065"&gt;Python issue 19065&lt;/a&gt;ï¼ä¹æä»¥æ²æè§£æ±ºå¶å¯¦æ¯ç¼º patchï¼å çºç¾å¨ç patch ä¸¦ä¸ç¸å®¹ Python 2.xï¼æ²æ datetime.timezoneï¼ï¼ç¶å¾ pysqlite çç¶­è­·èä¸¦æ²ææ³è¦æ¯æ´ timezone&amp;nbsp;çææã&lt;/p&gt;
&lt;p&gt;ä¸éé£åªæ¯å§å»ºç adapter for datetime.datetime objectï¼è¦èªå·±åä¹æ²åé¡ãåè issue è£¡é¢æä¾çè§£æ³ï¼å¨ Github &lt;a href="https://gist.github.com/acdha/6655391"&gt;gist&lt;/a&gt;&amp;nbsp;ä¸ï¼ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# tz_aware_adpater.py&lt;/span&gt;
&lt;span class="c1"&gt;# Adapt from https://gist.github.com/acdha/6655391&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;datetime&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sqlite3&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;tz_aware_timestamp_adapter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;datepart&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;timepart&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot; &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;year&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;month&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;day&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;datepart&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;+&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;timepart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;timepart&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tz_offset&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;timepart&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rsplit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;+&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;tz_offset&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;00:00&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;tzinfo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;hours&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;minutes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tz_offset&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
            &lt;span class="n"&gt;tzinfo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
                &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timedelta&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hours&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;hours&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;minutes&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;minutes&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;tzinfo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;

    &lt;span class="n"&gt;timepart_full&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;timepart&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;hours&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;minutes&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;seconds&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;timepart_full&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;timepart_full&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;microseconds&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{:0&amp;lt;6.6}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;timepart_full&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;()))&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;microseconds&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

    &lt;span class="n"&gt;val&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;year&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;month&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;day&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hours&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;minutes&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;seconds&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;microseconds&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;tzinfo&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;

&lt;span class="n"&gt;sqlite3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;register_converter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;timestamp&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tz_aware_timestamp_adapter&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="go"&gt;python3 -i tz_aware_adpater.py&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sqlite3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;connect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="s1"&gt;&amp;#39;test.db&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;     &lt;span class="n"&gt;detect_types&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;sqlite3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PARSE_DECLTYPES&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;sqlite3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PARSE_COLNAMES&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pytz&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;tpe&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pytz&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Asia/Taipei&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;pycontw&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tpe&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;localize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pycontw&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;&amp;#39;2016-06-03 08:00:00+08:00&amp;#39;&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;executemany&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="s1"&gt;&amp;#39;INSERT INTO test(dt) VALUES (?)&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;pycontw&lt;/span&gt;&lt;span class="p"&gt;,),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pytz&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pycontw&lt;/span&gt;&lt;span class="p"&gt;),)]&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;commit&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å­äºå©åå¸¶ææåçæéï¼å©åæéæ¯ç¸åçï¼ãåå¾ SQLite&amp;nbsp;ä¾è®è®çã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;dt&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="go"&gt;2015-09-29 12:48:16.671538&lt;/span&gt;
&lt;span class="go"&gt;2015-12-31 16:00:00&lt;/span&gt;
&lt;span class="go"&gt;2016-06-03 08:00:00+08:00&lt;/span&gt;
&lt;span class="go"&gt;2016-06-03 00:00:00+00:00&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;localtime&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="go"&gt;2015-09-29 20:48:16&lt;/span&gt;
&lt;span class="go"&gt;2016-01-01 00:00:00&lt;/span&gt;
&lt;span class="go"&gt;2016-06-03 08:00:00&lt;/span&gt;
&lt;span class="go"&gt;2016-06-03 08:00:00&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æåæ¯ç´æ¥å¯«å° SQLite è£¡é¢ï¼æ²æçè©±å°±ç¶ææ¯ &lt;span class="caps"&gt;UTC&lt;/span&gt;&amp;nbsp;æåã&lt;/p&gt;
&lt;p&gt;åç¨ Python è®åä¾ï¼æ¸¬ä¸ä¸ä¿®æ¹ç&amp;nbsp;adapterã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;dts&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;SELECT dt FROM test&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchall&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;dts&lt;/span&gt;
&lt;span class="go"&gt;[(datetime.datetime(2015, 9, 29, 12, 48, 16, 671538),),&lt;/span&gt;
&lt;span class="go"&gt; (datetime.datetime(2015, 12, 31, 16, 0),),&lt;/span&gt;
&lt;span class="go"&gt; (datetime.datetime(2016, 6, 3, 8, 0, tzinfo=datetime.timezone(datetime.timedelta(0, 28800))),),&lt;/span&gt;
&lt;span class="go"&gt; (datetime.datetime(2016, 6, 3, 0, 0, tzinfo=datetime.timezone.utc),)]&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;astimezone&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tpe&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;dts&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:]]&lt;/span&gt;
&lt;span class="go"&gt;[datetime.datetime(2016, 6, 3, 8, 0, tzinfo=&amp;lt;DstTzInfo &amp;#39;Asia/Taipei&amp;#39; CST+8:00:00 STD&amp;gt;),&lt;/span&gt;
&lt;span class="go"&gt; datetime.datetime(2016, 6, 3, 8, 0, tzinfo=&amp;lt;DstTzInfo &amp;#39;Asia/Taipei&amp;#39; CST+8:00:00 STD&amp;gt;)]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è®åä¾æ²æåé¡ï¼å¦æè¦å®æ´èçææææ³ï¼åé¢å©å datetime æ¯ naive&amp;nbsp;æ²ææåï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;astimezone&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;utc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tzinfo&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;  &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="n"&gt;utc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;localize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;dts&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="go"&gt;[datetime.datetime(2015, 9, 29, 12, 48, 16, 671538, tzinfo=&amp;lt;UTC&amp;gt;),&lt;/span&gt;
&lt;span class="go"&gt; datetime.datetime(2015, 12, 31, 16, 0, tzinfo=&amp;lt;UTC&amp;gt;),&lt;/span&gt;
&lt;span class="go"&gt; datetime.datetime(2016, 6, 3, 0, 0, tzinfo=&amp;lt;UTC&amp;gt;),&lt;/span&gt;
&lt;span class="go"&gt; datetime.datetime(2016, 6, 3, 0, 0, tzinfo=&amp;lt;UTC&amp;gt;)]&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;astimezone&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tpe&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tzinfo&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;  &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="n"&gt;tpe&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fromutc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;dts&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="go"&gt;[datetime.datetime(2015, 9, 29, 20, 48, 16, 671538, tzinfo=&amp;lt;DstTzInfo &amp;#39;Asia/Taipei&amp;#39; CST+8:00:00 STD&amp;gt;),&lt;/span&gt;
&lt;span class="go"&gt; datetime.datetime(2016, 1, 1, 0, 0, tzinfo=&amp;lt;DstTzInfo &amp;#39;Asia/Taipei&amp;#39; CST+8:00:00 STD&amp;gt;),&lt;/span&gt;
&lt;span class="go"&gt; datetime.datetime(2016, 6, 3, 8, 0, tzinfo=&amp;lt;DstTzInfo &amp;#39;Asia/Taipei&amp;#39; CST+8:00:00 STD&amp;gt;),&lt;/span&gt;
&lt;span class="go"&gt; datetime.datetime(2016, 6, 3, 8, 0, tzinfo=&amp;lt;DstTzInfo &amp;#39;Asia/Taipei&amp;#39; CST+8:00:00 STD&amp;gt;)]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="_1"&gt;ç¸½çµ&lt;/h3&gt;
&lt;p&gt;æåççå¾ç©ï¼å°¤å¶æ¯å¾å¤å°æ¹ä¸ä¸å®é½å®æ´æ¯æ´æåï¼æå¥½çææ³éæ¯ç¨ &lt;span class="caps"&gt;UTC&lt;/span&gt;&amp;nbsp;æºéï¼åªæå¨ççéè¦æåè½ææç¶å°æéã&lt;/p&gt;
&lt;p&gt;å¦æå¤§å®¶å°æåå¾æèè¶£ï¼ä¸ä¹å &lt;a href="https://www.python.org/dev/peps/pep-0495/"&gt;&lt;span class="caps"&gt;PEP&lt;/span&gt; 495&lt;/a&gt; å·²ç¶è¢«æ¥åï¼æ²ææå¤æè©²æåºç¾å¨ Python 3.6&amp;nbsp;è£¡é¢ï¼å®èççæ¯æ¥åç¯ç´æéçåé¡ãï¼æè¦ºå¨èºç£å°æ¥åç¯ç´æéå®å¨æ²ææ¦å¿µåï¼&lt;/p&gt;
&lt;p&gt;ä¸å¾ä¸èªªè¦æ­£ç¢ºèçæéâ¦å¾éº»ç©åã&lt;/p&gt;</summary><category term="zh"></category><category term="datetime"></category><category term="pytz"></category><category term="sqlite"></category><category term="python"></category></entry><entry><title>ç¨ Flask è SQLiteÂ æ¶æ½ç±¤ç¶²ç«</title><link href="//blog.liang2.tw/posts/2015/09/flask-draw-member/" rel="alternate"></link><updated>2015-09-28T12:00:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2015-09-28:posts/2015/09/flask-draw-member/</id><summary type="html">&lt;p&gt;çºäºå¯¦é©å®¤çå°é¡çèå¯«ã&lt;/p&gt;
&lt;p&gt;ç®æ¨å¶å¯¦æ¯ Django + Django &lt;span class="caps"&gt;ORM&lt;/span&gt; + PostgreSQLï¼ä¸éä¸æ¬¡æ¥è§¸å¤ªå¤ææåææï¼åä¾æ¯è¼ç°¡å®çãæä»¥ééå¯è½è¬çä¸æ¯ best practiceï¼ä½ç¨çæ¯æå°ï¼åºå±¤ï¼çç¥è­èå·¥å·ãä¸éå§è®å¤ªå¤å¥ä»¶ï¼å&amp;nbsp;SQLAlchemyï¼åæäºç´°ç¯é¨ä»½ï¼åèä¸å¤ªè½ææ¡å°éè¦çæ¦å¿µä»¥åçºä»éº¼éè¦éäºå¥ä»¶ã&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ¬ç¯æç« éå¸¸é·ï¼æè©²æ²è¾¦æ³å¹¾åéå§è®å®ãå°è±¡æ¯åå­¸èå­¸ç¿ç°¡å®ç¶²ç«æ¶è¨­ã&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;éåå°æ¡çç®æ¨ï¼å çºå¤§å®¶ meeting&amp;nbsp;çæåé½ä¸ååé¡ï¼å¨ææçè¦æ±è¦ï¼æåå¯¦é©å®¤éè¦ä¸åæ½ç±¤å·¥å·ãåå çºæåå¯¦é©å®¤æåæå¹¾åçµå¥ï¼æä»¥æ½ç±¤çæåè¦éå°æåçµå¥å»æ½ã&lt;/p&gt;
&lt;p&gt;å¨ééç¨ &lt;a href="https://zh.wikipedia.org/wiki/LoveLive!"&gt;LoveLive!&lt;/a&gt; éæ &lt;a href="https://zh.wikipedia.org/wiki/K-ONï¼è¼é³é¨"&gt;K-&lt;span class="caps"&gt;ON&lt;/span&gt;!&lt;/a&gt;&amp;nbsp;çæå¡ä¾ç¶ä¾å­ã&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åè²ææå©ååç«é½æ²æçéï¼å¦ææä»éº¼åå­æé¯è«åè¨´æï¼çµå°ä¸æ¯ææçã&lt;/strong&gt;&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#_1"&gt;è³æè¨­è¨&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_2"&gt;ç¶²ç«æ¶æ§è¦å&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_3"&gt;å¯¦ä½ç°å¢è¨­å®&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#python"&gt;Python&amp;nbsp;ç°å¢&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#flaskjinja2"&gt;å®è£ FlaskãJinja2&amp;nbsp;ç­å¥ä»¶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#sqlite-database"&gt;SQLite&amp;nbsp;Database&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#csv"&gt;æ &lt;span class="caps"&gt;CSV&lt;/span&gt;&amp;nbsp;å¯«é²è³æåº«&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#flask"&gt;Flask&amp;nbsp;åºæ¬æ¶æ§&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#flask-sqlite"&gt;Flask è SQLite&amp;nbsp;è³æåº«è®å&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#first-view-first-template"&gt;First view, first&amp;nbsp;template&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_4"&gt;æ½ç±¤åè½&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#get-vs-post"&gt;&lt;span class="caps"&gt;GET&lt;/span&gt; vs &lt;span class="caps"&gt;POST&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#form"&gt;Form&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#request-form-post-handling-in-flask"&gt;Request (Form / &lt;span class="caps"&gt;POST&lt;/span&gt;) handling in&amp;nbsp;Flask&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#demo"&gt;Demo&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#more-on-templates"&gt;More on&amp;nbsp;templates&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_5"&gt;æ­·å²è¨é&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#datetime"&gt;æéèçç¨&amp;nbsp;datetime&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#whats-next"&gt;What&amp;rsquo;s&amp;nbsp;Next&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#static-files-and-better-theme"&gt;Static files and better&amp;nbsp;theme&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#more-how-web-works"&gt;More how web&amp;nbsp;works&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#object-relational-model-orm"&gt;Object Relational Model (&lt;span class="caps"&gt;ORM&lt;/span&gt;)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#django"&gt;Django&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_6"&gt;ç¸½çµ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#details"&gt;Details&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#sqlite-table-info"&gt;SQLite table&amp;nbsp;info&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#sqlite-foreign-key-check"&gt;SQLite foreign key&amp;nbsp;check&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_7"&gt;éæ°è®å¥è³æ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#datetime-in-sqlite-and-python"&gt;Datetime in SQLite and&amp;nbsp;Python&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h3 id="_1"&gt;è³æè¨­è¨&lt;/h3&gt;
&lt;p&gt;æåååè¨­æææªæ¡é½æ¾å¨ååè³æå¤¾è£¡ï¼ä¼°ä¸å« &lt;code&gt;draw_member&lt;/code&gt;ãä¹å¾æ²æé¡å¤èªªæçè©±ï¼é½æ¯å¨éåç®éä¸æä½ã&lt;/p&gt;
&lt;p&gt;åå§è³æç¨ &lt;span class="caps"&gt;CSV&lt;/span&gt;&amp;nbsp;æ ¼å¼ä¾å²å­ï¼æãåå­ãä»¥åãåé«ãå©åæ¬ä½ãä¸éèæ®å°å¯è½æææªæ¡å¯åºï¼å¨åå§æªæ¡å¤å ä¸åãæè¿è¢«æ½å°çæ¥æãæ¬ä½ï¼å¸ææè¿è¢«æ½å°çææ¯å¶ä»äººåè¢«æ½å°çæ©æä½ä¸é»ã&lt;/p&gt;
&lt;p&gt;éåæªæ¡å«å &lt;code&gt;members.csv&lt;/code&gt;ãä¸éå§æ²æäººè¢«æ½å°ï¼æä»¥æå¾ä¸æ¬é½åè¨­æç©ºç&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt;ï¼ç¬¬ä¸è¡æ¯æ¯ä¸æ¬æ¬ä½çåç¨±ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;quot;åå­&amp;quot;,&amp;quot;åé«&amp;quot;,&amp;quot;æè¿è¢«æ½å°çæ¥æ&amp;quot;
&amp;quot;é«å ç©ä¹æ&amp;quot;,&amp;quot;Î¼&amp;#39;s&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;çµ¢ç¬ çµµé&amp;quot;,&amp;quot;Î¼&amp;#39;s&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;å ãã¨ã&amp;quot;,&amp;quot;Î¼&amp;#39;s&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;åç° æµ·æª&amp;quot;,&amp;quot;Î¼&amp;#39;s&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;æç©º å&amp;quot;,&amp;quot;Î¼&amp;#39;s&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;è¥¿æ¨é çå§«&amp;quot;,&amp;quot;Î¼&amp;#39;s&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;æ±æ¢ å¸&amp;quot;,&amp;quot;Î¼&amp;#39;s&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;å°æ³ è±é½&amp;quot;,&amp;quot;Î¼&amp;#39;s&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;ç¢æ¾¤ ã«ã&amp;quot;,&amp;quot;Î¼&amp;#39;s&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;å¹³æ²¢ å¯&amp;quot;,&amp;quot;K-ON!&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;ç§å±± æ¾ª&amp;quot;,&amp;quot;K-ON!&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;ç°äºä¸­ å¾&amp;quot;,&amp;quot;K-ON!&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;ç´å¹ ç´¬&amp;quot;,&amp;quot;K-ON!&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;ä¸­é æ¢&amp;quot;,&amp;quot;K-ON!&amp;quot;,&amp;quot;&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é¦åæååç¢ºå®æç¨ Python æè³æè®åºä¾ãå¨ Python ç¶ä¸­æåå« &lt;code&gt;csv&lt;/code&gt; çå§å»ºæ¨¡çµï¼moduleï¼å¯ä»¥èç &lt;span class="caps"&gt;CSV&lt;/span&gt; çæªæ¡è®å¯«ãå¨ééæåé¸ç¨ &lt;a href="https://docs.python.org/3.5/library/csv.html#csv.DictReader"&gt;csv.DictReader&lt;/a&gt;ï¼å®é è¨­æææªæ¡çç¬¬ä¸è¡ç¶ææ¬ä½åç¨±ï¼ç¶å¾æ ¹æéåç¨±ï¼æ¯ä¸è¡é½æç¢çä¸å &lt;code&gt;dict&lt;/code&gt; ç©ä»¶ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;csv&lt;/span&gt;

&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;./members.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;newline&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;csv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DictReader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯ä»¥æéæ®µç¨å¼ç¢¼ç´æ¥æå¨ Python shell è£¡æèå­æä¸åæªæ¡ç¨ python&amp;nbsp;å·è¡å®ï¼çµæé½ææ¯ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;é«å ç©ä¹æ&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Î¼&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;çµ¢ç¬ çµµé&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Î¼&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;å ãã¨ã&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Î¼&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;åç° æµ·æª&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Î¼&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;æç©º å&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Î¼&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;è¥¿æ¨é çå§«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Î¼&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;æ±æ¢ å¸&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Î¼&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;å°æ³ è±é½&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Î¼&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ç¢æ¾¤ ã«ã&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Î¼&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;å¹³æ²¢ å¯&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;K-ON!&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ç§å±± æ¾ª&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;K-ON!&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ç°äºä¸­ å¾&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;K-ON!&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ç´å¹ ç´¬&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;K-ON!&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ä¸­é æ¢&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;K-ON!&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦æå¨ &lt;code&gt;print(row)&lt;/code&gt; ééæ´çä¸ä¸è³æï¼æ¹æï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;csv&lt;/span&gt;

&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;./members.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;newline&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;csv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DictReader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;{} of {}&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åè¼¸åºçµæææ¯ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;é«å ç©ä¹æ of Î¼&amp;#39;s
çµ¢ç¬ çµµé of Î¼&amp;#39;s
å ãã¨ã of Î¼&amp;#39;s
åç° æµ·æª of Î¼&amp;#39;s
æç©º å of Î¼&amp;#39;s
è¥¿æ¨é çå§« of Î¼&amp;#39;s
æ±æ¢ å¸ of Î¼&amp;#39;s
å°æ³ è±é½ of Î¼&amp;#39;s
ç¢æ¾¤ ã«ã of Î¼&amp;#39;s
å¹³æ²¢ å¯ of K-ON!
ç§å±± æ¾ª of K-ON!
ç°äºä¸­ å¾ of K-ON!
ç´å¹ ç´¬ of K-ON!
ä¸­é æ¢ of K-ON!
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éæ¨£å°±ç¢ºå®æåæè¾¦æ³æè³æç¨ Python è®åäºãè¦æ¿æ¯åæ¬ä½çå§å®¹ä¹å¾ç°¡å®ï¼åè¦åå­çè©±ï¼åªè¦ç¨ &lt;code&gt;row['åå­']&lt;/code&gt;ã&lt;/p&gt;
&lt;h3 id="_2"&gt;ç¶²ç«æ¶æ§è¦å&lt;/h3&gt;
&lt;p&gt;éåæ½ç±¤ç¶²ç«ä¸»è¦å°±å¹¾ååè½ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¦é &lt;/strong&gt;å¯ä»¥é¸æå¶ä¸­ä¸ååé«æææäººå»æ½ç±¤&lt;ul&gt;
&lt;li&gt;éåºä¹å¾å¯ä»¥çå°çµæ&lt;/li&gt;
&lt;li&gt;ä¸¦ä¸æéåæ½ç±¤çµææ´æ°å°æ­·å²è¨éè£¡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ­·å²è¨é&lt;/strong&gt;ååºéå»è¢«æ½å°çè¨é&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ´æ°æå¡&lt;/strong&gt;æ¸é¤ææè³æï¼éæ°è®å¥&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¯ä¸é æåè¦æååè½è¡¨åï¼æ¹ä¾¿åè½çåæã&lt;/p&gt;
&lt;p&gt;æä»¥è³æåº«çé¨ä»½ææå©å¼µè¡¨æ ¼ï¼&lt;strong&gt;members&lt;/strong&gt; ä»¥å &lt;strong&gt;draw_histories&lt;/strong&gt;&amp;nbsp;åå¥è¨éæå¡ä»¥åè¢«æ½éçæéã&lt;/p&gt;
&lt;pre style="font-family: Consolas, 'Courier New', monospace"&gt;
    âââââââââââââââââââââââ
    â members             â
    âââââââââââââââââââââââ¤
    â id          INTEGER â &lt;ââ
    â name           TEXT â   â
    â group_name     TEXT â   â
    âââââââââââââââââââââââ   â
                              â
    âââââââââââââââââââââââ   â
    â draw_histories      â   â foreign
    âââââââââââââââââââââââ¤   â key
    â memberid    INTEGER â âââ
    â time       DATETIME â
    âââââââââââââââââââââââ
&lt;/pre&gt;

&lt;p&gt;Table &lt;strong&gt;members&lt;/strong&gt; æè©²å¾å¥½çè§£ï¼ä¸åæ¬ä½æ¯åå­ nameï¼ä¸åæ¯åé«åç¨± group_nameãå¶ä¸­ id&amp;nbsp;éåæ¬ä½æ¯ç¨å¼å§é¨å¨ä½¿ç¨çï¼å®æå¨è®å¥è³æçæåèªåç¢çã&lt;/p&gt;
&lt;p&gt;Table &lt;strong&gt;draw_histories&lt;/strong&gt; è¨éæ¯æ¬¡æ½ç±¤ç¼ççæé time éæèª°è¢«æ½å° memberidï¼å¯ä»¥ç¼ç¾ memberid æ¯ç¨æå¡ç idï¼å æ­¤æåå¤å ä¸åéå¶æ¯éæ¬ä½çå¼æè©²è¦å¨ members è£¡ç id&amp;nbsp;ä¸­åºç¾éã&lt;/p&gt;
&lt;h3 id="_3"&gt;å¯¦ä½ç°å¢è¨­å®&lt;/h3&gt;
&lt;p&gt;æåé¸ç¨ &lt;a href="http://flask.pocoo.org/"&gt;Flask&lt;/a&gt; æ¶è¨­ serverï¼å çºå®ä¸éå§ç¨ç¸ç¶ç°¡å®ãè³æçé¨ä»½æè®å° &lt;a href="https://www.sqlite.org/"&gt;SQLite&lt;/a&gt;&amp;nbsp;è³æåº«ã&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Flask&lt;/em&gt; is a microframework for Python based on Werkzeug, Jinja 2 and good intentions. (Flask official&amp;nbsp;site)&lt;/p&gt;
&lt;p&gt;&lt;em&gt;SQLite&lt;/em&gt; is a software library that implements a self-contained, serverless, zero-configuration, transactional &lt;span class="caps"&gt;SQL&lt;/span&gt; database engine. (SQLite official&amp;nbsp;site)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id="python"&gt;Python&amp;nbsp;ç°å¢&lt;/h4&gt;
&lt;p&gt;ä½¿ç¨ &lt;a href="https://www.python.org/downloads/"&gt;Python 3.5&lt;/a&gt;ãçè«ä¸ SQLite å°±å·²ç¶è£å¥½äºè½ç´æ¥ä½¿ç¨ãä¸è¬å¨éç¼ Python ç¨å¼çæåæä½¿ç¨èæ¬ç°å¢ï¼å¥½èèæ¬ç°å¢å®è£ç Python å¥ä»¶å¯ä»¥ç¨ç«ç®¡çï¼ä¸åç³»çµ±æå¶ä»èæ¬ç°å¢å½±é¿ãæåç¨å§å»ºç &lt;a href="https://docs.python.org/3.5/library/venv.html#module-venv"&gt;venv&lt;/a&gt; å»ºç«ä¸ååç¨±çº &lt;code&gt;VENV&lt;/code&gt; çèæ¬ç°å¢ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python3.5 -m venv VENV
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éæåç®éåºä¸å°±æå¤ä¸å &lt;code&gt;VENV&lt;/code&gt; è³æå¤¾ï¼è£¡é¢æ¯åå®æ´ç python å·è¡çµæ§ï¼å°±å¥½åè£äºå python&amp;nbsp;å¨éåè·¯å¾ãåæ«æä¸ç®¡å®æéº¼åå°èæ¬éé¢ï¼ç¥éæéº¼ç¨å°±å¥½ãä½¿ç¨è·é¢éåå¥æ¯ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;source&lt;/span&gt; VENV/bin/activate
&lt;span class="o"&gt;(&lt;/span&gt;VENV&lt;span class="o"&gt;)&lt;/span&gt; $ which python
&lt;span class="c1"&gt;# /path/to/draw_member/VENV/bin/python&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;VENV&lt;span class="o"&gt;)&lt;/span&gt; $ deactivate
$  &lt;span class="c1"&gt;# åé¢ç (VENV) ææ¶å¤±&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="flaskjinja2"&gt;å®è£ FlaskãJinja2&amp;nbsp;ç­å¥ä»¶&lt;/h4&gt;
&lt;p&gt;Python ä½¿ç¨ pip&amp;nbsp;ç®¡çå®è£çå¥ä»¶ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;VENV&lt;span class="o"&gt;)&lt;/span&gt; $ pip install flask jinja2
&lt;span class="c1"&gt;# Collecting flask&lt;/span&gt;
&lt;span class="c1"&gt;# Collecting jinja2&lt;/span&gt;
&lt;span class="c1"&gt;# ... (é£å¸¶è£äºç¸éçå¥ä»¶ï¼&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éæåå¦ææ¥çè£äºåªäºå¥ä»¶å°±æçå°ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;VENV&lt;span class="o"&gt;)&lt;/span&gt; $ pip freeze
&lt;span class="c1"&gt;# Flask==0.10.1&lt;/span&gt;
&lt;span class="c1"&gt;# itsdangerous==0.24&lt;/span&gt;
&lt;span class="c1"&gt;# Jinja2==2.8&lt;/span&gt;
&lt;span class="c1"&gt;# MarkupSafe==0.23&lt;/span&gt;
&lt;span class="c1"&gt;# Werkzeug==0.10.4&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;çºäºæ¹ä¾¿ä¹å¾æç°å¢å®è£å¨å¥çé»è¦ä¸ï¼è¨å¾ç¨&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pip freeze &amp;gt; requirements.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æå¥ä»¶çæ¬çè³è¨é½å­å¨ä¸åæªæ¡è£¡çå¥½èæ¯ï¼ä¸æ¬¡æè¦ç°å¢æ¶èµ·ä¾å°±åªè¦&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pip install -r requirements.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å°±è¨­å®å®æäºã&lt;/p&gt;
&lt;h4 id="sqlite-database"&gt;SQLite&amp;nbsp;Database&lt;/h4&gt;
&lt;p&gt;æååæ SQLite æ¯åè³æè¡¨è¨­å®å¥½ï¼éæ¨£ä¹å¾å¨å¯«ç¨å¼å°±åªè¦å°å¿è®å¯«è³æå°±å¥½äºãæ ¹æåé¢å»ºçæ¨¡åï¼æåå¯ä»¥è½ææ &lt;span class="caps"&gt;SQL&lt;/span&gt;&amp;nbsp;èªæ³ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;-- create_db.sql&lt;/span&gt;
&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;members&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt; &lt;span class="k"&gt;ASC&lt;/span&gt; &lt;span class="n"&gt;AUTOINCREMENT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt; &lt;span class="k"&gt;NOT&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;group_name&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;draw_histories&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;memberid&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;time&lt;/span&gt; &lt;span class="n"&gt;DATETIME&lt;/span&gt; &lt;span class="k"&gt;DEFAULT&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;now&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;localtime&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
    &lt;span class="k"&gt;FOREIGN&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;memberid&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;members&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æéä¸² &lt;span class="caps"&gt;SQL&lt;/span&gt; å¯«å°ä¸åæªæ¡ &lt;code&gt;create_db.sql&lt;/code&gt; å¾å°±å¯ä»¥å¯¦éæ¸¬è©¦ä¸ä¸ãæåæå©åæå¡å¯«å°æªæ¡è£¡é¢ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sqlite3 -init create_db.sql test.db
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="go"&gt;-- Loading resources from create_db.sql&lt;/span&gt;

&lt;span class="go"&gt;SQLite version 3.8.11.1 2015-07-29 20:00:57&lt;/span&gt;
&lt;span class="go"&gt;Enter &amp;quot;.help&amp;quot; for usage hints.&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;members&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;group_name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;   ...&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;VALUES&lt;/span&gt;
&lt;span class="gp"&gt;   ...&amp;gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;é«å ç©ä¹æ&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Î¼&amp;#39;&amp;#39;s&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="gp"&gt;   ...&amp;gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;å¹³æ²¢ å¯&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;K-ON!&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;header&lt;/span&gt; &lt;span class="k"&gt;on&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;members&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="go"&gt;id|name|group_name&lt;/span&gt;
&lt;span class="go"&gt;1|é«å ç©ä¹æ|Î¼&amp;#39;s&lt;/span&gt;
&lt;span class="go"&gt;2|å¹³æ²¢ å¯|K-ON!&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;sqlite3 -init xxx.sql&lt;/code&gt; æææ¯æ &lt;code&gt;xxx.sql&lt;/code&gt; è£¡é¢ç &lt;span class="caps"&gt;SQL&lt;/span&gt; æä»¤é½å·è¡äºä¸éï¼æä»¥ä¸é²å° SQLite shell&amp;nbsp;è£¡é¢å°±å»ºç«å¥½è¡¨æ ¼äºã&lt;/p&gt;
&lt;p&gt;åä¾æåæ¨¡æ¬å¹¾æ¬¡æ½ç±¤çéç¨ãæ³¨æå°æåä¹åæå¯« &lt;strong&gt;draw_histories&lt;/strong&gt;.time çé è¨­å¼ï¼æä»¥æ½ç±¤åªè¦å¯«æ¯èª°å°±å¯ä»¥äºï¼æé SQLite&amp;nbsp;æèªåæ ¹ææä»¤å·è¡çæéçµ¦å¼ãä¸éæåé½è©¦ä¸ä¸å§ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;draw_histories&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;memberid&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;draw_histories&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;memberid&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;   ...&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2015-09-25 16:30&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æä»¥ç¬¬ä¸æ¬¡ &lt;span class="caps"&gt;INSERT&lt;/span&gt; æä»¤æ½äºææä»¥åå°å¯åä¸æ¬¡ãç¬¬äºæ¬¡ &lt;span class="caps"&gt;INSERT&lt;/span&gt; åæ½äºä¸æ¬¡å°å¯ï¼éæ¬¡éæé¡å¤æå®æéçºç 9 æ 25 èä¸å 4 é»åãéæ¼ SQLite è£¡ &lt;code&gt;datetime&lt;/code&gt; çæ´å¤ä½¿ç¨æ¹å¼å¯ä»¥åè&lt;a href="https://sqlite.org/lang_datefunc.html"&gt;å®ç¶² documentation&lt;/a&gt;ï¼æåçä¾å­åªè¦éæ¨£å°±è¶³å¤ äºã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;draw_histories&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="go"&gt;memberid|time&lt;/span&gt;
&lt;span class="go"&gt;1|2015-09-28 16:55:03&lt;/span&gt;
&lt;span class="go"&gt;2|2015-09-28 16:55:03&lt;/span&gt;
&lt;span class="go"&gt;2|2015-09-25 16:30:00&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åå©åå°±æ¯ç¬¬ä¸æ¬¡ &lt;span class="caps"&gt;INSERT&lt;/span&gt; æå»ºç«çæ½ç±¤æ­·å²ï¼è·ä½ ä¸æä»¤çæéæéãç¬¬äºæ¬¡ &lt;span class="caps"&gt;INSERT&lt;/span&gt; æçµ¦å®æéï¼æä»¥è¨éæ°¸é æ¯ 9 æ 25&amp;nbsp;èä¸åã&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;draw_histories&lt;/strong&gt; åªå²å­äº&amp;nbsp;member_idï¼æåå¯ä»¥åä¸åæ¯è¼è¤éçæ¥è©¢ï¼ææå¡çåå­è·æå±¬åé«ä¸èµ·ååºä¾ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;draw_time&lt;/span&gt;
&lt;span class="gp"&gt;   ...&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;draw_histories&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;members&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;
&lt;span class="gp"&gt;   ...&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;memberid&lt;/span&gt;
&lt;span class="gp"&gt;   ...&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt; &lt;span class="k"&gt;ASC&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="go"&gt;id|name|group_name|draw_time&lt;/span&gt;
&lt;span class="go"&gt;2|å¹³æ²¢ å¯|K-ON!|2015-09-25 16:30:00&lt;/span&gt;
&lt;span class="go"&gt;1|é«å ç©ä¹æ|Î¼&amp;#39;s|2015-09-28 16:55:03&lt;/span&gt;
&lt;span class="go"&gt;2|å¹³æ²¢ å¯|K-ON!|2015-09-28 16:55:03&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="csv"&gt;æ &lt;span class="caps"&gt;CSV&lt;/span&gt;&amp;nbsp;å¯«é²è³æåº«&lt;/h3&gt;
&lt;p&gt;æåå°±æä¹å¾è¦ç¨çè³æåº«ååçº &lt;code&gt;members.db&lt;/code&gt;ãæååæåå§çè³æå¯«é²è³æåº«è£¡ã&lt;/p&gt;
&lt;p&gt;ééåªæå¤ä¸åå¨ Python è£¡æä½ SQLite çæ­¥é©ãéé Python å§å»ºç &lt;a href="https://docs.python.org/3.5/library/sqlite3.html"&gt;sqlite&lt;/a&gt; module&amp;nbsp;å°±å¯ä»¥æ§å¶è³æåº«å­åãåç¢ºå®æéäºæªæ¡äºï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;members.csv&lt;/code&gt;:&amp;nbsp;æææå¡è³æ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;create_db.sql&lt;/code&gt;: è³æåº«&amp;nbsp;schema&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å import ç¨å°ç&amp;nbsp;module&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sqlite3&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;csv&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ææå¡è³æå¾ &lt;span class="caps"&gt;CSV&lt;/span&gt; è®é²ä¾ï¼è·ä¹åä¸æ¨£ï¼åªæ¯æåç¨å¾®æ´çä¸ä¸æ ¼å¼ï¼å­å¨ &lt;code&gt;members&lt;/code&gt; éåè®æ¸ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;./members.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;newline&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="n"&gt;csv_reader&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;csv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DictReader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="n"&gt;members&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;csv_reader&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="gp"&gt;...&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;members&lt;/span&gt;
&lt;span class="go"&gt;[(&amp;#39;é«å ç©ä¹æ&amp;#39;, &amp;quot;Î¼&amp;#39;s&amp;quot;),&lt;/span&gt;
&lt;span class="go"&gt; (&amp;#39;çµ¢ç¬ çµµé&amp;#39;, &amp;quot;Î¼&amp;#39;s&amp;quot;),&lt;/span&gt;
&lt;span class="go"&gt; (&amp;#39;å ãã¨ã&amp;#39;, &amp;quot;Î¼&amp;#39;s&amp;quot;),&lt;/span&gt;
&lt;span class="go"&gt; (&amp;#39;åç° æµ·æª&amp;#39;, &amp;quot;Î¼&amp;#39;s&amp;quot;),&lt;/span&gt;
&lt;span class="go"&gt; # ...&lt;/span&gt;
&lt;span class="go"&gt; (&amp;#39;ä¸­é æ¢&amp;#39;, &amp;#39;K-ON!&amp;#39;)]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ¥èæ¯æ°çé¨ä»½ï¼è¦åç¨ &lt;code&gt;sqlite3.connect()&lt;/code&gt; å»ºç« SQLite database é£ç·ï¼ç¶å¾åç¨éåé£ç·å»ä¸ &lt;span class="caps"&gt;SQL&lt;/span&gt; æä»¤ãé¦åè¦æ table&amp;nbsp;é½å»ºç«åºä¾ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;create_db.sql&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="n"&gt;create_db_sql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="gp"&gt;...&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sqlite3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;connect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;members.db&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;executescript&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;create_db_sql&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;db.executescript('...')&lt;/code&gt; å¯ä»¥å·è¡ä¸ç³»åç &lt;span class="caps"&gt;SQL&lt;/span&gt; æä»¤ï¼æ³¨ææä»¤éè¦æåèï¼ãå¦å¤ä½¿ç¨ &lt;code&gt;with db: ...&lt;/code&gt; ä½ç¨æ¯æ sqlite3 module æèªåå¹«æåæä¸­éç &lt;span class="caps"&gt;SQL&lt;/span&gt; æä»¤éåº&lt;sup id="fnref:sqlite3 auto commit"&gt;&lt;a class="footnote-ref" href="#fn:sqlite3 auto commit" rel="footnote"&gt;2&lt;/a&gt;&lt;/sup&gt;ï¼ç­åæ¼ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;executescript&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;create_db_sql&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;commit&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åä¾æè®é²ä¾ç &lt;code&gt;members&lt;/code&gt; è®æ¸å¯«å°è³æè¡¨è£¡é¢ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;executemany&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;        &lt;span class="s1"&gt;&amp;#39;INSERT INTO  members (name, group_name) VALUES (?, ?)&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;        &lt;span class="n"&gt;members&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è©¦èæè³æè®åºä¾ï¼ç¢ºå®ççå­é²å»äºã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;SELECT * FROM members LIMIT 3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="go"&gt;(1, &amp;#39;é«å ç©ä¹æ&amp;#39;, &amp;quot;Î¼&amp;#39;s&amp;quot;)&lt;/span&gt;
&lt;span class="go"&gt;(2, &amp;#39;çµ¢ç¬ çµµé&amp;#39;, &amp;quot;Î¼&amp;#39;s&amp;quot;)&lt;/span&gt;
&lt;span class="go"&gt;(3, &amp;#39;å ãã¨ã&amp;#39;, &amp;quot;Î¼&amp;#39;s&amp;quot;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å°äºééæåè³æçé¨ä»½æ²åé¡äºï¼æ¥ä¸ä¾å°±è¦èæèçç¶²ç«æµç¨æ¬èº«ã&lt;/p&gt;
&lt;h3 id="flask"&gt;Flask&amp;nbsp;åºæ¬æ¶æ§&lt;/h3&gt;
&lt;p&gt;Flask ç web server å¯ä»¥æææåè½é½å¯«å¨ä¸åæªæ¡ï¼å¨ééå°±ä»¥ &lt;code&gt;draw_member.py&lt;/code&gt; çºä¾å­ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;flask&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Flask&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Flask&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="nd"&gt;@app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;index&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;lt;p&amp;gt;Hello World!&amp;lt;/p&amp;gt;&amp;quot;&lt;/span&gt;


&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä»¥ä¸å°±æ¯æåºæ¬ç Flask server æ¶æ§ãåä¾æ¸¬è©¦ççï¼é½å·²ç¶ç­å¾ä¸åå­ç¾å¤å­äºãåæ server&amp;nbsp;è·èµ·ä¾ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;VENV&lt;span class="o"&gt;)&lt;/span&gt; $ python draw_member.py
 * Running on http://127.0.0.1:5000/ &lt;span class="o"&gt;(&lt;/span&gt;Press CTRL+C to quit&lt;span class="o"&gt;)&lt;/span&gt;
 * Restarting with stat
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åä¾å¯ä»¥éçè¦½å¨è¨ªå &lt;a href="http://localhost:5000/"&gt;http://localhost:5000/&lt;/a&gt;ï¼æèç¨ command line&amp;nbsp;ä¾è¨ªåï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl &lt;span class="s1"&gt;&amp;#39;http://localhost:5000/&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# &amp;lt;p&amp;gt;Hello World!&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æçå° server åå³ãHello World!ããå¤ªæåäºï¼åºä¸åèªªææ´åæµç¨è code&amp;nbsp;çéä¿ã&lt;/p&gt;
&lt;p&gt;&lt;code&gt;app&lt;/code&gt; æ¯æ´å Flask application çæ ¸å¿ç©ä»¶ï¼å¯ä»¥çå°æå¾æåæå¼å«å®ç &lt;code&gt;.run()&lt;/code&gt; ä¾ç¢çä¸åå¯ä»¥åç web serverã&lt;code&gt;debug=True&lt;/code&gt; è¡¨ç¤ºå¦æ server æé¯èª¤çæå Flask ææä¾æåå®æ´çé¯èª¤è¨æ¯ï¼åå«é¯èª¤æ¯å¨åªå Python function è£¡ç¢ççï¼é¯èª¤æååè®æ¸çå¼ç­ç­ãå çºéæ¨£æä¹æè®æå¿äººå£«ç¥éç¶²ç«æ¯æéº¼éè¡çï¼è®æ­£å¼ç¶²ç«ï¼ä¸&amp;nbsp;productionï¼æææéåé¸é éæã&lt;/p&gt;
&lt;p&gt;æåå®ç¾©äºä¸å &lt;code&gt;index&lt;/code&gt; function ä¸¦ä¸ç¨ decorator æéåå½å¼ç¶å®å¨ &lt;code&gt;/&lt;/code&gt; è·¯å¾ä¹å°±æ¯é¦é ä¸ãä½¿ç¨èè¨ªå &lt;code&gt;/&lt;/code&gt; å°±æè·å°éå function&amp;nbsp;è£¡ä¾ã&lt;/p&gt;
&lt;h3 id="flask-sqlite"&gt;Flask è SQLite&amp;nbsp;è³æåº«è®å&lt;/h3&gt;
&lt;p&gt;æååæè³æåº«ç¸éçå½å¼é½åå¯«å¥½ï¼ééåºæ¬ä¸åç§ &lt;a href="http://flask.pocoo.org/docs/0.10/patterns/sqlite3/#using-sqlite-3-with-flask"&gt;Flask å®ç¶² SQLite ä½¿ç¨æ¹å¼&lt;/a&gt;ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;csv&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sqlite3&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;flask&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Flask&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt;

&lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Flask&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;SQLITE_DB_PATH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;members.db&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;SQLITE_DB_SCHEMA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;create_db.sql&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;MEMBER_CSV_PATH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;members.csv&amp;#39;&lt;/span&gt;


&lt;span class="c1"&gt;# SQLite3-related operations&lt;/span&gt;
&lt;span class="c1"&gt;# See SQLite3 usage pattern from Flask official doc&lt;/span&gt;
&lt;span class="c1"&gt;# http://flask.pocoo.org/docs/0.10/patterns/sqlite3/&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_db&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;getattr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;_database&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_database&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sqlite3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;connect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SQLITE_DB_PATH&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="c1"&gt;# Enable foreign key check&lt;/span&gt;
        &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;PRAGMA foreign_keys = ON&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;


&lt;span class="nd"&gt;@app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;teardown_appcontext&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;close_connection&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;exception&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;getattr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;_database&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;


&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¸ä¸å­å¤äºå¾å¤&amp;nbsp;codeï¼å¦æå¤ªè¤éå¯ä»¥åç¶ä½å°±æ¯éæ¨£å§ã&lt;/p&gt;
&lt;p&gt;éè¦äºè§£çé¨ä»½ï¼ç¬¬ä¸æ¯ &lt;code&gt;g&lt;/code&gt; éåè®æ¸è£¡å¯ä»¥æ¾å¾å¤éè¦å³ä¾å³å»çè®æ¸ï¼æä»¥å°±æå»ºç«å¥½çè³æåº«é£ç·æ¾å¨ &lt;code&gt;g._database&lt;/code&gt;ãå¹³å¸¸å¦æè¦ç¨éåé£ç·çè©±ï¼å°±ç¨ &lt;code&gt;db = get_db()&lt;/code&gt; å»æ¿ã&lt;/p&gt;
&lt;p&gt;ç¬¬äºæ¯æåæè³æçè·¯å¾ç­ç­ï¼é½å¯«æè®æ¸æ¾å¨ç¨å¼ç¢¼çæéé ­ãéæ¯åå¥½ç¿æ£ï¼æå¸¸æ¸è·ç¨å¼åéä¾ï¼ç®¡çææ¹ä¾¿&lt;sup id="fnref:flask-config"&gt;&lt;a class="footnote-ref" href="#fn:flask-config" rel="footnote"&gt;3&lt;/a&gt;&lt;/sup&gt;ã&lt;/p&gt;
&lt;h3 id="first-view-first-template"&gt;First view, first&amp;nbsp;template&lt;/h3&gt;
&lt;p&gt;åä¾åé¦é ï¼æ &lt;span class="caps"&gt;HTML&lt;/span&gt; æ¾å¨ &lt;code&gt;templates/index.html&lt;/code&gt;ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;head&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;meta&lt;/span&gt; &lt;span class="na"&gt;charset&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;utf-8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;meta&lt;/span&gt; &lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;viewport&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;content&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;width=device-width&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;æå¡æ½ç±¤&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;head&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;ä¾æ½åºå¿«æ¨çå¤¥ä¼´å§ï¼&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;h3&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;åè½å&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;h3&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;ul&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
      &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;li&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;é¦é ï¼æ½ç±¤ï¼&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;li&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
      &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;li&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;æ­·å²è¨é&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;li&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
      &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;li&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;æ¸é¤è¨éãæ´æ°æå¡è³æ&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;li&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;ul&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éåªæ¯åå®ç´çé¦é ï¼æåæ¨é¡ï¼éæååè½åï¼ä½æ«æé½æ²æåè½ãæåä¿®æ¹ä¸ä¸ &lt;code&gt;draw_member.py&lt;/code&gt; è£¡å®ç¾©ç index&amp;nbsp;è®ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;flask&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;render_template&lt;/span&gt;

&lt;span class="nd"&gt;@app.route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;index&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;render_template&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;index.html&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é¦¬ä¸ä¾å·è¡ççï¼ç¨ä¸æ¨£çæ¹å¼ãä¸éä¹åå·è¡çé£åå¯è½æ²æçµæï¼è¨å¾ä¸å port åªè½æä¸åæåï¼æä»¥è¦ä¸æ¯ç¨èçï¼Flask å¾è°æï¼å¨ &lt;code&gt;debug=True&lt;/code&gt; æç¥éæªæ¡è¢«æ´æ°æå°±æç¨æ°çï¼ï¼è¦ä¸æ¯å°±éæåééä¸åæ°çã&lt;/p&gt;
&lt;p&gt;æéçè¦½å¨è¨ªå &lt;a href="http://localhost:5000"&gt;http://localhost:5000&lt;/a&gt;&amp;nbsp;æè©²æåºç¾åºä¸çç«é¢ã&lt;/p&gt;
&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/flask-draw-member/pics/flask_helloworld.png"/&gt;
  &lt;p class="caption"&gt;Flask Hello&amp;nbsp;World&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id="_4"&gt;æ½ç±¤åè½&lt;/h3&gt;
&lt;p&gt;æ¥ä¸ä¾è¦å¯¦ä½æ½ç±¤çåè½å¦ï¼ç§åé¢èªªçï¼æåå¨é¦é æè¨­ä¸ååé«åè¡¨ï¼ä½¿ç¨èå°±æé¸ææååé«å»æ½ç±¤ã&lt;/p&gt;
&lt;p&gt;å¨å¯¦ä½ä¹åè¦ä¾èæ¯ä»ç´¹ä¸ä¸ï¼è¦åè¬ä¸ä¸ &lt;span class="caps"&gt;GET&lt;/span&gt; è &lt;span class="caps"&gt;POST&lt;/span&gt;&amp;nbsp;çå·®ç°ã&lt;/p&gt;
&lt;h4 id="get-vs-post"&gt;&lt;span class="caps"&gt;GET&lt;/span&gt; vs &lt;span class="caps"&gt;POST&lt;/span&gt;&lt;/h4&gt;
&lt;p&gt;ä½¿ç¨èå¹³å¸¸å¨è¨ªåç¶²ç«æï¼è©²äººè¼¸å¥ä¸åç¶²ç«ãé»ä¸åè¶é£åï¼éæåçè¦½å¨æç¼éä¸å &lt;span class="caps"&gt;GET&lt;/span&gt; request å°å°æç server ä»¥åè·¯å¾ãçè¦½å¨ï¼éå¸¸ï¼å°±æåå³ä¸åå°æç &lt;span class="caps"&gt;HTML&lt;/span&gt;&amp;nbsp;æªæ¡ï¼çè¦½å¨å°±æè² è²¬æå®é¡¯ç¤ºå¨ç«é¢ä¸ã&lt;/p&gt;
&lt;p&gt;ä½ç¶ä½¿ç¨èè·ç¶²ç«ææ´å¤äºåçæåï¼å¸¸å¸¸æ¯è¦æä½¿ç¨èçè³è¨éçµ¦ç¶²ç«æï¼åå¸³èç»å¥ãå¡«åå·è¡¨å®ï¼æèå¨ééçé¸ææååé«å»æ½ç±¤ï¼éæåå°±æéé &lt;span class="caps"&gt;POST&lt;/span&gt;ã&lt;/p&gt;
&lt;p&gt;æ´å¤ç &lt;span class="caps"&gt;GET&lt;/span&gt;/&lt;span class="caps"&gt;POST&lt;/span&gt; ä»¥åå¶ä»ç &lt;span class="caps"&gt;HTTP&lt;/span&gt; requestï¼å¯ä»¥åè&lt;a href="https://archer1609wp.wordpress.com/2014/03/02/httppost%E8%88%87get/"&gt;ä¸é å¼ä»ç´¹ï¼ä¸­ï¼&lt;/a&gt;æ&lt;a href="https://developer.mozilla.org/en-US/docs/Web/HTTP"&gt;éå¸¸å®æ´çä»ç´¹å¨ &lt;span class="caps"&gt;MDN&lt;/span&gt;ï¼è±ï¼&lt;/a&gt;&lt;/p&gt;
&lt;h4 id="form"&gt;Form&lt;/h4&gt;
&lt;p&gt;æå¸¸è¦ç &lt;span class="caps"&gt;POST&lt;/span&gt; å°±æ¯æ­é&lt;a href="https://developer.mozilla.org/en/docs/Web/HTML/Element/form"&gt;è¡¨å®ï¼formï¼&lt;/a&gt;ä½¿ç¨ãåç»å¥è¦å¡«å¸³èå¯ç¢¼ãåå·åé¡èåç­ï¼å°±å¾å¸¸ç¨ form å¯¦ä½ãForm è£¡é¢æå¾å¤ç¨®&amp;nbsp;inputï¼ä»£è¡¨ä½¿ç¨èè½å¡«çæ¬ä½ï¼é¡åå¯è½æ¯å®é¸ãè¤é¸ãå®è¡ãå¤è¡ãå¯æç­ã&lt;/p&gt;
&lt;p&gt;æåå°±åçä¸ä¸ form å¯¦éçé·ç¸å§ãæ¹å¯« &lt;code&gt;templates/index.html&lt;/code&gt;ï¼å ä¸ä¸åæ½ç±¤é¸åé«ç&amp;nbsp;formã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;ä¾æ½åºå¿«æ¨çå¤¥ä¼´å§ï¼&lt;span class="nt"&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;&lt;span class="c"&gt;&amp;lt;!-- æ¬ä¾æç --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;é¸æè¦è¢«æ½çåé«&lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;form&lt;/span&gt; &lt;span class="na"&gt;action=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/draw&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;method=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;post&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;label&lt;/span&gt; &lt;span class="na"&gt;for=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;group_name&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;åéåç¨±ï¼&lt;span class="nt"&gt;&amp;lt;/label&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;radio&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;group_name&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Î¼&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;Î¼&amp;#39;s
  &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;radio&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;group_name&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;K-ON!&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;K-ON!
  &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;radio&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;group_name&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ALL&amp;quot;&lt;/span&gt; &lt;span class="err"&gt;checked&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;ï¼å¨ï¼
  &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;submit&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Submit&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/form&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;hr&amp;gt;&lt;/span&gt;&lt;span class="c"&gt;&amp;lt;!-- éæ¯åéç· --&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åºæ¬ä¸å å¨ body è£¡é¢å°±å¯ä»¥ãéå form åå«äºä¸åæ¨ç±¤ï¼æå®æ¯çµ¦åçº &lt;code&gt;group_name&lt;/code&gt; ç inputãåºä¸æ¥åå input tags&amp;nbsp;ä½å¯¦éä¸åªæå©å¤§åã&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸å¤§åæ¯åé«çå®é¸é¸é å±ä¸å inputï¼æ³¨æå°ä»åç &lt;code&gt;name&lt;/code&gt; é½æ¯ &lt;code&gt;group_name&lt;/code&gt; ä½ &lt;code&gt;value&lt;/code&gt; ä¸åï¼å¾é¢æ¥èä»åé¡¯ç¤ºçå­ãå¶ä¸­ãï¼å¨ï¼ãå®å¤äºä¸å &lt;code&gt;checked&lt;/code&gt; è¡¨ç¤ºé è¨­é¸æéåé¸é ã&lt;/p&gt;
&lt;p&gt;å¦ä¸å¤§åæ¯ &lt;code&gt;type=submit&lt;/code&gt; ç&amp;nbsp;inputï¼ä»å°±æ¯éåºçè¡¨å®çæéã&lt;/p&gt;
&lt;p&gt;åä¾æ³¨æ form tag æ¬èº«ã&lt;code&gt;method="post"&lt;/code&gt; æè©²å¾å¥½çè§£ï¼è¡¨ç¤ºè¦éåº &lt;span class="caps"&gt;POST&lt;/span&gt; requestï¼&lt;code&gt;action="/draw"&lt;/code&gt; è¡¨ç¤ºéå &lt;span class="caps"&gt;POST&lt;/span&gt; è¦ç¼å° &lt;code&gt;/draw&lt;/code&gt; éåè·¯å¾ã&lt;/p&gt;
&lt;p&gt;åæ¨£ï¼form åºä¸ä¹å¾å¤ç´°ç¯ï¼æ­¡è¿åå» &lt;a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms"&gt;&lt;span class="caps"&gt;MDN&lt;/span&gt;&lt;/a&gt;&amp;nbsp;äºè§£ã&lt;/p&gt;
&lt;h4 id="request-form-post-handling-in-flask"&gt;Request (Form / &lt;span class="caps"&gt;POST&lt;/span&gt;) handling in&amp;nbsp;Flask&lt;/h4&gt;
&lt;p&gt;æä»¥æåé¦¬ä¸ä¾å¯«èç &lt;code&gt;/draw&lt;/code&gt; &lt;span class="caps"&gt;POST&lt;/span&gt; ç view&amp;nbsp;å§ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;random&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;flask&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;


&lt;span class="nd"&gt;@app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/draw&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;methods&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;POST&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="c1"&gt;# Get the database connection&lt;/span&gt;
    &lt;span class="n"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_db&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="c1"&gt;# Draw member ids from given group&lt;/span&gt;
    &lt;span class="c1"&gt;# If ALL is given then draw from all members&lt;/span&gt;
    &lt;span class="n"&gt;group_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;group_name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ALL&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;valid_members_sql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;SELECT id FROM members &amp;#39;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;group_name&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ALL&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;cursor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;valid_members_sql&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;valid_members_sql&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;WHERE group_name = ?&amp;#39;&lt;/span&gt;
        &lt;span class="n"&gt;cursor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;valid_members_sql&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;group_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;valid_member_ids&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
        &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;cursor&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="c1"&gt;# If no valid members return 404 (unlikely)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;valid_member_ids&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;err_msg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;lt;p&amp;gt;No members in group &amp;#39;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;#39;&amp;lt;/p&amp;gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;group_name&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;err_msg&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;404&lt;/span&gt;

    &lt;span class="c1"&gt;# Randomly choice a member&lt;/span&gt;
    &lt;span class="n"&gt;lucky_member_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;choice&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;valid_member_ids&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# Obtain the lucy member&amp;#39;s information&lt;/span&gt;
    &lt;span class="n"&gt;member_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;member_group_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;SELECT name, group_name FROM members WHERE id = ?&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lucky_member_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchone&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;lt;p&amp;gt;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;ï¼åé«ï¼&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;ï¼&amp;lt;/p&amp;gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;member_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;member_group_name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Flask ææä½¿ç¨èç¼çµ¦ server ç request å­å¨ &lt;code&gt;request&lt;/code&gt; è£¡é¢ï¼å¶å¯¦ä½¿ç¨èæå³è »å¤è³è¨çï¼åè©²äººçèªè¨ãç¨ççè¦½å¨ãæéç­ç­ï¼éäºé½è½å¨ &lt;code&gt;request&lt;/code&gt; æ¾å°ãèä½¿ç¨èå¡«å¥½ç form çå§å®¹æå­å¨ç¶ä¸­ &lt;code&gt;request.form&lt;/code&gt; è£¡ï¼èæåååå®ç¾©å¨ form ä¸­ input name å°±æè®æééç dict&amp;nbsp;keyã&lt;/p&gt;
&lt;p&gt;å æ­¤å¦æè¦æ¿ä½¿ç¨èæ±ºå®ç &lt;code&gt;group_name&lt;/code&gt; æï¼å°±æå¯«æ &lt;code&gt;request.form.get('group_name', 'ALL')&lt;/code&gt;ãéç¸ç¶æ¼ &lt;code&gt;request.form['group_name']&lt;/code&gt; ä½å¨æ²æéå key æåå³é è¨­å¼ &lt;code&gt;'ALL'&lt;/code&gt;ãæ­£å¸¸ä½¿ç¨ä¸¦ä¸ææ¾ä¸å°éå&amp;nbsp;keyï¼ä½ç¶²ç«éç¼èæ°¸é ä¸è¦ç¸ä¿¡ä½¿ç¨èæä¹ä¹åå³éäºå§å®¹ã&lt;/p&gt;
&lt;p&gt;æ¿äºåé«åç¨±ä¹å¾ï¼å°±ç¨åé«åç¨±å»ä¸æ¥è©¢ç &lt;span class="caps"&gt;SQL&lt;/span&gt;ãåçéåç¨±å¯è½æ²æçµæï¼éæå°±åå³ä¸å &lt;span class="caps"&gt;HTTP&lt;/span&gt; status code çº 404 çé¯èª¤è¨æ¯ãä¸è¬ææ³ &lt;span class="caps"&gt;4XX&lt;/span&gt;&amp;nbsp;é½ä»£è¡¨ä½¿ç¨èçµ¦çè³ææåé¡çã&lt;/p&gt;
&lt;p&gt;æ¿å°äºæææå¡ç id å¾ï¼ç¨äºå &lt;code&gt;random.choice&lt;/code&gt; é¨æ©æ½ä¸ååºä¾ãå¦åå­é¢ä¸çææï¼&lt;a href="https://docs.python.org/3.5/library/random.html#random.choice"&gt;random&lt;/a&gt; æ¯å Python å§å»ºç moduleãåæéå id&amp;nbsp;æ¿å»æ¥åå­èåé«ã&lt;/p&gt;
&lt;p&gt;æåç¸½å±åäºå©åè³æåº«æ¥è©¢ï¼ç¬¬ä¸æ¬¡æå¯è½ç member id é½å³åä¾ï¼ç¬¬äºæ¬¡ææ½ä¸­çäººçåå­ãåé«é½æ¿åä¾ãæ«æéæ²åå¯«å°æ­·å²çåè½ï¼ä½é£åä¹ä¸é£ï¼ä¹å¾åèªªãåä¸å templateï¼æçµæåå¨ &lt;span class="caps"&gt;HTML&lt;/span&gt; æåºæ¬ç &lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt; åç´ å°±å³åä¾ã&lt;/p&gt;
&lt;h4 id="demo"&gt;Demo&lt;/h4&gt;
&lt;p&gt;éæ°æ´çé¦é ï¼å¯ä»¥çå°å¤äºä¸åè¡¨å®ï¼å»¢è©±ï¼ãFlask ç web server å¾è°æï¼ä¸ç¨éæ°ååå®ï¼æèªåçå°æªæ¡ææ´æ°å reloadãå¯ä»¥åå»æ¯å°ä¸ä¸èªå·±å¯«å¨ &lt;code&gt;index.html&lt;/code&gt; è£¡ &lt;span class="caps"&gt;HTML&lt;/span&gt;&amp;nbsp;å¨çè¦½å¨ä¸åç¾çå°æéä¿ã&lt;/p&gt;
&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/flask-draw-member/pics/flask_index_form.png"/&gt;
  &lt;p class="caption"&gt;æ°çé¦é ï¼å¤äºä¸åè¡¨å®&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;æä¸ Submit ä¹å¾å°±æè·³å°æ½ç±¤çµæï¼æ³¨æ &lt;span class="caps"&gt;URL&lt;/span&gt;&amp;nbsp;çè®åï¼&lt;/p&gt;
&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/flask-draw-member/pics/flask_draw_result.png"/&gt;
  &lt;p class="caption"&gt;æ½ç±¤çµæ&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;é è¨æ¯æ½å¨é¨ï¼ä½ ä¹å¯ä»¥åå°ä¸ä¸é ï¼é¸èªå·±æ³è¦çåé«ã&lt;/p&gt;
&lt;p&gt;æéè¦çåè½å°±å®æå¦ï¼å¦æèªå·±ç¨å¼éå°ä¸äºçæ³çè©±ï¼å¯ä»¥ç&lt;a href="https://github.com/ccwang002/draw_member/blob/169d81650d8ca649c5484c43c05324885e7cb7fb/draw_member.py"&gt;æå¯«çå®æ´çæ¬&lt;/a&gt;ã&lt;/p&gt;
&lt;h3 id="more-on-templates"&gt;More on&amp;nbsp;templates&lt;/h3&gt;
&lt;p&gt;ä¹åæå &lt;code&gt;render_template&lt;/code&gt; å¶å¯¦é½æ¯å³ä¸åå®æ´ç &lt;span class="caps"&gt;HTML&lt;/span&gt; å§å®¹çµ¦å®ï¼ä¸¦æ²æç¨å° template åè½ãTemplate&amp;nbsp;æå¹¾åç¨èï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éä¸­éè¦ç¨å°ççæ®µãçµæ§&lt;/li&gt;
&lt;li&gt;è®ä¸é¨ä»½ &lt;span class="caps"&gt;HTML&lt;/span&gt;&amp;nbsp;çå§å®¹åè®æ¸æ§å¶&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é¦¬ä¸ä¾æ¹å¯«ä¸ä¸å§ãæåçåè½è¡¨æè©²æ¯ä¸é é½è¦åºç¾ï¼åä¾æåå¸æ &lt;code&gt;/draw&lt;/code&gt; çé é¢ä¹æ¯åå®æ´ç &lt;span class="caps"&gt;HTML&lt;/span&gt;ã&lt;/p&gt;
&lt;p&gt;é¦ååæå¸¸ç¨çé¨ä»½ç¨ç«åºä¾ï¼åæ &lt;code&gt;templates/base.html&lt;/code&gt;ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;&amp;lt;!-- templates/base.html --&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;meta&lt;/span&gt; &lt;span class="na"&gt;charset=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;utf-8&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;meta&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;viewport&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;content=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;width=device-width&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;title&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;title&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;æå¡æ½ç±¤&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="nv"&gt;title&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;hr&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;h3&amp;gt;&lt;/span&gt;åè½å&lt;span class="nt"&gt;&amp;lt;/h3&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;ul&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;li&amp;gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;é¦é ï¼æ½ç±¤ï¼&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;li&amp;gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/history&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;æ­·å²è¨é&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;li&amp;gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/reset&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;æ¸é¤è¨éãæ´æ°æå¡è³æ&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/ul&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ååè½åéç¨®ä¸æè®çå°±å¾é©åæ¾å¨ééãèæåçé¦é å°±å¯ä»¥éè¦ä½¿ç¨éåçµæ§ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;&amp;lt;!-- templates/index.html --&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;extends&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;base.html&amp;quot;&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;

&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;ä¾æ½åºå¿«æ¨çå¤¥ä¼´å§ï¼&lt;span class="nt"&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;é¸æè¦è¢«æ½çåé«&lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;form&lt;/span&gt; &lt;span class="na"&gt;action=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/draw&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;method=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;post&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;label&lt;/span&gt; &lt;span class="na"&gt;for=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;group_name&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;åéåç¨±ï¼&lt;span class="nt"&gt;&amp;lt;/label&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;radio&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;group_name&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Î¼&amp;#39;s&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;Î¼&amp;#39;s
  &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;radio&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;group_name&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;K-ON!&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;K-ON!
  &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;radio&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;group_name&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ALL&amp;quot;&lt;/span&gt; &lt;span class="err"&gt;checked&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;ï¼å¨ï¼
  &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;submit&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Submit&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/form&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯ä»¥çå°æå¤§çå·®ç°å°±æ¯æåç &lt;code&gt;index.html&lt;/code&gt; è®ç°¡å®äºãå®å°±åç©ä»¶ç¹¼æ¿ä¸æ¨£ï¼&lt;code&gt;{% extends "base.html" %}&lt;/code&gt;ï¼è¡¨ç¤ºåæ &lt;code&gt;base.html&lt;/code&gt; çå§å®¹æ¾é²ä¾ï¼èè£¡é¢å®ç¾©äºå©å blockï¼&lt;code&gt;title&lt;/code&gt; ä»¥å &lt;code&gt;content&lt;/code&gt;ãIndex æå®ç¾© content çå§å®¹ï¼æä»¥å°±åä»£æåæ¬å®ç¾©å¨ base è£¡ç©ºç contentã  Index ä¸¦æ²æå®ç¾© titleï¼é£å°±æç¨åæ¬ block&amp;nbsp;å§çå¼ï¼å³ãæå¡æ½ç±¤ãã&lt;/p&gt;
&lt;p&gt;åä¾èç &lt;code&gt;/draw&lt;/code&gt; çé¨ä»½ï¼æåé¤èåå©ç¨ &lt;code&gt;base.html&lt;/code&gt; ä¹å¤ï¼éè¦å¼å¥ template variable&amp;nbsp;çæ¦å¿µã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;&amp;lt;!-- templates/draw.html --&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;extends&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;base.html&amp;quot;&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;

&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;title&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;æ½ç±¤çµæ&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="nv"&gt;title&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;

&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;æ½ç±¤çµæ&lt;span class="nt"&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;name&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;ï¼åé«ï¼&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;group&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;ï¼&lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¹å¥çæ¯ &lt;code&gt;{{ name }}&lt;/code&gt; å &lt;code&gt;{{ group }}&lt;/code&gt;ãéèªæ³è¡¨ç¤ºä»åçå¼åå¥å &lt;code&gt;name&lt;/code&gt; å &lt;code&gt;group&lt;/code&gt; éå©åè®æ¸æ±ºå®ï¼è®æ¸çå¼å¨ &lt;code&gt;render_template&lt;/code&gt; ææææ±ºå®ãè¦æéº¼æè®æ¸çå¼å³å° template&amp;nbsp;è£¡å¢ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/draw&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;methods&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;POST&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="c1"&gt;# ...&lt;/span&gt;
    &lt;span class="c1"&gt;# return &amp;#39;&amp;lt;p&amp;gt;%sï¼åé«ï¼%sï¼&amp;lt;/p&amp;gt;&amp;#39; % (member_name, member_group_name)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;render_template&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;draw.html&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;member_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;member_group_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ¹å¯«å¥½ç draw ä½¿ç¨ template &lt;code&gt;templates/draw.html&lt;/code&gt;ï¼ä¸¦å¨ &lt;code&gt;render_template&lt;/code&gt; ææè®æ¸çå¼é½æ¾é²å»ã&lt;/p&gt;
&lt;p&gt;éæåæéæ°æ½ç±¤å¯ä»¥çå°æ°ç template&amp;nbsp;çè¼¸åºçµæï¼åè½è¡¨ä¹åºç¾äºã&lt;/p&gt;
&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/flask-draw-member/pics/flask_new_draw_result.png"/&gt;
&lt;/div&gt;

&lt;h3 id="_5"&gt;æ­·å²è¨é&lt;/h3&gt;
&lt;p&gt;è¨å¾è¦å¨æ½ç±¤çæåæè¨éå å° database è£¡ãå çºä¹åæè¨­å¥½ schema é è¨­ç¨ç¾å¨æéç¶æ½ç±¤æéï¼æä»¥æéçèçå®å¨äº¤çµ¦ SQLiteãç¨ &lt;span class="caps"&gt;SQL&lt;/span&gt; èªæ³ &lt;code&gt;LIMIT 10&lt;/code&gt; ä»¥å &lt;code&gt;ORDER BY&lt;/code&gt; é¸ææè¿çåç­ï¼åæå¨æ¥çµææï¼ä¹åææ¥è©¢ &lt;strong&gt;members&lt;/strong&gt; table å°æçåå­èåé«ãéåå°æ¥­è¡èªå« &lt;a href="https://en.wikipedia.org/wiki/Join_%28SQL%29"&gt;&lt;span class="caps"&gt;JOIN&lt;/span&gt;&lt;/a&gt;ã&lt;/p&gt;
&lt;p&gt;æéå view æ¾å¨ &lt;code&gt;/history&lt;/code&gt; è·¯å¾ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/draw&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="c1"&gt;# ...&lt;/span&gt;
    &lt;span class="c1"&gt;# Update draw history&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;INSERT INTO draw_histories (memberid) VALUES (?)&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                   &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lucky_member_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="c1"&gt;# Render template&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;


&lt;span class="nd"&gt;@app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/history&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;history&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_db&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;recent_histories&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;SELECT m.name, m.group_name, d.time &amp;#39;&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;FROM draw_histories AS d, members as m &amp;#39;&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;WHERE m.id == d.memberid &amp;#39;&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;ORDER BY d.time DESC &amp;#39;&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;LIMIT 10&amp;#39;&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchall&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;render_template&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;history.html&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;recent_histories&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;recent_histories&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åçä¹è¦å»ºç«å°æç&amp;nbsp;templateã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;&amp;lt;!-- templates/history.html --&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;extends&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;base.html&amp;quot;&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;

&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;title&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;æ½ç±¤æ­·å²&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="nv"&gt;title&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;

&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;æ½ç±¤æ­·å²ï¼æè¿ 10 ç­ï¼&lt;span class="nt"&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;table&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;thead&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;tr&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;th&amp;gt;&lt;/span&gt;åå­&lt;span class="nt"&gt;&amp;lt;/th&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;th&amp;gt;&lt;/span&gt;åé«&lt;span class="nt"&gt;&amp;lt;/th&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;th&amp;gt;&lt;/span&gt;æ½ä¸­æé&lt;span class="nt"&gt;&amp;lt;/th&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/thead&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;tbody&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;history&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nv"&gt;recent_histories&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;tr&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;td&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;history.0&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;td&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;history.1&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;td&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;history.2&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endfor&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/tbody&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/table&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="nv"&gt;content&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ééç¨äºæ°ç template èªæ³ for loopï¼æ¯æ¬¡ loop &lt;code&gt;history&lt;/code&gt; çå¼é½æè®ï¼èä¸éå¯ä»¥åå­åå®åºä¸çå±¬æ§ï¼å¯«æ Python&amp;nbsp;å°±åï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;history&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;recent_histories&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;history&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Flask ç¨ç Jinja2 template åè½å¾å¤ï¼ç¾å¨åä½å·²ç¶æ¯è¼çè§£ server çéä½äºï¼å¯ä»¥å»é±è®ä¸ä¸ &lt;a href="http://jinja.pocoo.org/docs/dev/templates/"&gt;Jinja2 å®ç¶²æä»¶&lt;/a&gt;çå®æ´çä½¿ç¨æ¹å¼ã&lt;/p&gt;
&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/flask-draw-member/pics/flask_history.png"/&gt;
&lt;/div&gt;

&lt;h4 id="datetime"&gt;æéèçç¨&amp;nbsp;datetime&lt;/h4&gt;
&lt;p&gt;å¦æææ³¨æå°çè©±ï¼æåç¨çæéå¾ SQLite åå³åä¾å¶å¯¦æ¯å­ä¸²ãæ³è¦æ¹å¯«æéæ ¼å¼æéº¼è¾¦ï¼éæåå°±è¦ç¨ä¸å§å»º module &lt;a href="https://docs.python.org/3.5/library/datetime.html#datetime-objects"&gt;datetime&lt;/a&gt;ãåææåä¹é ä¾¿ææ¬ä¾ç¨ &lt;code&gt;fetchall()&lt;/code&gt; ççµæï¼æ¹æç¨ dict&amp;nbsp;è¡¨ç¤ºæ¯ä¸ç­æ­·å²ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/history&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;history&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_db&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;SELECT m.name, m.group_name, d.time AS &amp;quot;draw_time [timestamp]&amp;quot; &amp;#39;&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;FROM draw_histories AS d, members as m &amp;#39;&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;WHERE m.id == d.memberid &amp;#39;&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;ORDER BY d.time DESC &amp;#39;&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;LIMIT 10&amp;#39;&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchall&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;recent_histories&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;recent_histories&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
            &lt;span class="s1"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="s1"&gt;&amp;#39;group&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="s1"&gt;&amp;#39;draw_time&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strptime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;%Y-%m-&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s1"&gt; %H:%M:%S&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="p"&gt;})&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;render_template&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;history&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nv"&gt;recent_histories&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;tr&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;td&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;history.name&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;td&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;history.group&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;td&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;history.draw_time.strftime&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;%Y å¹´ %m æ %d æ¥ %H æ %M å&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endfor&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯ä»¥çå° for loop ä¸åä½¿ç¨ 0, 1, 2 å»æ¿æ¯ç­æ­·å²åæ¬ä½çå¼ï¼èæ¯ç¨æ¬ä½åç¨±ï¼ç¸ç¶æ¼ &lt;code&gt;history['name']&lt;/code&gt;ãéæ¨£çåæ³æ¯è¼å¥½ï¼å çºç¨æ¸å­ä¸ä¸å°±å¿äºï¼é¨ä¾¿èª¿æ´ä¸ä¸ view çå§å®¹é åºå°±ä¸ä¸å®æ¯éæ¨£äºï¼å®ç¨è® template&amp;nbsp;ä¹è½ææ¯åæ¬ä½çææã&lt;/p&gt;
&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/flask-draw-member/pics/flask_history_zh.png"/&gt;
&lt;/div&gt;

&lt;h3 id="whats-next"&gt;What&amp;rsquo;s&amp;nbsp;Next&lt;/h3&gt;
&lt;h3 id="static-files-and-better-theme"&gt;Static files and better&amp;nbsp;theme&lt;/h3&gt;
&lt;p&gt;æååªç¨äº &lt;span class="caps"&gt;HTML&lt;/span&gt; templateãæ³è¦è®ç¶²ç«çèµ·ä¾æ´æ¼äº®ï¼å°±è¦å¯« &lt;span class="caps"&gt;CSS&lt;/span&gt; è Javascript (&lt;span class="caps"&gt;JS&lt;/span&gt;)ãæå BootstrapãPureCSSãSemantic &lt;span class="caps"&gt;UI&lt;/span&gt;&amp;nbsp;éé¡çãframeworkãï¼å¥ç¨ä¹å¾è½å¨ç­æéç«åºç¾è§å¯¦ç¨ççé¢ã&lt;/p&gt;
&lt;p&gt;è &lt;span class="caps"&gt;CSS&lt;/span&gt;ã&lt;span class="caps"&gt;JS&lt;/span&gt;ï¼ä»¥åç«ä¸å¤§å¤§å°çå¶ä»æªæ¡é½å¿éè¦å¾ server å³éå°ç¨æ¶ç«¯ä¸ï¼ééå°±æ¯ static files&amp;nbsp;çèçã&lt;/p&gt;
&lt;h3 id="more-how-web-works"&gt;More how web&amp;nbsp;works&lt;/h3&gt;
&lt;p&gt;é¤äº &lt;span class="caps"&gt;HTTP&lt;/span&gt; &lt;span class="caps"&gt;GET&lt;/span&gt;ã&lt;span class="caps"&gt;POST&lt;/span&gt; ä¹å¤ï¼éæ &lt;span class="caps"&gt;HTTPS&lt;/span&gt;ãsessionãcookie&amp;nbsp;ç­å¾å¸¸è¦çæè¡ã&lt;/p&gt;
&lt;h3 id="object-relational-model-orm"&gt;Object Relational Model (&lt;span class="caps"&gt;ORM&lt;/span&gt;)&lt;/h3&gt;
&lt;p&gt;æååªèäºç´å¯« &lt;span class="caps"&gt;SQL&lt;/span&gt; çä¾å­ï¼ä½ç¶å°æ¡è®è¤éçæåï¼ç´ &lt;span class="caps"&gt;SQL&lt;/span&gt; ç®¡çä¸è¶ä¾è¶è¤éã&lt;span class="caps"&gt;ORM&lt;/span&gt;&amp;nbsp;æ¯ä¸ç¨®è§£æ±ºçæ¹æ¡ã&lt;/p&gt;
&lt;h3 id="django"&gt;Django&lt;/h3&gt;
&lt;p&gt;ç¶ç¶å¯ä»¥ç¹¼çºæ Flask ç ç©¶ä¸å»ï¼å®ä¹æ¯åå¾å¥½ç web frameworkãä¸éæåä¸»è¦ç code base æ¯ Djangoãæä»¥å¸æå¤§å®¶å¨äºè§£ä¸å web server (app) é·å¾åææ¨£ä¹å¾ï¼å°±å¯ä»¥éå§å­¸ç¿ DjangoãDjango è Flask æå¤§çè¨­è¨ä¸åå°±æ¯ Django ä¸éå§å°±æä¾äºå¾å¤æ¨¡çµèåè½ï¼æè¦ºå¾ãè¥ãï¼è Flask&amp;nbsp;åªæä¾äºå¿è¦çåè½&lt;/p&gt;
&lt;h3 id="_6"&gt;ç¸½çµ&lt;/h3&gt;
&lt;p&gt;éæ¨£å°±æ¯ä¸åå®æ´çæ½ç±¤çç¶²ç«äºãå¶å¯¦æ¶ç¶²ç«çä¸»è¦ç¥è­ä¹å·®ä¸å¤æ¯éäºï¼åä¾å°±æ¯ç´°ç¯ä»¥åç¥è­çå å¼·ã&lt;/p&gt;
&lt;p&gt;åå¥½çæåæä¹æ¾å¨ &lt;a href="https://github.com/ccwang002/draw_member"&gt;Github&lt;/a&gt; ä¸äºï¼è£¡é¢ç commit log è¨éäºå¹¾åéè¦çæ­¥é©ï¼æä»¥æ³è¦ççæ¯ä¸æ­¥ççµæå¯ä»¥ç¨ &lt;code&gt;git checkout&lt;/code&gt; åå°æ¯åè¨éé»ï¼ä¾å¦æ³è¦çæ½ç±¤åè½å¯«å®ï¼ç¨ä¸ template ççæ¬å°±å¯ä»¥å° &lt;code&gt;git checkout f39fc1&lt;/code&gt;ã&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;PS&lt;/span&gt;:&amp;nbsp;æ²æ³å°æå¯«ééº¼é·åâ¦â¦&lt;/p&gt;
&lt;h3 id="details"&gt;Details&lt;/h3&gt;
&lt;p&gt;åºä¸è¨äºå¾å¤æè¡ç´°ç¯ï¼æèè¶£åçå§ã&lt;/p&gt;
&lt;h4 id="sqlite-table-info"&gt;SQLite table&amp;nbsp;info&lt;/h4&gt;
&lt;p&gt;é¤äºç¨ &lt;code&gt;.schema&lt;/code&gt; å»çæ¯å &lt;span class="caps"&gt;TABLE&lt;/span&gt; å»ºç«æçæä»¤ä¹å¤ï¼ä¹å¯ä»¥ç¨ &lt;code&gt;PRAGMA table_info&lt;/code&gt; å»çæå table&amp;nbsp;æ¯åæ¬ä½çè¨­å®ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="go"&gt;-- Run `sqlite -init create_db.sql`&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;header&lt;/span&gt; &lt;span class="k"&gt;on&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;mode&lt;/span&gt; &lt;span class="k"&gt;column&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;PRAGMA&lt;/span&gt; &lt;span class="n"&gt;table_info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;members&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="go"&gt;cid  name         type       notnul  dflt_value                    pk&lt;/span&gt;
&lt;span class="go"&gt;---  -----------  ---------  ------  ----------------------------  --&lt;/span&gt;
&lt;span class="go"&gt;0    id           INTEGER    0                                     1&lt;/span&gt;
&lt;span class="go"&gt;1    name         TEXT       1                                     0&lt;/span&gt;
&lt;span class="go"&gt;2    group_name   TEXT       0                                     0&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;PRAGMA&lt;/span&gt; &lt;span class="n"&gt;table_info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;draw_histories&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="go"&gt;cid  name         type       notnul  dflt_value                    pk&lt;/span&gt;
&lt;span class="go"&gt;---  -----------  ---------  ------  ----------------------------  --&lt;/span&gt;
&lt;span class="go"&gt;0    memberid     INTEGER    0                                     0&lt;/span&gt;
&lt;span class="go"&gt;1    draw_time    DATETIME   0       datetime(&amp;#39;now&amp;#39;, &amp;#39;localtime&amp;#39;)  0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="sqlite-foreign-key-check"&gt;SQLite foreign key&amp;nbsp;check&lt;/h4&gt;
&lt;p&gt;SQLite3 å¨æ¯è¼æ°çææå»èç foreign key éå¶çåè½ï¼åè&lt;a href="https://www.sqlite.org/foreignkeys.html#fk_enable"&gt;å®ç¶²çèªªæ&lt;/a&gt;ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;PRAGMA&lt;/span&gt; &lt;span class="n"&gt;foreign_keys&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="go"&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦ææ¯ 0 çè©±è¡¨ç¤º SQLite ä¸¦ä¸æå»æª¢æ¥ foreign&amp;nbsp;keyãéå¯ä»¥æåæéæª¢æ¥ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;PRAGMA&lt;/span&gt; &lt;span class="n"&gt;foreign_keys&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;ON&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="n"&gt;PRAGMA&lt;/span&gt; &lt;span class="n"&gt;foreign_keys&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="go"&gt;1&lt;/span&gt;
&lt;span class="gp"&gt;sqlite&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;draw_histories&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;memberid&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="go"&gt;Error: FOREIGN KEY constraint failed&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="_7"&gt;éæ°è®å¥è³æ&lt;/h4&gt;
&lt;p&gt;æåååå¥½ä¸å function &lt;code&gt;reset_db&lt;/code&gt;ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# draw_members.py&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;reset_db&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SQLITE_DB_SCHEMA&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;create_db_sql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_db&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="c1"&gt;# Reset database&lt;/span&gt;
    &lt;span class="c1"&gt;# Note that CREATE/DROP table are *immediately* committed&lt;/span&gt;
    &lt;span class="c1"&gt;# even inside a transaction&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;DROP TABLE IF EXISTS draw_histories&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;DROP TABLE IF EXISTS members&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;executescript&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;create_db_sql&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# Read members CSV data&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MEMBER_CSV_PATH&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;newline&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;csv_reader&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;csv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DictReader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;members&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
            &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åå­&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;åé«&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;csv_reader&lt;/span&gt;
        &lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="c1"&gt;# Write members into databse&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;executemany&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="s1"&gt;&amp;#39;INSERT INTO members (name, group_name) VALUES (?, ?)&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;members&lt;/span&gt;
        &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;reset_db()&lt;/code&gt; æ &lt;span class="caps"&gt;DROP&lt;/span&gt; æèç database ï¼ç¶å¾åç¨ååä»ç´¹çæ¹æ³åæè³æå¾ &lt;span class="caps"&gt;CSV&lt;/span&gt;&amp;nbsp;è®é²ä¾ã&lt;/p&gt;
&lt;p&gt;æä»¥éå function&amp;nbsp;è¦æéº¼ä½¿ç¨ï¼&lt;/p&gt;
&lt;p&gt;ä¸åæ¯åä¹åä¸æ¨£ç¶å®ä¸åè·¯å¾ &lt;code&gt;@app.route('/reset')&lt;/code&gt;ï¼å¦ä¸åæ¹å¼æåå¯ä»¥éé python shell&amp;nbsp;éå°ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;draw_member&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reset_db&lt;/span&gt;
&lt;span class="gp"&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;app_context&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;span class="gp"&gt;... &lt;/span&gt;    &lt;span class="n"&gt;reset_db&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4 id="datetime-in-sqlite-and-python"&gt;Datetime in SQLite and&amp;nbsp;Python&lt;/h4&gt;
&lt;p&gt;éç¯æç« å¤ªé·äºï¼å¯«å°&lt;a href="../datetime-sqlite/#datetime-sqlite"&gt;ä¸ä¸ç¯å»&lt;/a&gt;ã&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;å¨è³æèçä¸å¶å¯¦ææå &lt;span class="caps"&gt;NA&lt;/span&gt; çå¼ä¾ååãç©ºãä»¥åãç©ºå¼ãçæ¦å¿µãä¸ééç¨ Python å§å»ºç &lt;code&gt;csv.reader&lt;/code&gt; èçæå¤ªè¤éå°±åç®äºã&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:sqlite3 auto commit"&gt;
&lt;p&gt;åè&lt;a href="https://docs.python.org/3.5/library/sqlite3.html#using-the-connection-as-a-context-manager"&gt;å®æ¹èªªææä»¶&lt;/a&gt;ï¼å®æ¯å¨é²å¥ &lt;code&gt;with db: ...&lt;/code&gt; code block æéåä¸å transactionï¼ä¸¦å¨æ­£å¸¸é¢éçæåèªå commitãå¦æä¸­ééå°æ²æèçç Exception æï¼å°±æèªå roll backã&amp;#160;&lt;a class="footnote-backref" href="#fnref:sqlite3 auto commit" rev="footnote" title="Jump back to footnote 2 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:flask-config"&gt;
&lt;p&gt;å¶å¯¦ Flask ç¸éçè¨­å®éå¸¸æ¾å¨ &lt;code&gt;app.config&lt;/code&gt; è£¡é¢ï¼ä¸éæåçä¾å­æ²å·®ã&amp;#160;&lt;a class="footnote-backref" href="#fnref:flask-config" rev="footnote" title="Jump back to footnote 3 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</summary><category term="zh"></category><category term="flask"></category><category term="sqlite"></category><category term="jinja2"></category><category term="python"></category></entry><entry><title>FASTA/Q sequence processing toolkit âÂ seqtk</title><link href="//blog.liang2.tw/posts/2015/09/seqtk/" rel="alternate"></link><updated>2015-09-27T14:11:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2015-09-27:posts/2015/09/seqtk/</id><summary type="html">&lt;p&gt;This is the first post of the series of my common &lt;span class="caps"&gt;NGS&lt;/span&gt; processing workflows and&amp;nbsp;notes.&lt;/p&gt;
&lt;p&gt;Some of the most common operation in sequence processing is &lt;span class="caps"&gt;FASTQ&lt;/span&gt; â &lt;span class="caps"&gt;FASTA&lt;/span&gt; conversion. Tons of conversion scripts using either sed or awk can be found by search. For&amp;nbsp;example,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# FASTQ to FASTA&lt;/span&gt;
&lt;span class="c1"&gt;# Assume every read record takes exactly 4 line&lt;/span&gt;
&lt;span class="c1"&gt;# Ref: http://stackoverflow.com/a/10359425&lt;/span&gt;
$ sed -n &lt;span class="s1"&gt;&amp;#39;1~4s/^@/&amp;gt;/p;2~4p&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The assumption of 4 lines per read usually holds for recent &lt;span class="caps"&gt;NGS&lt;/span&gt; sequencing data, so not a big&amp;nbsp;deal.&lt;/p&gt;
&lt;p&gt;In many case the sequence is gzip&amp;rsquo;d. It is still a piece of cake when combining with pipe&amp;nbsp;editing,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gzcat myseq.fq.gz &lt;span class="p"&gt;|&lt;/span&gt; sed -n &lt;span class="s1"&gt;&amp;#39;1~4s/^@/&amp;gt;/p;2~4p&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; gzip &amp;gt; myseq.fa.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;However, things can get complex really fast when one wants to additionally do reverse complement, randomly sample a subset of reads, and many other types of sequence manipulation. Efficiency matters if those tasks are applied to tens of millions of reads. Even a few nanoseconds longer of computing time difference per read can make a difference at this scale of&amp;nbsp;reads.&lt;/p&gt;
&lt;h3 id="seqtk"&gt;Seqtk&lt;/h3&gt;
&lt;p&gt;So &lt;a href="https://github.com/lh3/seqtk"&gt;seqtk&lt;/a&gt; comes into rescue. It is written in C and &lt;span class="caps"&gt;MIT&lt;/span&gt; licensed. &lt;a href="https://www.biostars.org/p/85929/#86082"&gt;A quick comparison&lt;/a&gt; shows it is generally faster than other &lt;span class="caps"&gt;UNIX&lt;/span&gt;-based solutions, let alone implementations based on scripting&amp;nbsp;languages.&lt;/p&gt;
&lt;p&gt;Seqtk bundles many other operations, but I&amp;rsquo;ll just mention those I frequently&amp;nbsp;use.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$seqtk

Usage:   seqtk &amp;lt;command&amp;gt; &amp;lt;arguments&amp;gt;
Version: 1.0-r77-dirty

Command: seq       common transformation of FASTA/Q
         comp      get the nucleotide composition of FASTA/Q
         sample    subsample sequences
         subseq    extract subsequences from FASTA/Q
         fqchk     fastq QC &lt;span class="o"&gt;(&lt;/span&gt;base/quality summary&lt;span class="o"&gt;)&lt;/span&gt;
         mergepe   interleave two PE FASTA/Q files
         trimfq    trim FASTQ using the Phred algorithm

         hety      regional heterozygosity
         mutfa     point mutate FASTA at specified positions
         mergefa   merge two FASTA/Q files
         dropse    drop unpaired from interleaved PE FASTA/Q
         rename    rename sequence names
         randbase  choose a random base from hets
         cutN      cut sequence at long N
         listhet   extract the position of each het
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="fastq-fasta"&gt;&lt;span class="caps"&gt;FASTQ&lt;/span&gt; â &lt;span class="caps"&gt;FASTA&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;Read (gzip&amp;rsquo;d) &lt;span class="caps"&gt;FASTQ&lt;/span&gt; and write out as &lt;span class="caps"&gt;FASTA&lt;/span&gt;,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ seqtk seq -A in.fq&lt;span class="o"&gt;[&lt;/span&gt;.gz&lt;span class="o"&gt;]&lt;/span&gt; &amp;gt; out.fa
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To make the output gzip&amp;rsquo;d again, piped with&amp;nbsp;gzip,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ seqtk seq -A in.fq&lt;span class="o"&gt;[&lt;/span&gt;.gz&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; gzip &amp;gt; out.fa.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="reverse-complement"&gt;Reverse&amp;nbsp;complement&lt;/h3&gt;
&lt;p&gt;If one wants to debug the R2 reads of pair-end sequencing (second read on forward strand), since they contain reverse complement sequence of the insert &lt;span class="caps"&gt;DNA&lt;/span&gt;, one needs to reverse complement R2 reads again to debug directly by bare human&amp;nbsp;eyes.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ seqtk seq -r R2.fq &amp;gt; R2_rc.fq

$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;gt; Example R2 seq&lt;/span&gt;
&lt;span class="s1"&gt;  GCATTGGTGGTTCAGTGGTAGAATTCT&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; seqtk seq -r
&lt;span class="c1"&gt;# &amp;gt; Example R2 seq&lt;/span&gt;
&lt;span class="c1"&gt;# AGAATTCTACCACTGAACCACCAATGC&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3 id="quality-check"&gt;Quality&amp;nbsp;check&lt;/h3&gt;
&lt;p&gt;To be honest, &lt;a href="http://www.bioinformatics.babraham.ac.uk/projects/fastqc/"&gt;FastQC&lt;/a&gt; is more frequently used for quality check because it generates &lt;a href="http://www.bioinformatics.babraham.ac.uk/projects/fastqc/good_sequence_short_fastqc.html"&gt;reports with beautiful figures&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;But for a detail report on each read position, one should consider &lt;code&gt;seqtk fqchk&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ seqtk fqchk myseq.fq&lt;span class="o"&gt;[&lt;/span&gt;.gz&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;By default it sets &lt;code&gt;-q 20&lt;/code&gt;. This quality threshold determines the threshold of counting a base as low or high quality, shown as &lt;code&gt;%low&lt;/code&gt; and &lt;code&gt;%high&lt;/code&gt; per read position. In the default case, quality score higher than 20 will be treated as high quality&amp;nbsp;bases.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;min_len: 10; max_len: 174; avg_len: 28.92; 37 distinct quality values
POS #bases    %A   %C   %G   %T   %N  avgQ errQ %low %high
ALL 236344886 17.0 22.5 31.3 29.2 0.0 39.9 37.6 0.1  99.9
1   8172342   8.9  12.4 57.0 21.7 0.0 39.6 29.0 0.5  99.5
2   8172342   7.7  62.5 16.2 13.7 0.0 39.8 37.8 0.2  99.8
3   8172342   50.3 24.1 11.9 13.6 0.0 39.8 38.2 0.1  99.9
4   8172342   10.4 22.9 15.3 51.3 0.0 39.9 38.7 0.1  99.9
5   8172342   14.3 12.9 22.3 50.5 0.0 39.8 37.0 0.2  99.8
# ... (trimmed)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The following columns, &lt;code&gt;avgQ&lt;/code&gt; and &lt;code&gt;errQ&lt;/code&gt;, need more explanation. Average quality (&lt;code&gt;avgQ&lt;/code&gt;) is computed by weighted mean of each base&amp;rsquo;s&amp;nbsp;quality,&lt;/p&gt;
&lt;div class="math"&gt;$$
    \text{avgQ} = \dfrac{\sum_{q=0}^{93} q \cdot n_q}{\sum_{q = 0}^{93} n_q},
$$&lt;/div&gt;
&lt;p&gt;where &lt;span class="math"&gt;\(n_q\)&lt;/span&gt; is the number of bases with quality score being &lt;span class="math"&gt;\(q\)&lt;/span&gt;. The magic number 93 comes from the quality score of Sanger sequencing&lt;sup id="fnref:sanger-qual-score"&gt;&lt;a class="footnote-ref" href="#fn:sanger-qual-score" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt;, whose score ranges from 0 to&amp;nbsp;93.&lt;/p&gt;
&lt;p&gt;For &lt;code&gt;errQ&lt;/code&gt; we need more background knowledge about how quality score is computed. A base with quality score &lt;span class="math"&gt;\(q\)&lt;/span&gt; implies the probability of being erroneously called, &lt;span class="math"&gt;\(P_q\)&lt;/span&gt;,&amp;nbsp;is &lt;/p&gt;
&lt;div class="math"&gt;$$
    P_q = 10^{\frac{-q}{10}}, \hspace{1em} q = -10\log_{10}{P_q}.
$$&lt;/div&gt;
&lt;p&gt;Therefore, given &lt;span class="math"&gt;\(q\)&lt;/span&gt; being &lt;span class="math"&gt;\(0, 1, 2, \ldots\)&lt;/span&gt;, seqtk has a conversion table &lt;code&gt;perr&lt;/code&gt; from quality score to&amp;nbsp;probability,&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="left"&gt;Q&lt;/th&gt;
&lt;th align="right"&gt;0&lt;/th&gt;
&lt;th align="right"&gt;1&lt;/th&gt;
&lt;th align="right"&gt;2&lt;/th&gt;
&lt;th align="right"&gt;3&lt;sup id="fnref:2"&gt;&lt;a class="footnote-ref" href="#fn:2" rel="footnote"&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;strong&gt;P&lt;/strong&gt;&lt;/td&gt;
&lt;td align="right"&gt;0.5&lt;/td&gt;
&lt;td align="right"&gt;0.5&lt;/td&gt;
&lt;td align="right"&gt;0.5&lt;/td&gt;
&lt;td align="right"&gt;0.5&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="left"&gt;Q&lt;/th&gt;
&lt;th align="right"&gt;4&lt;/th&gt;
&lt;th align="right"&gt;5&lt;/th&gt;
&lt;th align="center"&gt;&amp;hellip;&lt;/th&gt;
&lt;th align="right"&gt;38&lt;/th&gt;
&lt;th align="right"&gt;39&lt;/th&gt;
&lt;th align="right"&gt;40&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;strong&gt;P&lt;/strong&gt;&lt;/td&gt;
&lt;td align="right"&gt;0.398107&lt;/td&gt;
&lt;td align="right"&gt;0.316228&lt;/td&gt;
&lt;td align="center"&gt;&amp;hellip;&lt;/td&gt;
&lt;td align="right"&gt;0.000158&lt;/td&gt;
&lt;td align="right"&gt;0.000126&lt;/td&gt;
&lt;td align="right"&gt;0.000100&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Based on the probability, it computes the expected number of base call errors, num_err, and the empirical probability of having a base call error at this position,&amp;nbsp;errP, &lt;/p&gt;
&lt;div class="math"&gt;$$
    \text{num_err} = \sum_q P_q \cdot n_q, \hspace{1em} \text{errP} = \frac{\text{num_err}}{\sum_q n_q}.
$$&lt;/div&gt;
&lt;p&gt;Thus the &lt;code&gt;errQ&lt;/code&gt; is the equivalent quality score of errP, which better interprets the probability of base call error than &lt;code&gt;avgQ&lt;/code&gt;, &lt;/p&gt;
&lt;div class="math"&gt;$$
    \text{errQ} = -10\log_{10}{\text{errP}}.
$$&lt;/div&gt;
&lt;p&gt;By passing &lt;code&gt;-q 0&lt;/code&gt; to &lt;code&gt;seqtk fqchk&lt;/code&gt;, one can get the proportion of all distinct quality scores at each position. This information is pretty useful if the sequencing data is all a mess and one needs to figure out the&amp;nbsp;cause.&lt;/p&gt;
&lt;p&gt;Though some of the &lt;code&gt;seqtk fqchk&lt;/code&gt;&lt;span class="quo"&gt;&amp;lsquo;&lt;/span&gt;s behavior is not documented, it should be straight forward enough to understand. All in all, the details can always be found in the &lt;a href="https://github.com/lh3/seqtk/blob/4feb6e81444ab6bc44139dd3a125068f81ae4ad8/seqtk.c#L1483"&gt;source code&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id="summary"&gt;Summary&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/lh3/seqtk"&gt;Seqtk&lt;/a&gt; is fast to use for daily routines of &lt;span class="caps"&gt;FASTA&lt;/span&gt;/Q conversion. On top of that it provide various functionalities such as read random sampling, quality check, and many I haven&amp;rsquo;t tried or&amp;nbsp;mentioned.&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn:sanger-qual-score"&gt;
&lt;p&gt;See multiple specifications of quality score at &lt;a href="http://scikit-bio.org/docs/latest/generated/skbio.io.format.fastq.html#quality-score-variants"&gt;sckit-bio doc&lt;/a&gt;. The score is &lt;a href="https://en.wikipedia.org/wiki/Phred_quality_score"&gt;Phred quality score&lt;/a&gt;. More other score representations can be found at &lt;a href="https://en.wikipedia.org/wiki/FASTQ_format"&gt;&lt;span class="caps"&gt;FASTQ&lt;/span&gt; wiki&lt;/a&gt;.&amp;#160;&lt;a class="footnote-backref" href="#fnref:sanger-qual-score" rev="footnote" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;Note that the probability of q less than 4 is fixed with 0.5. A quick computation can see when &lt;span class="math"&gt;\(q = 3\)&lt;/span&gt;, its actual Phred probability is &lt;span class="math"&gt;\(10 ^ {-0.3} = 0.501\)&lt;/span&gt;.&amp;#160;&lt;a class="footnote-backref" href="#fnref:2" rev="footnote" title="Jump back to footnote 2 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' &amp;&amp; location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</summary><category term="en"></category><category term="seqtk"></category><category term="NGS"></category></entry><entry><title>æ¸é¤Â ^H</title><link href="//blog.liang2.tw/posts/2015/09/remove-%5EH/" rel="alternate"></link><updated>2015-09-27T02:28:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2015-09-27:posts/2015/09/remove-^H/</id><summary type="html">&lt;p&gt;ä¸­æè¼¸å¥æç¨å¸è¦ç±³ï¼å¨æä¸­è±æåææåï¼å¾å®¹ææåº &lt;code&gt;\x08&lt;/code&gt; éæ±è¥¿ï¼å¨ vim å°±æé¡¯ç¤ºæ &lt;code&gt;^H&lt;/code&gt;ï¼åè½æ¯ &lt;kbd&gt;Backspace&lt;/kbd&gt;ï¼ä½å¨ä¸è¬ &lt;span class="caps"&gt;GUI&lt;/span&gt;&amp;nbsp;ç°å¢è£¡ï¼å¯è½å°±æå çºå®èæåé¢çå­åæã&lt;/p&gt;
&lt;p&gt;å æ­¤ä»å¤©å¯«äºåå°è³æ¬å¯ä»¥ææ¸æç¶ç®éåºä¸çæå­æªç &lt;code&gt;^H&lt;/code&gt;ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ag -l &lt;span class="s1"&gt;&amp;#39;\x08&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; xargs sed -i &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;s/\x08//&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="https://github.com/ggreer/the_silver_searcher"&gt;ag&lt;/a&gt; è½å¤ æææ¯è¼æ¢ä½å§å»ºå°±æç&amp;nbsp;grepï¼åæ¸å©èæ¯ç¸å®¹çã&lt;/p&gt;
&lt;p&gt;å¦æè¦é ä¾¿å°åºæ¹äºåªäºæªæ¡çè©±ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Found ^H in the following files:&amp;#39;&lt;/span&gt;
ag -l &lt;span class="s1"&gt;&amp;#39;\x08&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; tee /dev/fd/2 &lt;span class="p"&gt;|&lt;/span&gt; xargs sed -i &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;s/\x08//&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¨ tee æ stdout å°åå° stderr&amp;nbsp;éè »æè¶£çï¼ä»¥åé½ä¸ç¥ééæ¨£ç¨ã&lt;/p&gt;</summary><category term="zh"></category></entry><entry><title>ä½¿ç¨ ZoteroÂ ç®¡çæç»æ¸ç®</title><link href="//blog.liang2.tw/posts/2015/09/ref-management-zotero/" rel="alternate"></link><updated>2015-09-26T00:00:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2015-09-26:posts/2015/09/ref-management-zotero/</id><summary type="html">&lt;p&gt;&lt;strong&gt;&lt;span class="caps"&gt;TL&lt;/span&gt;;&lt;span class="caps"&gt;DR&lt;/span&gt;&lt;/strong&gt; Use Zotero to sync references, webpages, and&amp;nbsp;everything.&lt;/p&gt;
&lt;p&gt;ä¸éå§ææ³è¦æ¶é reference ç¡éæ¯åç ç©¶ãå¯«è«æãå¹³å¸¸å ±åé²åº¦éè¦æ¾ä¸ citationï¼èå¨å­¸è¡çæå¸¸å°±æ¯ cite å¥äººçæåãæå citation&amp;nbsp;æå®ä¸å®çæ ¼å¼ï¼èä¸æ¯åæåç¨çæ ¼å¼ä¸åï¼ææå®¹æé¯ï¼ä¹å¾é£ç¶­è­·ãæä»¥æå¥½çæ¹å¼å°±æ¯ææåå®æ´çè³è¨å­å¨è³æåº«ï¼ç¶å¾å¼ç¨çæååæå°æä»¶è£¡é¢ã&lt;/p&gt;
&lt;p&gt;æ´ååé¡å°±è®ææéº¼ç®¡çéäºæåè³è¨ã&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#bibtex-is-for-latex"&gt;BibTex is for LaTeX&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#bibdesk"&gt;BibDesk&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#endnote-is-for-word"&gt;EndNote is for&amp;nbsp;Word&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#zotero-bridges-the-both-world"&gt;Zotero bridges the both world&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#zotfile"&gt;Zotfile&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#how-to-sync-data-storage"&gt;How to sync data&amp;nbsp;storage&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_1"&gt;ç¸½çµ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h3 id="bibtex-is-for-latex"&gt;BibTex is for&amp;nbsp;LaTeX&lt;/h3&gt;
&lt;p&gt;å¨ &lt;a href="https://www.latex-project.org/"&gt;LaTeX&lt;/a&gt; ç¶ä¸­å¯ä»¥å©ç¨ &lt;a href="http://www.bibtex.org/"&gt;BibTeX&lt;/a&gt;ï¼ææ´æ°ç &lt;a href="https://www.ctan.org/pkg/biblatex"&gt;BibLaTeX&lt;/a&gt;ï¼æä¾çæµç¨èç citation èç®¡ç referenceï¼å³ &lt;a href="https://en.wikibooks.org/wiki/LaTeX/Bibliography_Management"&gt;Bibliography ç®¡ç&lt;/a&gt;ï¼ãä»æææ reference&amp;nbsp;éä¸­å¨ä¸åç´æå­çæªæ¡ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;@article&lt;span class="nb"&gt;{&lt;/span&gt;Calin:2006aa,
    Author = &lt;span class="nb"&gt;{&lt;/span&gt;Calin, George A. and Croce, Carlo M.&lt;span class="nb"&gt;}&lt;/span&gt;,
    Journal = &lt;span class="nb"&gt;{&lt;/span&gt;Nat Rev Cancer&lt;span class="nb"&gt;}&lt;/span&gt;,
    Month = &lt;span class="nb"&gt;{&lt;/span&gt;11&lt;span class="nb"&gt;}&lt;/span&gt;,
    Number = &lt;span class="nb"&gt;{&lt;/span&gt;11&lt;span class="nb"&gt;}&lt;/span&gt;,
    Pages = &lt;span class="nb"&gt;{&lt;/span&gt;857--866&lt;span class="nb"&gt;}&lt;/span&gt;,
    Title = &lt;span class="nb"&gt;{&lt;/span&gt;MicroRNA signatures in human cancers&lt;span class="nb"&gt;}&lt;/span&gt;,
    Volume = &lt;span class="nb"&gt;{&lt;/span&gt;6&lt;span class="nb"&gt;}&lt;/span&gt;,
    Year = &lt;span class="nb"&gt;{&lt;/span&gt;2006&lt;span class="nb"&gt;}}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ¯ç¯æç« ææä¸å cite keyï¼å¨å§æç¨å°çæåå°±å¯ä»¥å¼ç¨ï¼è BibTeX å°±ææ ¹æç¾å¨å®ç¾©ç style å»æ¾ citation ä»¥åå¨ææ«å ä¸å°æç&amp;nbsp;referenceã&lt;/p&gt;
&lt;h4 id="bibdesk"&gt;BibDesk&lt;/h4&gt;
&lt;p&gt;çæ­£è® BibTeX è½å¨æ¥å¸¸çæ´»ä¸­å¾å¥½ä½¿ç¨ï¼æä¸é¨ä»½è¦æ­¸åæ¼å &lt;a href="http://bibdesk.sourceforge.net/"&gt;BibDesk&lt;/a&gt;&amp;nbsp;éæ¨£çåå½¢å·¥å·ã&lt;/p&gt;
&lt;p&gt;&lt;a href="http://bibdesk.sourceforge.net/"&gt;BibDesk&lt;/a&gt; æ¯å &lt;span class="caps"&gt;OSX&lt;/span&gt; çæç¨ç¨å¼ï¼åå«å¨ &lt;a href="https://tug.org/mactex/"&gt;MacTex&lt;/a&gt; distribution è£¡é¢ãé¤äºè½èªåå¾å¯å¥ä¾èªç¶²ç«æä¸åæ ¼å¼ç citation ä¹å¤ï¼éææªæ¡éä»¶çåè½ï¼è½æä¾å¦è«æç &lt;span class="caps"&gt;PDF&lt;/span&gt;ãSupplementary files èªåè·å°æçæ¢ç®åé£æ¥ï¼éæ°å½åä¸¦æ¾å¨ä¸åæ¶æ§åçè³æå¤¾ãéæ°å½åè·æ­¸æªçæ¹å¼é½è½èªè¨ï¼ä¾å¦å¯ä»¥ç§ æååç¨±/å¹´ä»½ å»åé¡ï¼ç¶å¾æéåè³æå¤¾æ¾å¨ Dropbox&amp;nbsp;ä¸å°±å®æäºèªååæ­¥ã&lt;/p&gt;
&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/ref-management-zotero/pics/bibdesk_usage.png"/&gt;
  &lt;p class="caption center"&gt;&lt;span class="fig"&gt;BibDesk&amp;nbsp;ä½¿ç¨ç«é¢&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;éæ¨£è§£æ±ºäºå¹¾ä¹ææå¯« paper&amp;nbsp;æç¢°å°çåé¡ã&lt;/p&gt;
&lt;p&gt;å¹³å¸¸ææåè¶ç´å¤§ç BibTeX æªï¼è£¡é¢æææåå¼åæ¨£ç referenceãè¦å¯« paper çæåå°±æç¸éç paper æ¿åºä¾ export æä¸åå°çæªæ¡ï¼ç¶å¾æä¸äºæ¢ç®è£¡ä¸ç¸éçè³è¨æ¿æï¼å°±ä¸ç¨åå»æ³æç»å¼ç¨çé¨ä»½ãææå¥½å¹¾å¹´é½æ¯éæ¨£ç®¡ç reference&amp;nbsp;çã&lt;/p&gt;
&lt;h3 id="endnote-is-for-word"&gt;EndNote is for&amp;nbsp;Word&lt;/h3&gt;
&lt;p&gt;ä¸éä¸æ¯ææäººé½ç¨ LaTeX å¯« paperï¼ä¾å¦æåå¯¦é©å®¤å°±åªææä¸åäººç¨ LaTeXï¼å¶ä»äººé½ç¨ WordãWord ä¸é¢å°±æ²ééº¼ç°¡å®åå¥½ç¨çç®¡çå·¥å·äºãæå¤äººç¨çæ¯&amp;nbsp;EndNoteãå®æ¯ä»è²»çï¼ä½å çºææ¯å¬ç«å¤§å­¸çå­¸çï¼æä»¥è¬è¬åä½ç´ç¨äººï¼è®æè½åè²»ä½¿ç¨å®ï¼é èº¬ï¼ã&lt;/p&gt;
&lt;p&gt;EndNote åå°çåè½è· BibTeX ä¸æ¨£ï¼ç¨äºå®ä¹å¾å¨ word è£¡é¢å°±ä¸ç¨åç®¡çæ¸ç®çæ ¼å¼ãä¸éæå¹³å¸¸é½æ¯å¾å¥çå°æ¹æ reference export åä¸é² EndNote&amp;nbsp;è£¡ï¼æä»¥ä¹ä¸æ¸æ¥å®æä»éº¼å¥çåè½ã&lt;/p&gt;
&lt;p&gt;å¢ï¼ä»æåå¥½èå°±æ¯å¨ &lt;span class="caps"&gt;OSX&lt;/span&gt; åå¨ Windows&amp;nbsp;ä¸é½ä¸æ¨£å¥½ç¨ã&lt;/p&gt;
&lt;h3 id="zotero-bridges-the-both-world"&gt;Zotero bridges the both&amp;nbsp;world&lt;/h3&gt;
&lt;p&gt;BibDesk (BibTeX) ççå¾æ¹ä¾¿ï¼è®æææåæ³è¦ç®¡çä¸äºå¾ç¶å¸çæè¡æç« ï¼æ³è¦å­ä¸äºæç¨çä¸è«æ¯ &lt;span class="caps"&gt;PDF&lt;/span&gt;ãå½±çãç¶²ç«ï¼é½æ³è¦æ¾å° BibDesk è£¡é¢ãä½éäºå°æ¹é½æ²ææä¾ BibTex citation format&amp;nbsp;è®äººç´æ¥è¤è£½è²¼ä¸ï¼èä¸å®çèªæ³ä¹æ²æè¨­è¨è¦è§£æ±ºééº¼å¤ä¾æºï¼æä»¥å¯«èµ·ä¾å¾å¡ãå¾è±æéã&lt;/p&gt;
&lt;p&gt;å¦ä¸æ¹é¢ï¼ç¾å¨æ¥è³æé½æ¯ç¨çè¦½å¨ï¼çå°ä¸ç¯è«æï¼å¦æè¦ Export citationãæé BibDeskãImport citationãDownload &lt;span class="caps"&gt;PDF&lt;/span&gt;(s)ãLink &lt;span class="caps"&gt;PDF&lt;/span&gt;(s)&amp;nbsp;éä¸é£ä¸²åä½ä¹å¾éº»ç©ã&lt;/p&gt;
&lt;p&gt;æä»¥å°±æäº &lt;a href="https://www.zotero.org/"&gt;Zotero&lt;/a&gt; [zoh-&lt;span class="caps"&gt;TAIR&lt;/span&gt;-oh] éæ´åå¨çè¦½å¨çå·¥å·ãç®åæ¯æ´ FirefoxãChromeãSafariï¼ä¹ææä¾ Plugin çµ¦ Word æ LibreOffice ä½¿ç¨ãæä»¥å®æè©²è¶³å¤ åä»£åé¢çå·¥å·ï¼éç¶æä¸¦æ²æçµå Word&amp;nbsp;ä½¿ç¨éã&lt;/p&gt;
&lt;p&gt;åºæ¬ç«é¢è »ç°¡å®çï¼å¤§æ¦ææçæ¸ç®ç®¡çè»é«é½å·®ä¸å¤ï¼åªæ¯å®æ¯æ´åå¨ Browser&amp;nbsp;ç¶ä¸­ï¼&lt;/p&gt;
&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/ref-management-zotero/pics/zotero.png"/&gt;
  &lt;p class="caption center"&gt;&lt;span class="fig"&gt;Zotero&amp;nbsp;ä½¿ç¨ç«é¢&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;ä½¿ç¨å¾ç°¡å®ï¼å°±å©åæé &lt;img src="//blog.liang2.tw/posts/2015/09/ref-management-zotero/pics/zotero_icon.png" style="height: 1.6em;"/&gt;ï¼å·¦éæé Zotero è¦çªï¼å³éæç¶åç¶²é å­é²èªå·±ç library è£¡ï¼å®å³ä¸è§å°±æåºç¾èççè¨æ¯ï¼å¦ææ¯æåç¶²ç«èä¸æ full text &lt;span class="caps"&gt;PDF&lt;/span&gt; çæ¬éï¼å°±æä¸èµ·æ &lt;span class="caps"&gt;PDF&lt;/span&gt;&amp;nbsp;é½å­èµ·ä¾ã&lt;/p&gt;
&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/ref-management-zotero/pics/zotero_saving.png"/&gt;
&lt;/div&gt;

&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/ref-management-zotero/pics/zotero_citation.png"/&gt;
&lt;/div&gt;

&lt;p&gt;å¹³å¸¸è¦æ¾å°è«æè£¡æï¼æéæ¯æåå¯åºå° BibTeX æ EndNoteãä¸éå®é¡å¤éæå¥½ç¨çåè½ï¼è½æ citation è¼¸åºæ &lt;span class="caps"&gt;RTF&lt;/span&gt;/&lt;span class="caps"&gt;HTML&lt;/span&gt; ç bibliographyï¼éå¯ä»¥ç´æ¥è²¼å¨ Powerpoint&amp;nbsp;åæå½±çå¾æ¹ä¾¿ã&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;Torsten Thomas, Jack Gilbert &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Folker Meyer. Metagenomics - a guide from sampling to data analysis. &lt;em&gt;Microbial Informatics and Experimentation&lt;/em&gt; &lt;strong&gt;2&lt;/strong&gt;, 3&amp;nbsp;(2012).&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;Zotero ææä¾åè²» &lt;span class="caps"&gt;300MB&lt;/span&gt; è®ä½¿ç¨èåæ­¥ libraryï¼éå°æ¼å®ç´ citation æ¬èº«å·²ç¶å¾è¶³å¤ äºï¼å®ä¹æ¯æ´åæ­¥å°èªå·±æ¶è¨­ç&amp;nbsp;WebDAVã&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;PS&lt;/span&gt;: Zotero æ¡ç¨ &lt;span class="caps"&gt;AGPL&lt;/span&gt; v3 ææ¬ï¼åå§ç¢¼å¨ &lt;a href="https://github.com/zotero/zotero"&gt;Github&lt;/a&gt;&amp;nbsp;ä¸ã&lt;/p&gt;
&lt;h4 id="zotfile"&gt;Zotfile&lt;/h4&gt;
&lt;p&gt;Zotero å§å»ºç &lt;span class="caps"&gt;PDF&lt;/span&gt; attachment åè½ä¸å¦ BibDesk ééº¼å®æ´ï¼å æ­¤æ &lt;a href="http://zotfile.com/"&gt;Zotfile&lt;/a&gt; ä¾é¡å¤ç®¡ç &lt;span class="caps"&gt;PDF&lt;/span&gt; æªæ¡çåè½ãåè Zotero çç©ºéæéï¼ææ³æ &lt;span class="caps"&gt;PDF&lt;/span&gt; ç­å¤§çæªæ¡æ¾å¨å Dropbox çå°æ¹ï¼ä¸è¦é½ç¨ Zotero&amp;nbsp;åæ­¥ã&lt;/p&gt;
&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/ref-management-zotero/pics/zotfile_file_location.png"/&gt;
  &lt;p class="caption left"&gt;èªè¨ (&lt;span class="caps"&gt;PDF&lt;/span&gt;) æªæ¡å­æ¾è·¯å¾ï¼åºä¸å¯ä»¥åè¨­å®å­ç®éãå¨ééæ¯ææç§&lt;code&gt;æåå/å¹´å&lt;/code&gt;å»åç®éã&lt;/p&gt;
&lt;/div&gt;

&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/ref-management-zotero/pics/zotfile_rename_setting.png"/&gt;
  &lt;p class="caption"&gt;èªè¨æªæ¡å½åè¦å&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;ä¸éå¦ææ¯åæ­¥å° Dropbox çè©±ï¼å¯è½æ¯å°é»è¦çè·¯å¾é½ä¸ä¸æ¨£ï¼ä¾å¦ &lt;span class="caps"&gt;OSX&lt;/span&gt; å¯è½æ¯ &lt;code&gt;/Users/me/Dropbox&lt;/code&gt;ï¼ä½ Debian å¯è½æ¯ &lt;code&gt;/home/me/Dropbox&lt;/code&gt;ï¼éæåå­æ¾çè·¯å¾å°±è¦æ¹æç¸å°è·¯å¾ã&lt;/p&gt;
&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/ref-management-zotero/pics/zotero_file_location.png"/&gt;
  &lt;p class="caption"&gt;Zotero Advanced è¨­å®è£¡ä¿®æ¹ library&amp;nbsp;ç¸éæªæ¡çè·¯å¾ã&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;ééè¦é¡å¤èªªæä¸ä¸ Linked Attachment Base Directory ä»¥å Data Directory çå·®ç°ãå &lt;span class="caps"&gt;PDF&lt;/span&gt; éé¡å¦æè¢« Zotfile æç®¡ççæªæ¡ï¼ææ¯èªå·±æåé¸ãAttach Link &amp;hellip;ãçæªæ¡ï¼ä»ä½¿ç¨çæ¯ linked attachmentï¼icon ææåé£çµçç¬¦è &lt;img src="//blog.liang2.tw/posts/2015/09/ref-management-zotero/pics/zotfile_fileicon.png" style="height: 1.6em;"/&gt;ãå¶ä»å Webpage Snapshot ææ¯é è¨­ç &lt;span class="caps"&gt;PDF&lt;/span&gt; æªé½æ¯æ¾å¨ Data&amp;nbsp;Directoryã&lt;/p&gt;
&lt;h4 id="how-to-sync-data-storage"&gt;How to sync data&amp;nbsp;storage&lt;/h4&gt;
&lt;p&gt;å¦æè¦é²ä¸æ­¥è® data storage ä¹ç¨ Dropbox åæ­¥çè©±ï¼åèå®ç¶²éæ¼ &lt;a href="https://www.zotero.org/support/sync"&gt;sync çä»ç´¹&lt;/a&gt;ï¼&lt;span class="caps"&gt;OSX&lt;/span&gt; ä¸ Zotero Firefox&amp;nbsp;çè³ææå­æ¾å¨&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~/Library/Application Support/Firefox/Profiles/xxxxxxxx.default/zotero
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¶ä¸­ data storage å°±å¨åºä¸ç &lt;code&gt;storage&lt;/code&gt; è³æå¤¾ãå®ç¶²å»ºè­°ä¸è¦æ Zotero ç SQLite database ç­é½åæ­¥å¨ Dropbox ä¸ï¼æä»¥åªè¦æéåè³æç§»å° Dropbox å soft link&amp;nbsp;åä¾å°±å¯ä»¥äºã&lt;/p&gt;
&lt;h3 id="_1"&gt;ç¸½çµ&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://www.zotero.org/"&gt;Zotero&lt;/a&gt;&amp;nbsp;æ¯åå¯¦ç¨ä¸¦ä¸è·çè¦½å¨æ´åçæç»ï¼æ¸ç®ï¼ç®¡çå·¥å·ãä½å®ä¹è½èçåç¶²é ç­å¶ä»ç¶²è·¯ä¸ä¹å¾å¸¸è¦çæ ¼å¼ï¼ä¹è½èæ¢æçå·¥å·ãæä»¶ç·¨è¼¯è»é«çµåï¼ä¸¦æåæ­¥åè½ï¼éå¸¸é©åä½çºå¤é¨è¨æ¶åº«ã&lt;/p&gt;
&lt;p&gt;ï¼æè©²è¦ç¨è±æå¯«çï¼ä»éº¼æåæææç¬¬ä¸ç¯è±æ blog post &lt;span class="caps"&gt;QAQ&lt;/span&gt;ï¼&lt;/p&gt;</summary><category term="zh"></category><category term="zotero"></category></entry><entry><title>PNGÂ Optimizer</title><link href="//blog.liang2.tw/posts/2015/09/png-optim/" rel="alternate"></link><updated>2015-09-22T00:00:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2015-09-22:posts/2015/09/png-optim/</id><summary type="html">&lt;p&gt;é¨è½æ ¼åæç«ç¸½æ¯ç¹å¥èå¥®ï¼æ¸¬äºä¸ä¸çè¦½åéæ¨£çç¶²ç«è¦ç¨å¤å°é »å¯¬ãé¦é è½å£å¨ &lt;span class="caps"&gt;600KB&lt;/span&gt; å·¦å³ï¼å çºæç«  summary è£¡é¢æ«æéæ²åãä¸éåé¨è½æ ¼è¨­å®éç¯æç« ï¼è£¡é¢æå¹¾å¼µè¢å¹æªåçå°±è¦è±å¿« &lt;span class="caps"&gt;2MB&lt;/span&gt;&amp;nbsp;å³ã&lt;/p&gt;
&lt;p&gt;å°±æ³äºä¸ä¸åæªæä»éº¼å£ç¸®æ¹å¼ãå¦ææ¯ &lt;span class="caps"&gt;JPG&lt;/span&gt; çè©±ï¼&lt;a href="https://github.com/tjko/jpegoptim"&gt;jpegoptim&lt;/a&gt; ç°¡å®åææï¼å¦ææ¯ &lt;span class="caps"&gt;PNG&lt;/span&gt; çè©±ï¼ä»¥åé½æ¯ç¨ &lt;a href="http://optipng.sourceforge.net/"&gt;OptiPNG&lt;/a&gt;ï¼ä½æææéï¼èä¸æ¯ç¡æå£ç¸®ãå¨è¢å¹æªåçææ³ï¼æåä¸ä»æå¹¾ååç´ çé¡è²ç¨å¾®ä¸ä¸æ¨£ï¼å¶å¯¦äººç¼ç¡æ³åè¾¨ï¼&lt;/p&gt;
&lt;p&gt;æ¼æ¯ï¼éè¦æ¯è¼ççå¸é¢æ¾å¾å°çå¹¾ç¨® &lt;span class="caps"&gt;PNG&lt;/span&gt; å£ç¸®æ¹å¼ãå¾ç¢°å·§æ¾å° &lt;a href="http://css-ig.net/png-tools-overview.html"&gt;http://css-ig.net/png-tools-overview.html&lt;/a&gt; å°è¬ &lt;span class="caps"&gt;PNG&lt;/span&gt;&amp;nbsp;åªåçæ¯è¼ï¼å°±æäºå¹¾æ¬¾ä¾è©¦ã&lt;/p&gt;
&lt;p&gt;ç´æ¥æçµææ´çæä¸è¡¨ï¼&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="left"&gt;Filename&lt;/th&gt;
&lt;th align="right"&gt;Original size&lt;/th&gt;
&lt;th align="right"&gt;&lt;a href="http://optipng.sourceforge.net/"&gt;OptiPNG&lt;/a&gt; (lossless)&lt;/th&gt;
&lt;th align="right"&gt;&lt;a href="https://github.com/google/zopfli"&gt;Zopfli&lt;/a&gt; (lossless)&lt;/th&gt;
&lt;th align="right"&gt;&lt;a href="https://pngquant.org/"&gt;pngquant&lt;/a&gt; (lossy)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;a href="../blog-internals/pics/blog_desktop.png"&gt;blog_desktop.png&lt;/a&gt;&lt;/td&gt;
&lt;td align="right"&gt;180K&lt;/td&gt;
&lt;td align="right"&gt;108K&lt;/td&gt;
&lt;td align="right"&gt;100K&lt;/td&gt;
&lt;td align="right"&gt;56K&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;a href="../blog-internals/pics/blog_mobile.png"&gt;blog_mobile.png&lt;/a&gt;&lt;/td&gt;
&lt;td align="right"&gt;72K&lt;/td&gt;
&lt;td align="right"&gt;52K&lt;/td&gt;
&lt;td align="right"&gt;44K&lt;/td&gt;
&lt;td align="right"&gt;28K&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;a href="../blog-internals/pics/justfont_setting.png"&gt;justfont_setting.png&lt;/a&gt;&lt;/td&gt;
&lt;td align="right"&gt;272K&lt;/td&gt;
&lt;td align="right"&gt;196K&lt;/td&gt;
&lt;td align="right"&gt;164K&lt;/td&gt;
&lt;td align="right"&gt;84K&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;a href="../blog-internals/pics/oldsite.png"&gt;oldsite.png&lt;/a&gt;&lt;/td&gt;
&lt;td align="right"&gt;604K&lt;/td&gt;
&lt;td align="right"&gt;536K&lt;/td&gt;
&lt;td align="right"&gt;492K&lt;/td&gt;
&lt;td align="right"&gt;288K&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;a href="//blog.liang2.tw/posts/2015/09/png-optim/pics/oldsite_full.png"&gt;oldsite_full.png&lt;/a&gt;&lt;/td&gt;
&lt;td align="right"&gt;816K&lt;/td&gt;
&lt;td align="right"&gt;684K&lt;/td&gt;
&lt;td align="right"&gt;644K&lt;/td&gt;
&lt;td align="right"&gt;376K&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="optipng"&gt;OptiPNG&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://optipng.sourceforge.net/"&gt;OptiPNG&lt;/a&gt;&amp;nbsp;éæ¯æé¨ä»½ææï¼ä¸éä»è·ä¸å¿«ã&lt;/p&gt;
&lt;h3 id="zopfli-zopflipng"&gt;Zopfli&amp;nbsp;(Zopflipng)&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/google/zopfli"&gt;Zopfli&lt;/a&gt; æ¯ Google éç¼çå£ç¸®æ¼ç®æ³ï¼ç¸å®¹æ¼ deflate, gzip, zlib æ ¼å¼ãä¹å æ­¤è½ç¨å¨ &lt;span class="caps"&gt;PNG&lt;/span&gt; ä¸é¢ãä»ä¹æ¯ lossless&amp;nbsp;compressionã&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Zopfli Compression Algorithm is a compression library programmed in C to perform very good, but slow, deflate or zlib compression.
(&lt;a href="https://github.com/google/zopfli"&gt;Zopfli Readme&lt;/a&gt;)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;éå &lt;a href="https://github.com/google/zopfli/blob/master/README.zopflipng"&gt;Zopflipng&lt;/a&gt; ä¹æ¯åå repo&amp;nbsp;ç¶­è­·ãèªå·±ç·¨è­¯ç°¡å®ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git clone https://github.com/google/zopfli.git
make zopflipng
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¦æè¦ä¸å£æ°£å£ç¸®ä¸å  &lt;span class="caps"&gt;PNG&lt;/span&gt;ï¼å¯ä»¥éæ¨£ä½¿ç¨ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;zopflipng --lossy_transparent --prefix *.png
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éåº¦ä¹è »æ¢çï¼æå &lt;code&gt;-q&lt;/code&gt; é¸é å¯ä»¥å éãä½å£ç¸®æçæ¯ OptiPNG&amp;nbsp;éå¥½ã&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;PS&lt;/span&gt; åå¥½ä»å¤©æ©ä¸çå° Google ååºäºå¦ä¸åå£ç¸®æ¼ç®æ³ &lt;a href="https://github.com/google/brotli"&gt;Brotli&lt;/a&gt;ï¼ä½éåè deflate ä¸ç¸å®¹ï¼æè©²ä¸è½ç¨å¨ &lt;span class="caps"&gt;PNG&lt;/span&gt;&amp;nbsp;ä¸é¢ã&lt;/p&gt;
&lt;h3 id="pngquant"&gt;pngquant&lt;/h3&gt;
&lt;p&gt;æ³è¦ææç &lt;span class="caps"&gt;PNG&lt;/span&gt; å¯ä»¥ç¨ &lt;a href="https://pngquant.org/"&gt;pngquant&lt;/a&gt;ãçå®ç¶²æç¹å¥å¼·èª¿å¨éæåº¦çè³è¨æè¢«ä¿çï¼ä¸¦è½å &lt;span class="caps"&gt;JPEG&lt;/span&gt; ä¸æ¨£è¨­å® qualityãä¸è¬ quality&amp;nbsp;å®¹è¨±è¶ä½å£ç¸®æ¯é½æè¶é«ã&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pngquant -f --ext=.png --quality=70-85 --skip-if-larger *.png
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯ä»¥çå° pngquant è½å¾å®¹æéå° 50%&amp;nbsp;ä»¥ä¸çå£ç¸®æ¯ãå°±æçä¾å­çä¸å¤ªåºç¾è¢å¹æªååªè£¡å¤±çäºï¼èä¸å¤±çäºâ¦â¦ä¹ä¸ææéº¼æ¨£å¦ã&lt;/p&gt;
&lt;h3 id="pngquant-zopflipng"&gt;pngquant +&amp;nbsp;Zopflipng&lt;/h3&gt;
&lt;p&gt;çäºä¸ä¸ç¸éçè¨è«ï¼pngquant éæåè¢«å£ç¸®çç©ºéï¼æä»¥æå¾åå¥ä¸ Zopflipng&amp;nbsp;éå¯ä»¥åè®å°ï¼éè »é©äººçã&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="left"&gt;Filename&lt;/th&gt;
&lt;th align="right"&gt;Orig. size&lt;/th&gt;
&lt;th align="right"&gt;pngquant&lt;/th&gt;
&lt;th align="right"&gt;pngquant + Zopfli&lt;/th&gt;
&lt;th align="right"&gt;Compress ratio&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;a href="../blog-internals/pics/blog_desktop.png"&gt;blog_desktop.png&lt;/a&gt;&lt;/td&gt;
&lt;td align="right"&gt;180K&lt;/td&gt;
&lt;td align="right"&gt;56K&lt;/td&gt;
&lt;td align="right"&gt;60K&lt;/td&gt;
&lt;td align="right"&gt;0.33&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;a href="../blog-internals/pics/blog_mobile.png"&gt;blog_mobile.png&lt;/a&gt;&lt;/td&gt;
&lt;td align="right"&gt;72K&lt;/td&gt;
&lt;td align="right"&gt;28K&lt;/td&gt;
&lt;td align="right"&gt;28K&lt;/td&gt;
&lt;td align="right"&gt;0.39&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;a href="../blog-internals/pics/justfont_setting.png"&gt;justfont_setting.png&lt;/a&gt;&lt;/td&gt;
&lt;td align="right"&gt;272K&lt;/td&gt;
&lt;td align="right"&gt;84K&lt;/td&gt;
&lt;td align="right"&gt;76K&lt;/td&gt;
&lt;td align="right"&gt;0.28&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;a href="../blog-internals/pics/oldsite.png"&gt;oldsite.png&lt;/a&gt;&lt;/td&gt;
&lt;td align="right"&gt;604K&lt;/td&gt;
&lt;td align="right"&gt;288K&lt;/td&gt;
&lt;td align="right"&gt;268K&lt;/td&gt;
&lt;td align="right"&gt;0.44&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;a href="//blog.liang2.tw/posts/2015/09/png-optim/pics/oldsite_full.png"&gt;oldsite_full.png&lt;/a&gt;&lt;/td&gt;
&lt;td align="right"&gt;816K&lt;/td&gt;
&lt;td align="right"&gt;376K&lt;/td&gt;
&lt;td align="right"&gt;348K&lt;/td&gt;
&lt;td align="right"&gt;0.43&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="truepng"&gt;æ²ææ¸¬ç&amp;nbsp;TruePNG&lt;/h3&gt;
&lt;p&gt;å¨åå§ç¶²ç«ä¸­ææå° &lt;a href="http://css-ig.net/articles/truepng"&gt;TruePNG&lt;/a&gt; è¡¨ç¾å¾å¥½ï¼ä½å®ä¸æ¯ open source èä¸å¥½ååªè½å¨ Windows&amp;nbsp;ä¸è·ï¼é£å°±ç®äºã&lt;/p&gt;
&lt;h3 id="_1"&gt;çµè«&lt;/h3&gt;
&lt;p&gt;ä»¥å¾æ²äºæªåé½æç¨ pngquant å£ç¸®ä¸ä¸ï¼å®å¨ä¸è½æè²å·®çèæ®å¾ OptiPNG æ¹çº&amp;nbsp;Zopfliã&lt;/p&gt;</summary><category term="zh"></category><category term="png"></category></entry><entry><title>è¨­å®é¨è½æ ¼ç­è¨</title><link href="//blog.liang2.tw/posts/2015/09/blog-internals/" rel="alternate"></link><updated>2015-09-21T00:00:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2015-09-21:posts/2015/09/blog-internals/</id><summary type="html">&lt;p&gt;Blog&amp;nbsp;å°æä¾èªªï¼æéè¦çå°±æ¯æ¸å¯«çèé©åº¦ã&lt;/p&gt;
&lt;p&gt;ä¸éå§å¨è¨­å® github &lt;span class="caps"&gt;CNAME&lt;/span&gt; çæåå°±è¨çº &lt;code&gt;blog.liang2.tw&lt;/code&gt;ï¼ä½ä¸ç´ä»¥ä¾é½åªæ¯åä¸é å¼çèªæä»ç´¹&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt;ï¼ç¨ &lt;a href="http://semantic-ui.com/"&gt;SemanticUI&lt;/a&gt;&amp;nbsp;æå»èæãä¸éé¨è½æ ¼å¦ææ¯ç¯æç« é½éè¦æå»çè©±ï¼å¤§æ¦å°±ä¸ææåæ°£åå¯«å§å®¹äºã&lt;/p&gt;
&lt;p&gt;æ´çäºä¸ä¸æå¹¾åç®æ¨ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åªèæ®ç¨ static site å çºä¸æ³ç¶­è­· serverï¼èä¸ blog&amp;nbsp;ä¹æ²ä»è¦ç«çï¼ç¾å¨åç¨åç«¯å°±å¯ä»¥åå°å¾å¤äºååè½&lt;/li&gt;
&lt;li&gt;æå¥½ site generator æ¯ç¨ Python&amp;nbsp;å¯¦ä½ï¼éæ¨£æ³è¦èª¿æ´å®çåè½æï¼æ¯è¼ææéº¼æ¹ &lt;/li&gt;
&lt;li&gt;è½æ¯æ´ markdown å reStructuredText&amp;nbsp;æå¥½&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¯©å®ä¹å¾é¸é ä¹æ²å¹¾åï¼&lt;a href="http://docs.getpelican.com/"&gt;Pelican&lt;/a&gt;ã&lt;a href="http://sphinx-doc.org/"&gt;Sphinx&lt;/a&gt;ï¼ä½ Sphinx å¯è½å° blog éç¼çåè½æ¯è¼å°ï¼æå¤äººç¨çå¤§æ¦å°±&amp;nbsp;Pelicanï¼æä»¥å°±æ±ºå®ç¨å®äºã&lt;/p&gt;
&lt;p&gt;æ´çèµ·ä¾ä¹åäºä¸å°èª¿æ´ï¼å°±åé»å§ï¼&lt;/p&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#pelican"&gt;Pelican&amp;nbsp;ç°¡ä»&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#all-is-about-the-theme"&gt;All is about the&amp;nbsp;theme&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_1"&gt;å­å&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#webfont"&gt;ä¸­æ&amp;nbsp;webfont&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_2"&gt;ä¸­ææç&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#figure-caption"&gt;Figure&amp;nbsp;caption&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#markdown-or-rst"&gt;Markdown or&amp;nbsp;rst?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#to-do"&gt;To&amp;nbsp;do&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#edit-2015-09-22"&gt;&lt;span class="caps"&gt;EDIT&lt;/span&gt;&amp;nbsp;(2015-09-22)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#edit-2015-09-23"&gt;&lt;span class="caps"&gt;EDIT&lt;/span&gt;&amp;nbsp;(2015-09-23)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h3 id="pelican"&gt;Pelican&amp;nbsp;ç°¡ä»&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://docs.getpelican.com/"&gt;Pelican&lt;/a&gt; çµè«ä¾èªªä¸é£çè§£ï¼èä¸è¦èªè¨ blog theme ä¹ä¸æå¾è¤éãé¦åè· Sphinx ä¸æ¨£ï¼ç¨å§å»ºç &lt;code&gt;pelican-quickstart&lt;/code&gt; é è¨­å¼å°±è½æ¶å¥½ä¸åå¯ä»¥åçãç®éå¤§æ¦é·éæ¨£&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;my_blog/
âââ content/
âÂ Â  âââ blog_post_1.md
âÂ Â  âââ blog_post_2.rst
âââ output/
âââ develop_server.sh*
âââ Makefile
âââ fabfile.py
âââ pelicanconf.py
âââ publishconf.py
âââ requirements.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Blog source é½æ¾å¨ content åºä¸ï¼è¨­å®æªåæ local ç¨ç &lt;code&gt;pelicanconf.py&lt;/code&gt; ä»¥å deploy ç¨ç &lt;code&gt;publishconf.py&lt;/code&gt;ãä¸¦ä¸æä¾äºå FabricãMakeãshell script ç­èªååè³æ¬æ source ç¨ theme template render&amp;nbsp;æä¸åéæç¶²ç«ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;make html
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é è¨­æè¼¸åºå° &lt;code&gt;output/&lt;/code&gt;ï¼å°æå deploy å°±æéåè³æå¤¾çå§å®¹ä¸å° server&amp;nbsp;ä¸ã&lt;/p&gt;
&lt;p&gt;æ¯ç¯æç« å¯ä»¥ç¨ markdown æè reStructuredText(rst)&amp;nbsp;ä¾å¯«ï¼æ¦å¿µä¸åéæ¨£ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;---
Title: Hello World
Date: 2016-01-16 18:00
Tags: world, programming
Category: test
Slug: hello-world
---

Hello [World]

[World]: https://en.wikipedia.org/wiki/World
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gh"&gt;Hello World&lt;/span&gt;
&lt;span class="gh"&gt;##############&lt;/span&gt;

&lt;span class="nc"&gt;:date:&lt;/span&gt; &lt;span class="nf"&gt;2016-01-16 18:00&lt;/span&gt;
&lt;span class="nc"&gt;:tags:&lt;/span&gt; &lt;span class="nf"&gt;world, programming&lt;/span&gt;
&lt;span class="nc"&gt;:category:&lt;/span&gt; &lt;span class="nf"&gt;test&lt;/span&gt;
&lt;span class="nc"&gt;:slug:&lt;/span&gt; &lt;span class="nf"&gt;hello-world&lt;/span&gt;

Hello World_

&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="nt"&gt;_World:&lt;/span&gt; https://en.wikipedia.org/wiki/World
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éæ¨£å·²ç¶è¨­å®å¥½äºæ¨é¡ãåé¡ãæ¨ç±¤ãç¼å¸æ¥æéæ slugï¼æé»åæç« ç &lt;span class="caps"&gt;ID&lt;/span&gt;ï¼ç®å¾å®æ´äºãæä½è¦æ±è³å°ææ¨é¡ã&lt;/p&gt;
&lt;p&gt;æå¾èª¿æ´äºä¸ä¸ static file çè·¯å¾ãæææç« æå¹´æåéï¼æ¯åå­è³æå¤¾è£¡æç¶æçåãæªæ¡ç­ç­ã&lt;span class="caps"&gt;URL&lt;/span&gt; ä¹æ¯ä»¥å¹´æçºå®ä½ãå¶å¯¦æçæ³çæè©²æ¯æå hash ä¹é¡çæ±è¥¿ &lt;code&gt;/posts/2015/09/abcd/&lt;/code&gt; ç­åæ¼ &lt;code&gt;/posts/2015/09/abcd-my-post/&lt;/code&gt; æ¯è¼å¥½åäº«ãæ¾äºä¸ä¸å¥½åæ²éåè½ï¼ä¸éæ²æå®å½±é¿ä¹ä¸å´éï¼æ«ä¸ä¸çã&lt;/p&gt;
&lt;h3 id="all-is-about-the-theme"&gt;All is about the&amp;nbsp;theme&lt;/h3&gt;
&lt;p&gt;ä¸éå§æè±æéå°±æ¯æ¾åå¥½ä¸»é¡äºãå§å»ºçä¸»é¡å¯¦ç¨æ§ä¸å·®ï¼ä½åæ¬¡ççµæ§å¤ªè¤éï¼åä¾æåæ­¡æ´ç°¡æ½ççé¢ï¼ä¹å¸ææå¯«å¥½ responsive&amp;nbsp;layoutã&lt;/p&gt;
&lt;p&gt;Pelican å¤§é¨ä»½çä¸»é¡é½éä¸­å¨ &lt;a href="http://pelicanthemes.com/"&gt;http://pelicanthemes.com/&lt;/a&gt;ï¼æç¸®åå¾å¥½æé¸ï¼èä¸ theme è·å§å®¹æ¯åéçï¼æ theme åªæ¯æ¹ config è£¡ &lt;code&gt;THEME&lt;/code&gt; éè®æ¸èå·²ï¼ä¸åæ­¡å°±æãé¸äºä¸é£å­æå° &lt;a href="https://github.com/alexandrevicenzi/flex"&gt;Flex&lt;/a&gt;ï¼ä»ä¸æ¯ææåæ­¡ççåï¼ææ¯è¼åæ­¡å®æ¬å¼ç½®ä¸­ï¼ä½æå¤åªæå°æ¸ä¸»é¡æ»¿è¶³ä¸è¿°æ¢ä»¶ã&lt;/p&gt;
&lt;p&gt;Theme template ç¨ Jinja2ï¼ä¸éå§åªè¦èª¿æ´ &lt;code&gt;base&lt;/code&gt;ã&lt;code&gt;index&lt;/code&gt;ã&lt;code&gt;article&lt;/code&gt;ã&lt;code&gt;page&lt;/code&gt; éå¹¾é è· blog æç¸éçå°±è½æ¹è®ä¸»è¦çå¤è§ãå¥½å¨å©æ¬å¼çç¶²é  code è®èµ·ä¾ä¹å¾èé©ãçäºä¸ä¸åªè¦æ responsive èª¿æ´ä¸ä¸ï¼è®ææ©å§æå¯¬åº¦å¤ ãå¾å¤§çè¢å¹ä¸è¦æ»¿çæ´é«çèµ·ä¾å°±å·®ä¸å¤ãå¤§è´ä¸ theme&amp;nbsp;å°±éæ¨£å®ä¸ä¾äºã&lt;/p&gt;
&lt;p&gt;ç´°é¨ç &lt;span class="caps"&gt;CSS&lt;/span&gt; ä¿®æ­£ï¼Flex æç¨ &lt;a href="http://lesscss.org/"&gt;&lt;span class="caps"&gt;LESS&lt;/span&gt;&lt;/a&gt; å &lt;a href="http://gulpjs.com/"&gt;gulp&lt;/a&gt; èçåç«¯çè¨­å®ã&lt;span class="caps"&gt;LESS&lt;/span&gt; è®æ¸è· nesting rules ä¸æè® &lt;span class="caps"&gt;CSS&lt;/span&gt; è®å¾å¾é«ï¼æ¯æ¬¡æ¹å®è·å gulp å°±ææ°ç &lt;code&gt;style.min.css&lt;/code&gt; å¾æ¹ä¾¿ã&lt;/p&gt;
&lt;p&gt;å¯ä¸è¨å­å·¦å´çå¤§é ­ç§ï¼æå¤ ç©çï¼èä¸éè¦å¢å  &lt;span class="caps"&gt;54KB&lt;/span&gt;&amp;nbsp;çæµéãéåæ³è©²æ¾ä»éº¼ä¾éæå®ï¼æ¾åé³å¥½äºã&lt;/p&gt;
&lt;h3 id="_1"&gt;å­å&lt;/h3&gt;
&lt;p&gt;å çºèªç¨ &lt;span class="caps"&gt;OSX&lt;/span&gt;ï¼ææåé½æå¿äºå¨ Windows&amp;nbsp;ä¸çå­é«æå¤æ²åã&lt;/p&gt;
&lt;p&gt;Flex å§å»ºç¨ Google webfont ä¾èçè±æå­é«ï¼çºäºå¼è¨éæå®æ´æ§å¤å äºä¸çµ serif å­é« &lt;a href="https://www.google.com/fonts/specimen/Crimson+Text"&gt;Crimson Text&lt;/a&gt;ãæåæ­¡éç¨® Garamond é¡çå¤å¸è¥¯ç·å­ãååç¼ç¾å®æ¯&lt;a href="https://github.com/skosch/Crimson"&gt;éæºç (&lt;span class="caps"&gt;SIL&lt;/span&gt; 1.1)&lt;/a&gt;ï¼niceãï¼å¤§é¸ç¶²åè¡¨ç¤ºï¼â¦â¦ï¼&lt;/p&gt;
&lt;h4 id="webfont"&gt;ä¸­æ&amp;nbsp;webfont&lt;/h4&gt;
&lt;p&gt;éº»ç©çå°±æ¯ä¸­æå­åãç´æ¥æ¾æ£ç³»çµ±å§å»ºï¼ä½æå¾ææ Noto Sans &lt;span class="caps"&gt;CJK&lt;/span&gt; å Source Hans Sans å é²ä¾ç¶åç¨ãä¸ç´é½ææ³åè©¦ &lt;a href="http://justfont.com"&gt;justfont&lt;/a&gt; æ¨åºç webfont åè½ãå®éä½ææåµå¥ä¸å javascriptï¼çéé ç¶²é ç¨å°åªäºä¸­æå­ï¼æå»è¦éäºä¸­æå­çå­åä¾å éè¼å¥ãä½¿ç¨ä¸å°±è· Google webfont ä¸æ¨£ï¼å®ç¶²æå­¸èæ®äºå¾å¤ä½¿ç¨ææ³ï¼å¶å¯¦æ²åä»éº¼è¨­å®å°±å¥½äºï¼æä»¥çºè¦èª¿å¾å¤æ±è¥¿æçå¾å°ææï¼æå¾åªæ¹äº &lt;code&gt;font-family&lt;/code&gt; å°±å®å·¥ãä»çè¨­å®ä¹è½ä¿çåæ¬è±æå­çå­åã&lt;/p&gt;
&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/blog-internals/pics/justfont_setting.png"/&gt;
  &lt;p class="caption center"&gt;&lt;span class="fig"&gt;Justfont&amp;nbsp;è¨­å®&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;åè²»çè©¦ç¨æ²åé¡ä¹å¾å°±å·ä¸å»äºãèªªççåè²»åªè½ç¶å©åå­åï¼è¨­å®å¥½å§æä»¥åå§æç²é« quota å°±ç¨å®äºï¼ç¾å¨ 100,000 page views/year å¤§ç´ &lt;span class="caps"&gt;NTD&lt;/span&gt; 350/year ä¹ä¸è²´ãæ¢ç¶ä»è²»äºç¶ç¶è¦è©¦è©¦ä¿¡é»é«ï¼é»è¦ççå°ç¾å¨éè²·ä¸èµ·åãè¨­äºå©åå­éï¼ä¸æ¨£å äºä¸å¥æ¥·é«ç¶å¼è¨ç¨ãæ¥·é«ä¹é¸äºæ¯è¼ç§æ°£ç cwTeX&amp;nbsp;æ¥·ã&lt;/p&gt;
&lt;p&gt;ä¹è¨±æªä¾æè©¦è©¦çä»¿å®é«ï¼ä½ææé»æå¿è¢å¹é¡¯ç¤ºçææï¼ç¨ Retina è¡¨ç¤ºè§£æåº¦ç¡æï¼ï¼èä¸ justfont&amp;nbsp;æä¾çï¼ä»¿ï¼å®é«ä¹æ²ææ¯ä¿¡é»é«æ´åæ­¡ï¼éå¯¦é©æ«ä¸æ±ç½®ã&lt;/p&gt;
&lt;h4 id="_2"&gt;ä¸­ææç&lt;/h4&gt;
&lt;p&gt;åå° &lt;span class="caps"&gt;COSCUP&lt;/span&gt; 2015 Bobby Tung çµ¦çæ¼è¬&lt;a href="http://www.slideshare.net/bobby3302/w3c-51661297"&gt;ãä¸­ææçéæ±ä»¥åæå¨W3Cçå°çäºæã&lt;/a&gt;ææå¬ï¼è¦ºå¾å¦æèªå·±ä¸ä¸éå§å¥½å¥½åç¶²é ä¸­ææçï¼ä¹å¾è¯å®æ´æ¶å¾æ¹ã&lt;/p&gt;
&lt;p&gt;ä½æå¾éæ¯ææå¦¥åå¦ï¼è·ªï¼ã&lt;/p&gt;
&lt;p&gt;é¦åæ®µè½åå¾éæ¯æçç½ï¼éä¸»è¦æ¯å¼é¡§è±ææçï¼å çºä¸ç¥éæéº¼å¨ä¸åèªè¨å¥ä¸åççåï¼è±ææ®µè½æ¯åå¾çå¤§éè·ãåä¾æå¨ç´æå­çæåä¹å¾ç¿æ£æ®µè½åå¾ç©ºä¸è¡ï¼æè¦ºè¦è¦ºä¸éæ¨£æ¯è¼èé©ï¼ä¹è¨±æ¯è¡é«ä¸å¤ â¦â¦ï¼ã &lt;del&gt;&lt;code&gt;margin&lt;/code&gt; ä¹æ¯è¨­çº &lt;code&gt;1em&lt;/code&gt;ã&lt;/del&gt;ï¼&lt;span class="caps"&gt;EDIT&lt;/span&gt;:&amp;nbsp;è¦ææ«ï¼&lt;/p&gt;
&lt;p&gt;æ®µè½é¦è¡ç¸®ææå¾ä¹æ²ææ¾ï¼ä¸»å æ¯æå¥é½è »ç­çï¼æé»æªï¼åä¾ markdown parser æææçå¨å½¢ç©ºç½åæï¼é£ä»¥çè§£ï¼ä½ rst ä¸æï¼ï¼çè¦å åªè½ç¨&lt;code&gt;&amp;amp;#x3000;&lt;/code&gt;ç¡¬å ãä¸­è±äº¤éçæ®µè½ä¸­æå­æç¡æ³å°é½ï¼ä¸éå°±æ«æç®äºï¼ç¾å¨ä¸­è±æçå­éè½ä¸æ¨£å·²ç¶å¾æåäºã&lt;/p&gt;
&lt;p&gt;300 çä¸­æå­çç¢ºæé»ç´°ï¼ææå­èª¿å¤§äºæ 18pxï¼éç¹å¥æ¿çµ¦æç¸åª½çï¼ç¢ºå®ä»åçå¾å°éäºå­ &lt;span class="caps"&gt;XD&lt;/span&gt; &lt;/p&gt;
&lt;p&gt;åå°éè£¡å¶å¯¦éè »æ»¿æäºï¼é·å¾åéæ¨£ï¼&lt;/p&gt;
&lt;div class="figure align-center" style="width: 250px"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/blog-internals/pics/blog_mobile.png"/&gt;
  &lt;p class="caption center"&gt;&lt;span class="fig"&gt;ææ©ä¸çæ¨£å­&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class="figure"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/blog-internals/pics/blog_desktop.png"/&gt;
  &lt;p class="caption center"&gt;&lt;span class="fig"&gt;é»è¦è¢å¹çæ¨£å­&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id="figure-caption"&gt;Figure&amp;nbsp;caption&lt;/h3&gt;
&lt;p&gt;åçä¸é¢éè »å¸¸ææ¾ä¸äºåèªªãreference ä¹é¡ãç¯ä¾ä¸é¢å°±æãå¨ markdown ä¸å®¹æéæéææï¼å çºå®çèªæ³æ²ééº¼è¤éï¼ä½ rst&amp;nbsp;æ¬ä¾å°±ææ¯æ´éæ¨£çèªæ³ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;role&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; fig

&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; {filename}pics.jpg
    &lt;span class="nc"&gt;:align:&lt;/span&gt; &lt;span class="nf"&gt;center&lt;/span&gt;

    &lt;span class="na"&gt;:fig:&lt;/span&gt;&lt;span class="nv"&gt;`Figure 1:`&lt;/span&gt; The figure caption.

    The legend consists of all elements after the caption.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;éæ¨£å°±æè®æ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;figure align-center&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;img&lt;/span&gt; &lt;span class="na"&gt;alt&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;src&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;{filename}pics.jpg&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;caption&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;fig&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Figure 1:&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt; The figure caption&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;legend&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;The legend consists of all elements after the caption.&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¨ markdown åºæ¬ä¸å°±ææä¸é¢é£ä¸ä¸² &lt;span class="caps"&gt;HTML&lt;/span&gt;ï¼å¶å¯¦ä¹éå¥½ï¼åªæ¯éäºä¸é»ãççå¯«å¾å¾ç©æåæ³å¯« plugin&amp;nbsp;ä¾åéä»¶äºã&lt;/p&gt;
&lt;h3 id="markdown-or-rst"&gt;Markdown or&amp;nbsp;rst?&lt;/h3&gt;
&lt;p&gt;æ¥å¸¸çç·¨è¼¯æè©²éæ¯ä»¥ markdown çºä¸»ï¼ççç²¾ç¾ç &lt;a href="http://macdown.uranusjr.com/"&gt;Macdown&lt;/a&gt; ç·¨è¼¯å¨å¦æ­¤å¥½ç¨ãä½å¦ææ¯å¾è¤éçæªæ¡ï¼åææå¬å¼æåè¡¨ä»éº¼çï¼å¯è½å°±æèæ® rstï¼rst ç¼ºé»å°±æ¯èªæ³æé»è¤éï¼èä¸å¾å¤èªæ³ä»°è³´å¥ä¸­ç©ºç½ï¼ä½¿å¾ä¸é©ç¨ä¸­æï¼ç¶å¾æç vim linter æä¸ç´æ±æ¨å®æå¾å¤æ²çéç&amp;nbsp;directivesã&lt;/p&gt;
&lt;p&gt;ä¸éå¾é«è Pelican æå©èæ´åçå¾å¥½ï¼å©åé½è½ç¨å°±è½è¦ææ³è½æï¼ä½ template&amp;nbsp;ä¹ä¸ç¨å¯«å©ä»½ã&lt;/p&gt;
&lt;h3 id="to-do"&gt;To&amp;nbsp;do&lt;/h3&gt;
&lt;p&gt;éä¹å¤éå ä¸äº LaTeX MathJaxãSmartypants ç­å°ç´°ç¯ï¼ä¸éæ´é«ä¾èªª blog&amp;nbsp;å®¢è£½åå°±å®æäºãä¹è¨±æªä¾ç¨å°ä»éº¼åå å§ã&lt;/p&gt;
&lt;p&gt;ç®åæ³å°çä¸äºåé¡ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¨é¡å­éï¼æ¬ä¾æ¯è·å§æåå­éï¼ä½æè¦ºé·æææä¸å°æ®µè½ï¼åæ¹æç²é«ï¼å¸æç­æä¸è¦å çºéæ¨£è®å¾å¾æ··äºã&lt;/li&gt;
&lt;li&gt;Jupyter notebook includeï¼éæ²æè©¦ç´æ¥åµå¥ nb çåè½ï¼ææ³æè©²ä¹æ¯èª¿æ´ &lt;span class="caps"&gt;CSS&lt;/span&gt;&amp;nbsp;é£é¡çå·¥ï¼åç«¯å¥½ç´¯å¥½é£åâ¦ï¼&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="(https://github.com/getpelican/pelican-plugins)"&gt;Pelican plugin&lt;/a&gt; è£¡é¢åå«äºå¾å¤æ¨£çå¥ä»¶ï¼æçå¾å¤éå°çåé¡ï¼åäººé½è§£æäºå§ï¼â¦â¦å§&amp;nbsp;xdd&lt;/p&gt;
&lt;h3 id="edit-2015-09-22"&gt;&lt;span class="caps"&gt;EDIT&lt;/span&gt;&amp;nbsp;(2015-09-22)&lt;/h3&gt;
&lt;p&gt;çä¾çå»ï¼åèª¿æ´äºå¾å¤æ±è¥¿ã&lt;/p&gt;
&lt;p&gt;é¦åï¼å­é«å¤§å°èª¿å°æ 16px åèª¿å 18pxãæé¸æ 16px æ¯å çºæç¼ç¾å¨ 13&amp;#34; ç­é»ä¸é±è®æè®å¾å¾æ ãèª¿åä¾æ¯å çºå¨å¤§è¢å¹ä¸çççå¤ªå°äºï¼èªå·±é½éè¦æ¾å¤§ä¾çãèä¸ç¼ç¾æ¬ä¾ 13&amp;#34;&amp;nbsp;ä¸å¾æ çåé¡ä¸¦ä¸æ¯å­é«ï¼èæ¯ä¸è¡æå­çå­æ¸ã&lt;/p&gt;
&lt;p&gt;ä¸è¡æå­å¤ªå¤æå½±é¿å°é±è®çæçã&lt;span class="caps"&gt;PTT&lt;/span&gt; ä¸è¡æå¤ 39 åä¸­æå­ï¼ä½æè©²å¾å°æç« æ¯ææ»¿çï¼å¤§ç´é½æåäºå°å«æå¯¬ï¼ä¹å°±æ¯å¨ 20-32 åä¸­æå­ãè±æçè©±å¤§ç´å¨ 12-15&amp;nbsp;åå­ãæèªå·±èª¿äºå¾å¤çæ¬ä¹å·®ä¸å¤æ¯éåæ¸å­ã&lt;/p&gt;
&lt;p&gt;æä»¥çæ³çæç« å¯¬åº¦è¦æ»¿è¶³ä¸­ãè±æçå­æ¸ãä¸­æå­å¯¬åº¦æ¯åºå®çï¼æä»¥å¨æ±ºå®ä¸è¡æå¤å°åä¸­æå­ä¹å¾ï¼å°±è¦æ³è¾¦æ³èª¿æ´è±æå­é«è®ä¸è¡è±æå­æ¸åå¥½ãåæ¬ä½¿ç¨ç Source Pro Sans ç¨å¾®çªäºä¸é»ï¼æè®ç´è±æçé é¢çèµ·ä¾æé»æ ï¼å­é 400 çæåå°±å¥½å¤äºï¼ä½ä¸­æå°±è®å¾ä¸é©åå§æãæå¾ææ Latoï¼ä¹æ¯å¾æ®åçå­é«ï¼ä¸éå¶å¯¦æ²å¯¬å¤å°ãå¦æéæ¯è¦ºå¾å¾æ å°±åªå¥½ææ Open Sans&amp;nbsp;äºï¼ä½æè¦ºå¾å®å°±æé»é¬æ£ã&lt;/p&gt;
&lt;p&gt;æå¾å§æå¯¬ 738px (41em) æ 828px (46em)ï¼å¯¦éä¸è¡æå¤§çº 612px (34em)ãä¸è¡æå¤ 34 åä¸­æå­ãå¤§ç´ 14 åè±æå­ï¼80 åå­åï¼ï¼ç¨å¼ç¢¼ä¸è¡æå¤åªè½æ¾ 74&amp;nbsp;åå­åï¼ç­äºä¸é»é»ä½éå¯ä»¥æ¥åã&lt;/p&gt;
&lt;p&gt;æå¤çå°ç¼ç¾ï¼å¨å§æè®çªä¹å¾ï¼éå¯ä»¥å ä¸å³å´ç sidenoteï¼åæ¯ &lt;a href="http://www.daveliepmann.com/tufte-css/"&gt;Tufte &lt;span class="caps"&gt;CSS&lt;/span&gt;&lt;/a&gt; éæ¨£ï¼ææææ¯ footnote&amp;nbsp;å¥½ç¨ï¼ä½å¯è½åè®åå§å®¹å¤ªæ ççæã&lt;/p&gt;
&lt;p&gt;æå¾æ¯å¨æ®µè½åå¾è·é¢èª¿æ´ï¼ææ¨é¡æ¥å§æçéè·è®å°äºï¼ä½æ®µè½éçéè·èª¿å¤§ãå­¸å°äºä¸äºä»¥åä¸æç &lt;span class="caps"&gt;CSS&lt;/span&gt;&amp;nbsp;èªæ³ï¼å&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nt"&gt;p&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="nb"&gt;margin-top&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;1.5em&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä»£è¡¨é¸åç¸é°ç p åç´ ï¼éæ¨£å¯ä»¥é¿åç´æ¥æ¹ p ç margin è® p è h*ãulãpre ç­éè·å¤ªå¯¬ççæ³ã&lt;strong&gt;åç«¯ççå¤ªç¥å¦äºã&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id="edit-2015-09-23"&gt;&lt;span class="caps"&gt;EDIT&lt;/span&gt;&amp;nbsp;(2015-09-23)&lt;/h3&gt;
&lt;p&gt;å¦å¤ smartypants ææåæé»ç©ï¼åæ¯è¡¨é 13&amp;nbsp;åæ&lt;/p&gt;
&lt;p class="center"&gt;&lt;span style="font-size: 4em; line-height: 1em;"&gt;13&amp;#8221; vs&amp;nbsp;13&amp;#34;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;ä¸æ &lt;code&gt;"&lt;/code&gt;ï¼&lt;span class="caps"&gt;QUOTATION&lt;/span&gt; &lt;span class="caps"&gt;MARK&lt;/span&gt; &lt;code&gt;\u0022&lt;/code&gt;ï¼ç´æ¥å¯«æ &lt;code&gt;&amp;amp;#34;&lt;/code&gt; å°±æè¢«è½ææå·¦éé£æ¨£ &lt;code&gt;â&lt;/code&gt;ï¼&lt;span class="caps"&gt;RIGHT&lt;/span&gt; &lt;span class="caps"&gt;DOUBLE&lt;/span&gt; &lt;span class="caps"&gt;QUOTATION&lt;/span&gt; &lt;span class="caps"&gt;MARK&lt;/span&gt; &lt;code&gt;\u201D&lt;/code&gt;ï¼ã&lt;/p&gt;
&lt;p&gt;ä¹æè¡¨æ ¼çæ ¼å¼å ä¸ï¼ä»¿é  bootstrap è¡¨æ ¼ overflow ææè®æ block&amp;nbsp;å¯ä»¥æ»åèçã&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;ä»¥åé¨è½æ ¼çé·ç¸ï¼
&lt;div class="figure align-center"&gt;
  &lt;img src="//blog.liang2.tw/posts/2015/09/blog-internals/pics/oldsite.png"/&gt;
&lt;/div&gt;&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</summary><category term="zh"></category><category term="pelican"></category><category term="blog"></category><category term="python"></category></entry><entry><title>é¨è½æ ¼ç¬¬ä¸ç¯</title><link href="//blog.liang2.tw/posts/2015/09/blog-first-post/" rel="alternate"></link><updated>2015-09-20T00:00:00+08:00</updated><author><name>Liang2</name></author><id>tag:blog.liang2.tw,2015-09-20:posts/2015/09/blog-first-post/</id><summary type="html">&lt;p&gt;æä»¥å¢ï¼éå°±æ¯ææ°çé¨è½æ ¼ã&lt;/p&gt;
&lt;p&gt;æä¸ç´é½æè¨éèªå·±çç¿æ£ãåä¸­æé±è¨ï¼é«ä¸­æé±è¨ï¼å¤§ä¸çæåæ Facebookï¼å¤§äºä¹å¾åæåçã&amp;nbsp;è¨éèªå·±å¶å¯¦åªè¦ç´æå­å°±å¤ äºãæä»¥ï¼éåé¨è½æ ¼æ«æä¹ä¸ææ¿ä¾åéä»¶äºã&lt;/p&gt;
&lt;p&gt;ä¸éç´æå­ææåéæ¯è »éº»ç©çï¼åç¨å¼çç­è¨ï¼æä¸äºåå¤çæç« ï¼ä¾å¦ï¼å®ç©ï¼ï¼&amp;nbsp;ç¨ç´æå­è¨å°±å¾éº»ç©ï¼å¯è®æ§éå¸¸å·®ï¼åä¾èªå·±ç·¨è¼¯ãæçä¸ä¹å¾å°é£ï¼å¤åé¢åå å¨ä¸èµ·å°±æçºå¾å¤§çåé¡ã&lt;/p&gt;
&lt;p&gt;æ¼æ¯æäºå»ºèªå·±é¨è½æ ¼çæ³æ³ã&lt;/p&gt;
&lt;h3 id="_1"&gt;ææä»éº¼å§å®¹ï¼&lt;/h3&gt;
&lt;p&gt;ç®åè³å°æéäºæ±è¥¿ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¨å¼éç¼å¿å¾&lt;/li&gt;
&lt;li&gt;ç ç©¶çç­è¨&lt;/li&gt;
&lt;li&gt;ç¤¾ç¾¤ï¼Ex&amp;nbsp;PyConï¼çè¨é&lt;/li&gt;
&lt;li&gt;å®ç©ï¼ä¸»è¦æ¯åç«&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦å¤å¯è½ææä¸äºçè±ææç« ï¼å çºæä¹è¦ç³è«å­¸æ ¡ãéæè©²å¯ä»¥ç¨ Tag æè Category&amp;nbsp;ä¾ç¯©é¸ãä¸éä¸»è¦æè©²æ¯åæè¡æ§çé¨è½æ ¼ã&lt;/p&gt;
&lt;h3 id="_2"&gt;é¨è½æ ¼ä¹å¾åç¨®ç¨®è­¬å¦é»æ­·å²&lt;/h3&gt;
&lt;p&gt;æç®åè¨æ¶ä¸­ï¼ç¬¬ä¸åé¨è½æ ¼æ¯åä¸­ç¨ç &lt;span class="caps"&gt;MSN&lt;/span&gt;/Hotmailãä½å¨æç¡æ³ç»å¥ hotmail&amp;nbsp;ä¿¡ç®±å¸³èè¢«åçµçåæï¼å®æè©²ä¹æ¶å¤±å¨éåä¸çä¸äºã&lt;/p&gt;
&lt;p&gt;ç¬¬äºåé¨è½æ ¼æè©²æ¯åä¸é«ä¸­ç&lt;a href="http://blog.yam.com/myway"&gt;éå®¢æ¨&lt;/a&gt;ï¼å¨èè¯è¤ä¸ï¼ç¶å¹´ Google éæ²ç¨å ä¸­ææå°å¸å ´ãæå¤å°å®ç«ç¶æ²æåæï¼èä¸ä¹æ²ä»éº¼äººååçºãéå®¢æ¨ãï¼æå°éå¯ä»¥å¨ç¬¬ä¸é ï¼ç°¡ç´æ¯â¦â¦å¯ä¸å¯ä»¥å¯«ä¿¡çµ¦ yam æå®éæåè¶å®³ç¾çãå¸³èæ¯ &lt;code&gt;myway&lt;/code&gt; ä¹è »ççï¼ç¾å¨æè©²æ¶ä¸å°ééº¼æ½®ç &lt;span class="caps"&gt;ID&lt;/span&gt; äºãæ±ç¨±æ¯&lt;strong&gt;åè·¯å®¢é¿å&lt;/strong&gt;ï¼éå¯¦å¨æ¯â¦â¦å¥½å§å°ç¾å¨éæ¯è »åæ­¡çã&lt;/p&gt;
&lt;p&gt;æè¿ç¼ææéæ¯ 2007 å¹´ 2&amp;nbsp;æï¼ä¹å°±æ¯æä¸­äºçå¨éçæåï¼å¥½å¦å¶å¯¦æ¯é«ä¸ï¼ãæç« æ¯èªå·±å¯«çç­ç¯å°èªªï¼éç¶åªæç¬¬ä¸ç« ï¼&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¥½æ¼äº®çè±åã&lt;/p&gt;
&lt;p&gt;æè¹²åå¨è±ååï¼è¼è¼çç¨ææ«æ¸èä¸æµæµçéçç¾ãå°å°çåå°ï¼ç«æ¯å¦æ­¤ç¹½ç´ãä¸æææ´é½çè±ï¼å¨èªå·±å°å°å°ç¤ç¶»æ¾æèç¼çè²å½©ãç¶æåè¦èéç­å¥é¬¥è±çæ¯è²ï¼ä¸ç¥ä¸è¦ºå°ä¾¿çºç®ç©ç¥è¿·ï¼ä¸å¤§ççè±æµ·å¨è¦æµ·ä¸­æ¼«å»¶éä¾ï¼æåªåæ³åèªå·±å¨å¶ä¸­å¥è·çæ¨£å­ï¼ç¨æå¿«éå°æéä¸æä¸åå¾è¦ç·ä¸­æ¶å¤±çè±æµï¼æå¨å°å¾ä¸­æè½èèº«é«ï¼å¨è¦æµ·ä¸­æå¯è¼çå¤äºï¼ææ³åèªå·±ä¾¿åè¥å¨é£è±æµ·ä¸­ï¼å¼µééæä»ç´°ååèè±è¾®æº«æçè§¸æï¼éæé£æ·¡æ·¡çè±é¦ï¼æ¬é ­æèèå¤©ï¼æé«èçç¬èâ¦â¦ &lt;/p&gt;
&lt;p&gt;ï¼å¦æççæ³ççè©±å¨æå¨&lt;a href="http://blog.yam.com/myway/article/8033752"&gt;éå&lt;/a&gt;ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;éç¯å°èªªæå¾æå®ç¨¿èä¸ææåºå»ï¼å¨å£«æå°é» K&amp;nbsp;æ¸ä¸­å¿å¯«å®çãä¸éç¶å¹´æ¯ç´ç­å¯«å¨ç¨¿ç´ä¸ï¼å¾ä¾å°±æ¶å¾æå­äºãéå°èªªæ¯å¨çå®å°çå°å¥³ç¬¬ä¸å­£çæåå¯«çï¼å´éåå°å®çä¸çè§è·æäºæ¹å¼å½±é¿ã&lt;/p&gt;
&lt;p&gt;å¦èªªå¥½çæè¡æ§é¨è½æ ¼å¢ï¼&lt;/p&gt;
&lt;p&gt;Let the journey&amp;nbsp;begin.&lt;/p&gt;</summary><category term="zh"></category></entry></feed>